目次

1. [問題概要](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#problem-overview)
2. [入力1](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#input1)1.    1. [作業期間](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#work-time-frame)
2.    2. [地理情報](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#geo-data)
3.    3. [ワーカー](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#worker)
4.    4. [ジョブ](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#job)
3. [出力1](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#output1)
4. [入力2(採点)](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#input2)1.    1. [採点方法](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#scoring-method)
5. [テストケース生成規則](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#testcase-generation-rules)
6. [順位決定方法](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#ranking-method)
7. [制約](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#constraints)
8. [ツールキット](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#toolkit)
9. [ビジュアライザ](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#visualizer)

## 問題概要

この問題では、農機シェアリングサービスにおいて、所有する機械や人員（単純化して、以下"ワーカー"とする）を最大限活用し、報酬*が最も多くなるように農作業（以下、"ジョブ"と呼ぶ）を
処理することを考える。ワーカーに移動と作業の指示を出し、空間内に配置された数多く存在するジョブを処理していく。各ジョブは複数の小作業を表す"タスク"をワーカーが規定の量処理することで完了と見なされる。ジョブを完了することで報酬を獲得できるが、タスクを処理する時刻により報酬量は異なるため適切な作業時間帯を考慮して処理する必要がある。また、各時刻における実行可能なタスク数はワーカーの処理能力に依存する。

*報酬：農作物の適切な収穫時期、ナノグリッドから農機に供給する再生可能エネルギーの利用率等を想定する。

![](https://img.atcoder.jp/hokudai-hitachi2022/ffbe45bdd4d63e56094c790802bb27a7.png)

![](https://img.atcoder.jp/hokudai-hitachi2022/caaea5d124ed03231537bc649de02f6f.png)

入力として最初に以下の情報が与えられる。

1. 作業期間
2. 地理情報（グラフ）
3. ワーカーの情報
4. 全てのジョブの情報

これに対しコンテスタントは

1. 作業期間内の全ての時刻におけるワーカーの行動

を出力する。

作業により得られた報酬の総和がスコアとなる。

以下はその詳細である。

## 入力1

最初に入力として

1. 作業期間
2. 地理情報（グラフ）
3. ワーカーの情報
4. 全てのジョブの情報

が以下の形式で標準入力から与えられる。

```plain
$T_{\rm{max}}\\
N_V\,\,N_E\\
u_1\quad v_1\quad d_1\\
\vdots\\
u_{N_E}\,\, v_{N_E}\,\, d_{N_E}\\
N_{\rm{worker}}\\
v^{\rm{init}}_1\,\,L^\text{max}_1\,\,N^{\rm{JobType}}_1\,\,\text{Type}^1_1\,\,\text{Type}^1_2\,\,\cdots \text{Type}^1_{N^{\rm{JobType}}_1}\\
\vdots\\
v^{\rm{init}}_{N_{\rm{worker}}}\,\,L^\text{max}_{N_{\rm{worker}}}\,\,N^{\rm{JobType}}_{N_{\rm{worker}}}\,\,\text{Type}^{N_{\rm{worker}}}_1\,\,\text{Type}^{N_{\rm{worker}}}_2\,\,\cdots \text{Type}^{N_{\rm{worker}}}_{N^{\rm{JobType}}_1}\\
N_{\rm{job}}\\
\text{Job}_1\\
\vdots\\
\text{Job}_{N_{\rm{job}}}$
```

($\text{Job}_i$の構成は後述)

### 作業期間

- **入力**-   - 最初の$1$行目で作業期間の長さ$T_\text{max}$が与えられる。

この問題における時刻$t$は $1$ から $T_{\text{max}}$までの整数の値をとる。

入力例
以下は $T_\text{max}=300$の例:

```plain
300
```

(末尾に改行有)

- 1行目:作業期間の長さは`300` である。($T_\text{max}=300$)

### 地理情報

- **入力**-   - 次の$1$行で、問題の地理情報を表すグラフ(連結な正の重み付き無向グラフ)の頂点数$N_V$と辺の数$N_E$が与えられる。-   -   - この$N_V$個の頂点には$1$から順に$N_V$まで頂点番号が割り当てられるものとする。
-   - 続く$N_E$行で辺を表す情報: 端点$u_i,v_i$と重み(=距離)$d_i$ が与えられる。($1\leq i \leq N_E$)

後述するが、[ジョブ](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#job)はこのグラフの頂点上に配置され、[ワーカー](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#worker)はこのグラフの上を移動する。

入力例
以下は $N_V=14,N_E=19$の例:

```plain
14 19
1 7 1
1 2 1
2 9 1
2 3 1
3 5 1
3 7 1
3 6 1
4 13 2
4 10 2
4 6 1
4 5 1
6 8 1
7 8 1
8 14 2
9 11 2
10 12 2
10 11 2
12 13 2
13 14 2
```

(末尾に改行有)

- 1行目:グラフの頂点は`14`個存在し、辺は`19`個存在する。($N_V=14,N_E=19$)-   - この`14`個の頂点には$1$から順に`14`まで頂点番号が割り当てられている。
-   - 以下、頂点番号$i$に対応する頂点 を単に 頂点$i$ と呼ぶ。
- 2行目:頂点`1`と頂点`7`の間に長さ`1`の辺が存在する。($u_{1}=1,v_{1}=7,d_{1}=1$)
- 3行目:頂点`1`と頂点`2`の間に長さ`1`の辺が存在する。($u_{2}=1,v_{2}=2,d_{2}=1$)
- 4行目:頂点`2`と頂点`9`の間に長さ`1`の辺が存在する。($u_{3}=2,v_{3}=9,d_{3}=1$)
- 5行目:頂点`2`と頂点`3`の間に長さ`1`の辺が存在する。($u_{4}=2,v_{4}=3,d_{4}=1$)
- 6行目:頂点`3`と頂点`5`の間に長さ`1`の辺が存在する。($u_{5}=3,v_{5}=5,d_{5}=1$)
- 7行目:頂点`3`と頂点`7`の間に長さ`1`の辺が存在する。($u_{6}=3,v_{6}=7,d_{6}=1$)
- 8行目:頂点`3`と頂点`6`の間に長さ`1`の辺が存在する。($u_{7}=3,v_{7}=6,d_{7}=1$)
- 9行目:頂点`4`と頂点`13`の間に長さ`2`の辺が存在する。($u_{8}=4,v_{8}=13,d_{8}=2$)
- 10行目:頂点`4`と頂点`10`の間に長さ`2`の辺が存在する。($u_{9}=4,v_{9}=10,d_{9}=2$)
- 11行目:頂点`4`と頂点`6`の間に長さ`1`の辺が存在する。($u_{10}=4,v_{10}=6,d_{10}=1$)
- 12行目:頂点`4`と頂点`5`の間に長さ`1`の辺が存在する。($u_{11}=4,v_{11}=5,d_{11}=1$)
- 13行目:頂点`6`と頂点`8`の間に長さ`1`の辺が存在する。($u_{12}=6,v_{12}=8,d_{12}=1$)
- 14行目:頂点`7`と頂点`8`の間に長さ`1`の辺が存在する。($u_{13}=7,v_{13}=8,d_{13}=1$)
- 15行目:頂点`8`と頂点`14`の間に長さ`2`の辺が存在する。($u_{14}=8,v_{14}=14,d_{14}=2$)
- 16行目:頂点`9`と頂点`11`の間に長さ`2`の辺が存在する。($u_{15}=9,v_{15}=11,d_{15}=2$)
- 17行目:頂点`10`と頂点`12`の間に長さ`2`の辺が存在する。($u_{16}=10,v_{16}=12,d_{16}=2$)
- 18行目:頂点`10`と頂点`11`の間に長さ`2`の辺が存在する。($u_{17}=10,v_{17}=11,d_{17}=2$)
- 19行目:頂点`12`と頂点`13`の間に長さ`2`の辺が存在する。($u_{18}=12,v_{18}=13,d_{18}=2$)
- 20($=1+N_E$)行目:頂点`13`と頂点`14`の間に長さ`2`の辺が存在する。($u_{19}=13,v_{19}=14,d_{19}=2$)

### ワーカー

ワーカーはジョブを処理する存在であり、移動とタスクの実行が可能である。これはコンテスタントの入力により操作される。([ワーカーの行動](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#worker-action)を参照)

- **入力**-   - 続く$1$行でワーカーの数$N_{\text{worker}}$が与えられる。
-   - &lt;p&gt;
次の$N_{\text{worker}}$行で各ワーカーの構成情報:
&lt;/p&gt;-   -   - 初期位置(頂点番号): $v^{\text{init}}_i$
-   -   - 単位時間に実行可能なタスク数の上限: $L^{\text{max}}_i$
-   -   - 実行可能なジョブのタイプ数 $N^{\text{JobType}}_i$ と タイプの列 $\text{Type}^i_1\,\,\text{Type}^i_2\,\,\cdots\,\,\text{Type}^i_{N^{\text{JobType}}_i}$

が与えられる。($1\leq i \leq N_{\text{worker}}$)
&lt;p&gt;&lt;/p&gt;

この入力における順序はワーカーのIDに対応する。

ワーカーごとに、単位時間に実行可能なタスク数の上限 や 処理できるジョブのタイプは異なる。

入力例
以下は $N_{\text{worker}}=5$ の例:

```plain
5
6 100 3 1 2 3
13 59 1 3
10 55 2 2 3
9 47 3 1 2 3
9 89 1 2
```

(末尾に改行有)

- 1行目:ワーカーの数は`5`である。($N_{\text{worker}}=5$)
- 2行目:ID=1であるワーカーの記述。-   - 初期位置は頂点番号`6`に対応する頂点である。($v^{\text{init}}_1=6$)
-   - 単位時間あたりに実行可能なタスク数の上限は`100`である。($L^{\text{max}}_1=100$)
-   - 実行可能なジョブのタイプは`3`つあり($N^{\text{JobType}}_1=3$)、それらは`1`と`2`と`3`である。($\text{Type}^1_1=1,\text{Type}^1_2=2,\text{Type}^1_3=3$)
- 3行目:ID=2であるワーカーの記述。-   - 初期位置は頂点番号`13`に対応する頂点である。($v^{\text{init}}_2=13$)
-   - 単位時間あたりに実行可能なタスク数の上限は`59`である。($L^{\text{max}}_2=59$)
-   - 実行可能なジョブのタイプは`1`つあり($N^{\text{JobType}}_2=1$)、それは`3`である。($\text{Type}^2_1=3$)
- 4行目:ID=3であるワーカーの記述。-   - 初期位置は頂点番号`10`に対応する頂点である。($v^{\text{init}}_3=10$)
-   - 単位時間あたりに実行可能なタスク数の上限は`55`である。($L^{\text{max}}_3=55$)
-   - 実行可能なジョブのタイプは`2`つあり($N^{\text{JobType}}_3=2$)、それらは`2`と`3`である。($\text{Type}^3_1=2,\text{Type}^3_2=3$)
- 5行目:ID=4であるワーカーの記述。-   - 初期位置は頂点番号`9`に対応する頂点である。($v^{\text{init}}_4=9$)
-   - 単位時間あたりに実行可能なタスク数の上限は`47`である。($L^{\text{max}}_4=47$)
-   - 実行可能なジョブのタイプは`3`つあり($N^{\text{JobType}}_4=3$)、それらは`1`と`2`と`3`である。($\text{Type}^4_1=1,\text{Type}^4_2=2,\text{Type}^4_3=3$)
- 6($=1+N_{\text{worker}}$)行目:ID=5であるワーカーの記述。-   - 初期位置は頂点番号`9`に対応する頂点である。($v^{\text{init}}_5=9$)
-   - 単位時間あたりに実行可能なタスク数の上限は`89`である。($L^{\text{max}}_5=89$)
-   - 実行可能なジョブのタイプは`1`つあり($N^{\text{JobType}}_5=1$)、それは`2`である。($\text{Type}^5_1=2$)

### ジョブ

ジョブは頂点上でワーカーが実行する仕事である。

- **ジョブとは**-   - **ジョブ**は現実における作業の1つの単位に相当し、例えば作物の収穫や農薬の散布等である。
-   - これらはより小さな単位の複数作業から構成される。例えば、果実1つを摘み取る、稲を一定面積刈り取る、農薬を一定面積に撒く、といったものである。このようにジョブを構成する小さな単位の作業をここでは**タスク**と呼ぶことにする。
-   - ジョブを構成するタスクが全て一定量行われることでそのジョブは完了すると考える。
-   - 現実的にはジョブは複数種類のタスクから構成されるかもしれないが、今回は単純化しタスクをこなす量だけに着目する。すなわち、**タスクを規定の量処理することでジョブが完了したとみなす**ことにする。
-   - ジョブが行われる場所はそのジョブ毎に異なる。この問題ではそれを[地理情報](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#geo-data)として与えられた**グラフの頂点上にジョブを配置**することで表現する。
- **タスクの処理と報酬**-   - 各ジョブのタスクを処理するものとして**&amp;lt;a href="#worker"&amp;gt;ワーカー&amp;lt;/a&amp;gt;**が存在する。
-   - コンテスタントは各ワーカーに**移動**や**作業**の指示を出し、ジョブが存在する頂点に移動させタスクを処理する。
-   - コンテスタントは**ジョブを&amp;lt;font color="#DC143C"&amp;gt;完了する(=タスクを規定の量処理する)&amp;lt;/font&amp;gt;ことで報酬を得る**。
-   - ワーカーは単位時間あたりに処理できるタスク量に上限([$L^{\text{max}}$](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#worker))があり、ジョブを完了するにはある程度時間がかかる。典型的には、ある時刻から一定時間、毎時刻タスクを一定量処理することになる。
-   - **ジョブ完了時に得られる報酬はタスクを処理した時刻によって異なる**。具体的には:&lt;p style="text-align:center;"&gt;各時刻におけるタスク処理量あたりの報酬量$r(t)$ $\times$ その時刻に処理されたタスク量&lt;/p&gt;の時間に関する総和($t=1,2,\cdots,T_\text{max}$)である。
-   - 各時刻におけるタスク処理量あたりの報酬量$r(t)$は**ジョブ毎にも異なる。**
-   - 全ワーカーが集めた報酬の総和がこの問題のスコアを構成する中心的な要素である。([採点方法](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#scoring-method)) コンテスタントはこの報酬の総和が大きくなるようにワーカーの行動を決定する。
- **ジョブ間の依存関係**-   - ジョブは他のジョブに依存する場合がある。すなわち、そのジョブが依存するジョブが全て完了していなければそのジョブのタスクを処理することができないという制限がある。
-   - 依存するジョブが存在しない場合このような制限は無い。

各種制限

- 報酬が獲得できない時刻(タスク処理量あたりの報酬量 = 0 である時刻)にはタスクを処理することができない。

- **入力**-   - 続く$1$行でジョブの数$N_{\text{job}}$が与えられる。
-   - 次の行からジョブの構成情報$\text{Job}_i$が$N_{\text{job}}$個与えられる。(合計$N_{\text{job}}\times 3$行)

ジョブの構成情報$\text{Job}_i$は次の形式で与えられる。

```plain
$\text{ID}^{\rm{job}}_i\,\,\text{Type}_i\,\,N^{\rm{task}}_i\,\,v^{\rm{job}}_i\\
N^{\rm{reward}}_i\,\, t^{\rm{reward}}_{i,1}\,\, y^{\rm{reward}}_{i,1}\cdots t^{\rm{reward}}_{i,N^{\rm{reward}}_i}\,\, y^{\rm{reward}}_{i,N^{\rm{reward}}_i}\\
N^{\rm{depend}}_i\,\, {\rm{id}}^{\rm{depend}}_{i,1}\,\, \cdots \,\,{\rm{id}}^{\rm{depend}}_{i,N^{\rm{depend}}_i}$
```

- 1行目-   - ジョブID: $\text{ID}^{\text{job}}_i$
-   - ジョブタイプ: $\text{Type}_i$
-   - 完了までのタスク数: $N^{\text{task}}_i$
-   - ジョブの位置(頂点番号): $v^{\text{job}}_i$
- 2行目(報酬関数$r(t)$の定義)-   - 報酬関数の制御点個数:$N^{\text{reward}}_i$
-   - 制御点の列:$t^{\rm{reward}}_{i,1}\,\,y^{\rm{reward}}_{i,1}\,\,t^{\rm{reward}}_{i,2}\,\,y^{\rm{reward}}_{i,2}\,\,\cdots\,\,t^{\rm{reward}}_{i,N^{\text{reward}}_i}\,\,y^{\rm{reward}}_{i,N^{\text{reward}}_i}$
- 3行目(依存するジョブ)-   - 依存するジョブの数: $N^{\text{depend}}_i$
-   - 依存するジョブID: ${\rm{id}}^{\rm{depend}}_{i,1}\,\,{\rm{id}}^{\rm{depend}}_{i,2}\,\, \cdots \,\,{\rm{id}}^{\rm{depend}}_{i,N^{\rm{depend}}_i}$

報酬関数$r(t)$の詳細
時刻$t$におけるタスク当たりの報酬を与える関数$r(t)$は、1個以上の制御点(時刻と値のペア)とそれらの間の線形補間で定める。

すなわち、制御点の列$p=((t_i,y_i))_{i=1,\cdots,n}$  ($t_i,y_i\in \mathbb{Z},t_1 &lt; t_2 &lt; \cdots &lt; t_n,n\geq 1$)が与えられたとき、時刻$t$におけるタスク当たりの報酬を与える関数$r(t)$ (正確には$r(t;p)$)を

$r(t)=\begin{cases}
y_1, &amp; \text{if}\,\, t &lt; t_1, \\
y_n, &amp; \text{if}\,\, t \geq t_n, \\
(y_\text{next}-y_\text{prev})(t-t_\text{prev})/(t_\text{next}-t_\text{prev})+y_\text{prev}, &amp; \text{otherwise}.
\end{cases}$

と定める。

ただし、$(t_\text{prev},y_\text{prev})$は時刻に関して$t$を超えない最大のペア、$(t_\text{next},y_\text{next})$は時刻に関して$t$を超える最小のペアである。

$r(t)$（と$r(t)$の整数倍、およびそれらの和）は小数で計算される。

入力例
以下は $N_{\text{job}}=7$の例(これはジョブの数が極端に少ない例であることに注意):

```plain
7
1 2 625 8
15 1 0 2 1581724 4 1733369 6 1561173 8 1596919 10 1090320 12 1031662 14 929778 16 1095326 18 665006 20 757205 22 567001 24 600233 26 576475 27 0
0
2 3 993 14
15 2 0 3 1147309 5 1186255 7 1098060 9 836498 11 872163 13 1071865 15 1408708 17 2135395 19 1517111 21 1079036 23 740032 25 904947 27 976790 28 0
1 1
3 2 1310 14
15 2 0 3 992842 5 818304 7 676647 9 859283 11 871992 13 859663 15 1776296 17 3025691 19 1304819 21 1606358 23 3469915 25 2801513 27 3046487 28 0
2 2 1
4 2 1356 13
15 3 0 4 2016014 6 2138183 8 1711305 10 2020927 12 2030686 14 1203758 16 973133 18 1102291 20 954221 22 725869 24 700613 26 604824 28 742452 29 0
0
5 1 1225 10
15 5 0 6 1256998 8 1096984 10 820728 12 818626 14 1089776 16 1014615 18 1062766 20 900374 22 1190773 24 1050656 26 1876847 28 1530806 30 952050 31 0
1 4
6 3 1362 7
15 0 0 1 608492 3 960135 5 961858 7 998014 9 1101543 11 1288452 13 1825126 15 1145645 17 1057616 19 1312087 21 991237 23 1123573 25 882743 26 0
2 7 5
7 1 1307 1
15 5 0 6 299791 8 303708 10 533803 12 879014 14 828842 16 946449 18 991630 20 1551550 22 1499622 24 1793967 26 1425447 28 1732069 30 1207139 31 0
0
```

- 1行目:全ジョブの数は`7`である。($N_{\text{job}}=7$)-   - 実際の問題では数百以上のジョブが与えられる。
- 2行目:ジョブID=1の記述開始。-   - ジョブIDは`1`である。($\text{ID}^{\text{job}}_1=1$)
-   - このジョブのタイプは`2`である。($\text{Type}_1=2$)
-   - このジョブの完了に必要なタスク数は`625`である。($N^{\text{task}}_1=625$)
-   - このジョブは頂点`8`上に存在する。($v^{\text{job}}_1=8$)
- 3行目:ジョブID=1の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_1=15$)
-   - 制御点の列は((`1`,`0`), (`2`,`1581724`), (`4`,`1733369`), (`6`,`1561173`), (`8`,`1596919`), (`10`,`1090320`), (`12`,`1031662`), (`14`,`929778`), (`16`,`1095326`), (`18`,`665006`), (`20`,`757205`), (`22`,`567001`), (`24`,`600233`), (`26`,`576475`), (`27`,`0`))である。-   -   - 報酬が得られる時刻は$2,3,\cdots,26$である。
- 4行目:ジョブID=1が依存するジョブ。ジョブID=1の記述終了。-   - このジョブが依存するジョブの数は`0`個である。($N^{\text{depend}}_1=0$)
-   - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
- 5行目:ジョブID=2の記述開始。-   - ジョブIDは`2`である。($\text{ID}^{\text{job}}_2=2$)
-   - このジョブのタイプは`3`である。($\text{Type}_2=3$)
-   - このジョブの完了に必要なタスク数は`993`である。($N^{\text{task}}_2=993$)
-   - このジョブは頂点`14`上に存在する。($v^{\text{job}}_2=14$)
- 6行目:ジョブID=2の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_2=15$)
-   - 制御点の列は((`2`,`0`), (`3`,`1147309`), (`5`,`1186255`), (`7`,`1098060`), (`9`,`836498`), (`11`,`872163`), (`13`,`1071865`), (`15`,`1408708`), (`17`,`2135395`), (`19`,`1517111`), (`21`,`1079036`), (`23`,`740032`), (`25`,`904947`), (`27`,`976790`), (`28`,`0`))である。-   -   - 報酬が得られる時刻は$3,4,\cdots,27$である。
- 7行目:ジョブID=2が依存するジョブ。ジョブID=2の記述終了。-   - このジョブが依存するジョブの数は`1`個である。($N^{\text{depend}}_2=1$)
-   - このジョブはID=`1`のジョブに依存する。($\text{id}^\text{depend}_{2,1}=1$)
- 8行目:ジョブID=3の記述開始。-   - ジョブIDは`3`である。($\text{ID}^{\text{job}}_3=3$)
-   - このジョブのタイプは`2`である。($\text{Type}_3=2$)
-   - このジョブの完了に必要なタスク数は`1310`である。($N^{\text{task}}_3=1310$)
-   - このジョブは頂点`14`上に存在する。($v^{\text{job}}_3=14$)
- 9行目:ジョブID=3の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_3=15$)
-   - 制御点の列は((`2`,`0`), (`3`,`992842`), (`5`,`818304`), (`7`,`676647`), (`9`,`859283`), (`11`,`871992`), (`13`,`859663`), (`15`,`1776296`), (`17`,`3025691`), (`19`,`1304819`), (`21`,`1606358`), (`23`,`3469915`), (`25`,`2801513`), (`27`,`3046487`), (`28`,`0`))である。-   -   - 報酬が得られる時刻は$3,4,\cdots,27$である。
- 10行目:ジョブID=3が依存するジョブ。ジョブID=3の記述終了。-   - このジョブが依存するジョブの数は`2`個である。($N^{\text{depend}}_3=2$)
-   - このジョブはID=`2`,`1`のジョブ全てに依存する。($\text{id}^\text{depend}_{3,1}=2,\text{id}^\text{depend}_{3,2}=1$)
- 11行目:ジョブID=4の記述開始。-   - ジョブIDは`4`である。($\text{ID}^{\text{job}}_4=4$)
-   - このジョブのタイプは`2`である。($\text{Type}_4=2$)
-   - このジョブの完了に必要なタスク数は`1356`である。($N^{\text{task}}_4=1356$)
-   - このジョブは頂点`13`上に存在する。($v^{\text{job}}_4=13$)
- 12行目:ジョブID=4の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_4=15$)
-   - 制御点の列は((`3`,`0`), (`4`,`2016014`), (`6`,`2138183`), (`8`,`1711305`), (`10`,`2020927`), (`12`,`2030686`), (`14`,`1203758`), (`16`,`973133`), (`18`,`1102291`), (`20`,`954221`), (`22`,`725869`), (`24`,`700613`), (`26`,`604824`), (`28`,`742452`), (`29`,`0`))である。-   -   - 報酬が得られる時刻は$4,5,\cdots,28$である。
- 13行目:ジョブID=4が依存するジョブ。ジョブID=4の記述終了。-   - このジョブが依存するジョブの数は`0`個である。($N^{\text{depend}}_4=0$)
-   - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
- 14行目:ジョブID=5の記述開始。-   - ジョブIDは`5`である。($\text{ID}^{\text{job}}_5=5$)
-   - このジョブのタイプは`1`である。($\text{Type}_5=1$)
-   - このジョブの完了に必要なタスク数は`1225`である。($N^{\text{task}}_5=1225$)
-   - このジョブは頂点`10`上に存在する。($v^{\text{job}}_5=10$)
- 15行目:ジョブID=5の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_5=15$)
-   - 制御点の列は((`5`,`0`), (`6`,`1256998`), (`8`,`1096984`), (`10`,`820728`), (`12`,`818626`), (`14`,`1089776`), (`16`,`1014615`), (`18`,`1062766`), (`20`,`900374`), (`22`,`1190773`), (`24`,`1050656`), (`26`,`1876847`), (`28`,`1530806`), (`30`,`952050`), (`31`,`0`))である。-   -   - 報酬が得られる時刻は$6,7,\cdots,30$である。
- 16行目:ジョブID=5が依存するジョブ。ジョブID=5の記述終了。-   - このジョブが依存するジョブの数は`1`個である。($N^{\text{depend}}_5=1$)
-   - このジョブはID=`4`のジョブに依存する。($\text{id}^\text{depend}_{5,1}=4$)
- 17行目:ジョブID=6の記述開始。-   - ジョブIDは`6`である。($\text{ID}^{\text{job}}_6=6$)
-   - このジョブのタイプは`3`である。($\text{Type}_6=3$)
-   - このジョブの完了に必要なタスク数は`1362`である。($N^{\text{task}}_6=1362$)
-   - このジョブは頂点`7`上に存在する。($v^{\text{job}}_6=7$)
- 18行目:ジョブID=6の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_6=15$)
-   - 制御点の列は((`0`,`0`), (`1`,`608492`), (`3`,`960135`), (`5`,`961858`), (`7`,`998014`), (`9`,`1101543`), (`11`,`1288452`), (`13`,`1825126`), (`15`,`1145645`), (`17`,`1057616`), (`19`,`1312087`), (`21`,`991237`), (`23`,`1123573`), (`25`,`882743`), (`26`,`0`))である。-   -   - 報酬が得られる時刻は$1,2,\cdots,25$である。
- 19行目:ジョブID=6が依存するジョブ。ジョブID=6の記述終了。-   - このジョブが依存するジョブの数は`2`個である。($N^{\text{depend}}_6=2$)
-   - このジョブはID=`7`,`5`のジョブ全てに依存する。($\text{id}^\text{depend}_{6,1}=7,\text{id}^\text{depend}_{6,2}=5$)
- 20行目:ジョブID=7の記述開始。-   - ジョブIDは`7`である。($\text{ID}^{\text{job}}_7=7$)
-   - このジョブのタイプは`1`である。($\text{Type}_7=1$)
-   - このジョブの完了に必要なタスク数は`1307`である。($N^{\text{task}}_7=1307$)
-   - このジョブは頂点`1`上に存在する。($v^{\text{job}}_7=1$)
- 21行目:ジョブID=7の報酬を表す関数の記述-   - 制御点個数は`15`個である。($N^{\text{reward}}_7=15$)
-   - 制御点の列は((`5`,`0`), (`6`,`299791`), (`8`,`303708`), (`10`,`533803`), (`12`,`879014`), (`14`,`828842`), (`16`,`946449`), (`18`,`991630`), (`20`,`1551550`), (`22`,`1499622`), (`24`,`1793967`), (`26`,`1425447`), (`28`,`1732069`), (`30`,`1207139`), (`31`,`0`))である。-   -   - 報酬が得られる時刻は$6,7,\cdots,30$である。
- 22($=1+3\times N_{\text{job}}$)行目:ジョブID=7が依存するジョブ。ジョブID=7の記述終了。-   - このジョブが依存するジョブの数は`0`個である。($N^{\text{depend}}_7=0$)
-   - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)

入力1全体の例

```plain
300
14 19
1 7 1
1 2 1
2 9 1
2 3 1
3 5 1
3 7 1
3 6 1
4 13 2
4 10 2
4 6 1
4 5 1
6 8 1
7 8 1
8 14 2
9 11 2
10 12 2
10 11 2
12 13 2
13 14 2
5
6 100 3 1 2 3
13 59 1 3
10 55 2 2 3
9 47 3 1 2 3
9 89 1 2
7
1 2 625 8
15 1 0 2 1581724 4 1733369 6 1561173 8 1596919 10 1090320 12 1031662 14 929778 16 1095326 18 665006 20 757205 22 567001 24 600233 26 576475 27 0
0
2 3 993 14
15 2 0 3 1147309 5 1186255 7 1098060 9 836498 11 872163 13 1071865 15 1408708 17 2135395 19 1517111 21 1079036 23 740032 25 904947 27 976790 28 0
1 1
3 2 1310 14
15 2 0 3 992842 5 818304 7 676647 9 859283 11 871992 13 859663 15 1776296 17 3025691 19 1304819 21 1606358 23 3469915 25 2801513 27 3046487 28 0
2 2 1
4 2 1356 13
15 3 0 4 2016014 6 2138183 8 1711305 10 2020927 12 2030686 14 1203758 16 973133 18 1102291 20 954221 22 725869 24 700613 26 604824 28 742452 29 0
0
5 1 1225 10
15 5 0 6 1256998 8 1096984 10 820728 12 818626 14 1089776 16 1014615 18 1062766 20 900374 22 1190773 24 1050656 26 1876847 28 1530806 30 952050 31 0
1 4
6 3 1362 7
15 0 0 1 608492 3 960135 5 961858 7 998014 9 1101543 11 1288452 13 1825126 15 1145645 17 1057616 19 1312087 21 991237 23 1123573 25 882743 26 0
2 7 5
7 1 1307 1
15 5 0 6 299791 8 303708 10 533803 12 879014 14 828842 16 946449 18 991630 20 1551550 22 1499622 24 1793967 26 1425447 28 1732069 30 1207139 31 0
0
```

- 1行目:[作業期間](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#work-time-frame)参照
- 2-21行目:[地理情報](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#geo-data)参照
- 22-27行目:[ワーカー](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#worker)参照
- 28-49行目:[ジョブ](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#job)参照

## 出力1

これらの情報が与えられた後、コンテスタントは毎時刻における全ワーカーの行動を以下の形式で出力する:

```plain
$\text{Actions}_1\\
\vdots\\
\text{Actions}_{T_\text{max}}$
```

(末尾に改行を挿入すること)

ただし、$\text{Actions}_i$は時刻$i$における全ワーカーの行動であり、
時刻$i$におけるワーカー$j$の行動を$\text{action}^i_j$とすると以下のように表される。

```plain
$\text{action}^i_1\\
\text{action}^i_2\\
\vdots\\
\text{action}^i_{N_{\text{worker}}}$
```

### ワーカーの行動

コンテスタントは毎時刻における全てのワーカーの行動$\text{action}$を指定する。$\text{action}$の実体は文字列であり、以下の3種類のいずれかである。

- `stay`:移動もジョブ実行もせずその場にとどまる。
- `move w`:現在位置から頂点番号`w`に対応する頂点の方向にその間の最短経路上を距離$1$だけ進む。以下の条件を満たさない場合`WA`(Wrong Answer)となる。-   - 頂点番号`w`に対応する頂点は存在する。
-   - 現在位置と頂点番号`w`に対応する頂点は異なる。
- `execute i a`:ID=`i`のジョブをタスク数`a`だけ実行する。ただし、以下の条件を満たさない場合`WA`(Wrong Answer)となる。-   - ワーカーの現在位置とID=`i`であるジョブが存在する頂点が一致する。
-   - ID=`i`のジョブのタイプは、このワーカーの実行可能ジョブタイプに含まれる。
-   - `a`は1以上の整数。
-   - `a`はID=`i`のジョブの残タスク数を超えない。
-   - `a`はこのワーカーの実行タスク数上限$L^\text{max}_i$を超えない。
-   - ID=`i`のジョブが依存するジョブは全て完了している。
-   - 報酬の値は正である。

`move w`に関して、現在位置と頂点`w`の間に2つ以上の異なる最短経路が存在する場合どれが選ばれるかは未規定である。そのような場合でも、コンテスタントは経路の途中の点を指定して移動する操作を繰り返すことで希望の経路を選ぶことができる。

上記のいずれの文字列パターンにも合致しない$\text{action}$が指定された場合`WA`(Wrong Answer)となる。

また、各時刻終了時に、合計タスク処理量 が 完了までのタスク数 $N^{\text{task}}_i$ を超えるようなジョブが存在する場合 `WA` または `RE` となる。

- **出力**-   - 次の$N_\text{worker}\times T_\text{max}$行で各ワーカーの行動$\text{action}^i_j$を出力する。($1 \leq i \leq T_\text{max},\,\, 1 \leq j \leq N_\text{worker}$)

出力例
以下は $T_\text{max}=30,N_\text{worker}=5$ の例:

```plain
move 8
stay
move 13
stay
stay
execute 1 100
stay
move 13
stay
stay
execute 1 100
stay
move 13
move 1
stay
execute 1 100
stay
move 13
move 1
stay
execute 1 100
stay
move 13
move 1
stay
execute 1 100
stay
move 13
execute 7 47
stay
execute 1 100
stay
execute 4 55
execute 7 47
stay
execute 1 25
move 14
execute 4 55
execute 7 47
stay
stay
move 14
execute 4 55
execute 7 47
stay
stay
move 14
execute 4 55
execute 7 47
stay
stay
move 14
execute 4 55
execute 7 47
stay
stay
move 14
execute 4 55
execute 7 47
stay
stay
move 14
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
execute 2 59
execute 4 55
execute 7 47
stay
stay
stay
execute 4 55
execute 7 47
stay
stay
stay
stay
execute 7 47
stay
stay
stay
stay
execute 7 47
stay
```

- 1-5行目:時刻$1$におけるワーカーの行動を指定: -   - 1行目:このワーカー(ID=1)は現在位置から頂点`8`に向かって移動する。
-   - 2行目:このワーカー(ID=2)は移動もジョブ実行もせずにその場にとどまる。
-   - 3行目:このワーカー(ID=3)は現在位置から頂点`13`に向かって移動する。
-   - 4行目:このワーカー(ID=4)は移動もジョブ実行もせずにその場にとどまる。
-   - 5行目:このワーカー(ID=5)は移動もジョブ実行もせずにその場にとどまる。
- 6-10行目:時刻$2$におけるワーカーの行動を指定: -   - 6行目:このワーカー(ID=1)は現在位置でID=`1`であるジョブのタスクを`100`だけ処理する。
-   - 7行目:このワーカー(ID=2)は移動もジョブ実行もせずにその場にとどまる。
-   - 8行目:このワーカー(ID=3)は現在位置から頂点`13`に向かって移動する。
-   - 9行目:このワーカー(ID=4)は移動もジョブ実行もせずにその場にとどまる。
-   - 10行目:このワーカー(ID=5)は移動もジョブ実行もせずにその場にとどまる。
- 11-145行目は省略
- 146-150行目:時刻$30$におけるワーカーの行動を指定: -   - 146行目:このワーカー(ID=1)は移動もジョブ実行もせずにその場にとどまる。
-   - 147行目:このワーカー(ID=2)は移動もジョブ実行もせずにその場にとどまる。
-   - 148行目:このワーカー(ID=3)は移動もジョブ実行もせずにその場にとどまる。
-   - 149行目:このワーカー(ID=4)は現在位置でID=`7`であるジョブのタスクを`47`だけ処理する。
-   - 150行目:このワーカー(ID=5)は移動もジョブ実行もせずにその場にとどまる。

## 入力2(採点)

出力1が有効であれば、入力としてスコア$S$を標準入力から以下の形式で与える。

> $S$

この値を入力から受け取らない場合、`TLE`となる可能性がある。

また、順位付けに関しては [順位決定方法](https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_a#ranking-method) を参照せよ。

### 採点方法

スコア$S$は以下の式により決定される。

$\begin{aligned}
S=\left\lfloor\sum_{j\in J_\text{finished}}\sum_{w \in W}\sum_{t=1}^{T_\text{max}}a^w_j(t)r_j(t)\right\rfloor
\end{aligned}$

- 完了したジョブの集合:$J_\text{finished}$
- 全ワーカーの集合:$W$
- 時刻$t$にワーカー$w$が実行したジョブ$j$のタスク数:$a^w_j(t)$
- 時刻$t$におけるジョブ$j$のタスク当たりの報酬:$r_j(t)$

ただし、$\left\lfloor x \right\rfloor$ は$x$を超えない最大の整数を返す関数(床関数)である。

## テストケース生成規則

地理情報(グラフ)

- <p>用語</p>
-   - 矩形領域$[x_0,x_1]\times[y_0,y_1]\,\,(x_0&amp;lt;x_1,y_0&amp;lt;y_1)$を中央を通る十字で4個の矩形に等分する操作をここでは**分割**と呼ぶ。
-   - 具体的には$[x_0,x_1]\times[y_0,y_1]$を以下の4つに細分する操作である。-   -   - $[x_0,(x_1+x_0)/2]\times[y_0,(y_0+y_1)/2]$
-   -   - $[x_0,(x_1+x_0)/2]\times[(y_0+y_1)/2,y_1]$
-   -   - $[(x_1+x_0)/2,x_1]\times[y_0,(y_0+y_1)/2]$
-   -   - $[(x_1+x_0)/2,x_1]\times[(y_0+y_1)/2,y_1]$
-   - また、この操作(与えられた矩形領域から矩形領域の集合(上記4つ)を得る操作)を、関数$\text{Split}(R)$として定めておく。
- <p>パラメータ</p>
-   - 矩形領域サイズ:$L &amp;gt; 0$
-   - 最大分割深さ:$d_\text{max} \in \mathbb{Z}_{\geq 0}$
-   - (最大)矩形個数:$M$($0$以上$(4^{d_\text{max}+1}-1)/3$以下の整数)
-   - 距離最小スケール:$s &amp;gt; 0$
-   - 切断面積比:$C\in (0,1]$
- <p>**生成手順1**(グラフの生成)</p>
-   1. 矩形領域の集合$U=\{\}$を用意する。
-   2. 矩形領域$R=[0,L]\times[0,L]$を$U$に追加する。
-   3. $d_\text{max}=0$の場合`8.`に進む。
-   4. $U$からランダムに1つ矩形領域を選び、それを$r$とする。
-   5. $r$の面積が$L^2/4^{d_\text{max}}$である場合`4.`に戻る。
-   6. $\text{Split}(r)$の要素全てを$U$に追加する。-   1.    - 既に$U$に同一の要素が存在する場合、その要素を追加しても$U$は変化しない。
-   7. $|U| &amp;gt; M$を満たす場合、`8.`に進む。満たさない場合`4.`に戻る。
-   8. $U$に属する全ての矩形の**辺の**和集合$A$を重み付き無向グラフ$G=(V,E),W:E\rightarrow \mathbb{R}_{ &amp;gt; 0}$とみなす。-   1.    - グラフの頂点集合$V$は辺の和集合$A$上において直交する線分が存在する点全て。
-   2.    - グラフの辺集合$E$は頂点のペア$\{a,b\}$のうち、$a\neq b$かつ辺の和集合$A$上において$a$から$b$へ他の頂点を経由せず到達できるもの全て。
-   3.    - 重み(関数)$W$は点同士のユークリッド距離で定める。
-   9. この$G=(V,E)$(重み$W$)を地理情報の生成に使用するグラフとして採用する。

(Reference:Eisenstat, D., Random road networks: the quadtree model, Proceeding of the 8th Workshop on Analytic Algorithms and Combinatorics (ANALCO), pp.76-84, 2011 (DOI:[https://doi.org/10.1137/1.9781611973013.9](https://doi.org/10.1137/1.9781611973013.9)))

- **生成手順2**(標高の生成)-   1. 正方形領域$R=[0,1024]\times[0,1024]$を用意する。
-   2. $R$を$x$方向$y$方向共に$128$分割する(=サイズ$8\times8$の正方形領域$128\times128$個に分割する。)
-   3. $R$からランダムな正方形領域を$20$個選びその和集合を$A$とする。
-   4. 再び$R$からランダムな正方形領域を$20$個選びその和集合を$B$とする。
-   5. 以下の偏微分方程式(を上記`2.`の分割により離散化したもの)を時刻$t=100000$まで解く(=$u(100000,x,y)$を計算する):
&lt;p style="text-align:center;"&gt;
$\displaystyle
\frac{\partial u}{\partial t}=\Delta u-b(x,y)u+a(x,y)$
&lt;/p&gt;
ただし、時刻$t=0$における初期値は$u(0,x,y)=u_0(x,y)\equiv 0$, 境界条件はノイマン境界条件で、&lt;br&gt;
$a(x,y)=\begin{cases}
1/8^2, &amp;amp; \text{if}\ (x,y) \in A, \\
0, &amp;amp; \text{otherwise},
\end{cases}$&lt;br&gt;$b(x,y)=\begin{cases}
1/8^2, &amp;amp; \text{if}\ (x,y) \in B, \\
0, &amp;amp; \text{otherwise}.
\end{cases}$&lt;br&gt;である。
-   6. $u(100000,x,y)$を$[0,1]$の範囲に正規化し、それを標高$e(x,y)$として採用する。
- **生成手順3**(グラフの切断、距離スケーリング)-   1. 生成手順2で生成した標高$e(x,y)$のデータをグラフの空間サイズ$[0,L]\times[0,L]$に合わせる。&lt;br&gt;すなわち、空間スケーリングされた標高$\tilde e(x,y)$を$\tilde e(x,y)= e(L\times x/1024,L\times y/1024)$と定める。
-   2. $\tilde e(x,y)$がある実数$z$より大きい部分を返す関数$H(z)=\{(x,y) \in [0,L]\times[0,L]|\tilde e(x,y) &amp;gt; z\}$に対して、$H(z)$の面積が$C\times L^2$以上となるような$z$のうち最大のものを$h$とする。
-   3. 生成手順1で生成したグラフの辺集合$E$について、辺の端点(2つある)の標高がどちらも$h$を下回るものを全て$E$から削除する。
-   4. グラフ$G=(V,E)$の最大の連結成分を$G'=(V',E')$とする。
-   5. 重み$W':E' \rightarrow \mathbb{R}_{ &amp;gt; 0}:$を次のように定める:$W'(e)= s\times W(e)/\min_{e' \in E'}W(e')$
-   6. グラフ$G'=(V',E')$(重み(距離)$W'$)を地理情報として採用する。

報酬を表す区分線形関数
この問題では各時刻における報酬（正確にはタスク当たりの報酬値）を表す関数を有限個の点の線形補間で表現する。その点をここでは制御点と呼び、以下はその有限個の制御点の生成規則である。

- パラメータ-   - 報酬が正である区間長:$L\geq 1$
-   - 区間を細分する長さ:$l\geq 1$
-   - 報酬基準値:$s &amp;gt; 0$
-   - 制御点の値生成時に使用する標準偏差:$\sigma' &amp;gt; 0$
-   - 報酬上限値:$M &amp;gt; 0$
-   - 報酬下限値:$m &amp;gt; 0$

$\sim$

1. 報酬開始時刻$b=\text{randint}(1,T_\text{max}-L)$、報酬終了時刻$e=b+L$、区間分割数$d=\text{round}(L/l)$と定める。ただし、$\text{randint}(m,n)$は$m$以上$n$以下の整数を一様にランダムに選ぶ関数、$\text{round}(x)$は$x$を四捨五入により丸めた整数値を返す関数とする。
2. $\mu=0,\sigma=\sigma'$である対数正規分布に従う乱数を独立に$d+1$個生成し$\{c_i\}_{i=1}^{d+1}$とおく。
3. $\{v_i\}_{i=1}^{d+1}$を $v_i=\prod_{j=1}^{i}c_j$で定める。
4. $B=s\sqrt{(d+1)/\sum_{i=1}^{d+1}v_i^2}$として、$\{r_i\}_{i=1}^{d+1}$を $r_i=\text{round}(Bv_i)$で定める。
5. $r_i &gt; M$または$r_i &lt; m$となるような$i$が存在すれば`2.`に戻る。
6. $t_i=\text{round}(b+(i-1)L/d)$として、時刻と報酬値のペアの列$((b-1,0),(t_1,r_1),(t_2,r_2),\cdots,(t_{d+1},r_{d+1}),(e+1,0))$を制御点の列として採用する。

その他特に指定がない限り一様乱数。

## 順位決定方法

### 暫定テスト

暫定テストは、システムテストに用いられるテストケースからランダムに$50$個選択し実行する。ただし、同じパラメータパターンから生成されるテストケースが2つ以上選ばれることはない。

評価方法はシステムテストと同様なのでそちらを参照せよ。

.testpar{
margin:auto;
border-collapse:unset;
}
.testpar td,.testpar th{
padding:5px;
}

### システムテスト

システムテストで用いるテストケースは、以下に示す一部の特徴的な要素に関して、備考欄に示す性質を満たすように選択して与えられる:

要素対応するパラメータ種類数備考

作業期間長さ$T_\text{max}$3短い($300$)・中程度($700$)・長い($1000$)

空間(地理情報)広さ地理情報生成規則内の$d_\text{max}$3狭い($5$)・中程度($6$)・広い($7$)

ワーカー数$N_{\text{worker}}$4単一($1$)・少($2$)・中程度($5$)・多い($10$)

全ジョブの数$N_{\text{job}}$3少($250 \leq N_{\text{job}} \leq 253$)・中程度($500 \leq N_{\text{job}} \leq 503$)・多い($1000 \leq N_{\text{job}} \leq 1003$)

合計108パターン各パターンに対し40個テストケース生成

これらの各パターンについて、異なるシード値で$40$個テストケースを生成し、合計$3 \times 3 \times4\times 3 \times 40 = 4320$個のテストケースを実行する。

これは上記表のパラメータのパターン生成のみであり、本処理とは別に、地理情報やジョブなどのデータはテストケースごとに生成処理が行われる。

順位付けは相対評価による得点計算を採用する。テストケースごとに、$\text{round}(10^{9} \times \frac{\text{自身の得点}}{全参加者中の最高得点})$の<font color="red">**相対評価スコア**</font>が得られ、その和が提出した解答の得点となる。

不正な出力や制限時間超過をした場合、そのテストケースのみ0点となる。

システムテストは <font color="red">**`CE`以外の結果を得た一番最後の提出**</font>に対してのみ行われるため、最終的に提出する解答を間違えないよう注意せよ。

### 相対評価システムについて

暫定テスト、システムテストともに、 `CE` 以外の結果を得た一番最後の提出のみが順位表に反映される。 相対評価スコアの計算に用いられる各テストケース毎の全参加者中の最高点の算出においても、順位表に反映されている最終提出のみが用いられる。

順位表に表示されているスコアは相対評価スコアであり、新規提出があるたびに、相対評価スコアが再計算される。 一方、提出一覧から確認出来る各提出のスコアは各テストケース毎の得点をそのまま足し合わせた絶対評価スコアであり、相対評価スコアは表示されない。 最新以外の提出の、現在の順位表における相対評価スコアを知るためには、再提出が必要である。不正な出力や制限時間超過をした場合、提出一覧から確認出来る絶対スコアは0となっているが、順位表には正解したテストケースに対する相対スコアの和が表示されている。

## 制約

- 文字コードはUTF-8(ただし今回はASCII文字のみ使用される)
- 改行コードは`LF`(`0x0A`)
- 区切り文字は半角スペース(`0x20`)
- 末尾区切り文字は許容される。

小数のものは**[小数]**と付記する。

### 入力1

- $300 \leq T_\text{max} \leq 1000$ かつ $T_\text{max}$は$100$の倍数。
- $150\leq N_V\leq 2000$
- $4N_V/3\leq N_E\leq 2 N_V$
- $1\leq u_i,v_i\leq N_V, u_i \neq v_i (1 \leq i \leq N_E)$
- $1\leq d_i \leq 128 (1 \leq i \leq N_E)$
- 与えられるグラフは自己ループ・多重辺が存在せず、連結であることが保証される。
- $1 \leq N_\text{worker} \leq 10$
- $1\leq v^\text{init}_i \leq N_V (1 \leq i \leq N_\text{worker})$
- $30\leq L^\text{max}_i\leq 100 (1 \leq i \leq N_\text{worker})$
- $1 \leq N^\text{JobType}_i \leq 3 (1 \leq i \leq N_\text{worker})$
- $1\leq \text{Type}^i_j\leq 3 (1 \leq i \leq N_\text{worker},1 \leq j \leq N^\text{JobType}_i)$
- $250 \leq N_\text{job} \leq 1003$
- $\text{ID}^\text{job}_i=i (1 \leq i \leq N_\text{job})$
- $1\leq \text{Type}_i\leq 3$ かつ、$\text{Type}_i$は$1$つ以上のワーカーの処理可能ジョブタイプに含まれる。  $(1 \leq i \leq N_\text{job})$
- $500 \leq N^\text{task}_i \leq 1500(1 \leq i \leq N_\text{job})$
- $1 \leq v^\text{job}_i \leq N_V (1 \leq i \leq N_\text{job})$
- $1 \leq N^\text{reward}_i \leq 43 (1 \leq i \leq N_\text{job})$
- $0\leq t^\text{reward}_{i,1}&lt;t^\text{reward}_{i,2}&lt;\cdots&lt;t^\text{reward}_{i,N^\text{reward}_i}\leq T_\text{max}+1(1 \leq i \leq N_\text{job})$
- $y^\text{reward}_{i,1}=y^\text{reward}_{i,N^\text{reward}_i}=0,1 \leq y^\text{reward}_{i,j} \leq 10^7 (1 \leq i \leq N_\text{job},2 \leq j \leq N^\text{reward}_i-1)$
- $0\leq N^\text{depend}_i\leq 3(1 \leq i \leq N_\text{job})$
- $1 \leq \text{id}^\text{depend}_{i,j} \leq N_\text{job},\text{id}^\text{depend}_{i,j} \neq \text{id}^\text{depend}_{i,k},\text{id}^\text{depend}_{i,j}\neq i (1 \leq i \leq N_\text{job},1\leq j \leq N^\text{depend}_i,1\leq k\leq N^\text{depend}_i,j\neq k)$
- ジョブの依存関係は、ジョブ全体で見ると各ジョブを頂点、ジョブの間の依存関係を有向辺とみなした有向非巡回グラフ（必ずしも連結でない）となり、各連結成分のサイズは$4$以下である。

### 入力2(採点)

- $0 \leq S \leq 2^{63}-1$

### 地理情報

- $L=2048$
- $d_\text{max}\in\{5,6,7\}$
- $s=1$
- $0.3 \leq C &lt; 0.4$ **[小数]**
- $M=\text{round}(0.45(4^{d_\text{max}+1}-1)/(3\times 2^{d_\text{max}-5}))$

### 報酬を表す区分線形関数

- $100 \leq L \leq T_\text{max}$
- $l = 25$
- $10^6 \leq s \leq 2\times 10^6$
- $0.3 \leq \sigma' &lt; 0.38$  **[小数]**
- $M = 10^7$
- $m = 1$

## ツールキット

この問題のツールキットは[ここ](https://img.atcoder.jp/hokudai-hitachi2022/f3c44ba9531996b.zip)からダウンロード可能です。以下のコンテンツが含まれています:

- ジャッジプログラム(A,B両用)
- テストケースジェネレータ(A,B両用)
- サンプルコード(C++,A問題用に1つ,B問題用に1つ)
- ビジュアライザ

## ビジュアライザ

ツールキット内のジャッジプログラムから生成されるログファイル(JSON形式)を利用して結果の可視化を行うことができます。

ビジュアライザはツールキットに同梱されていますが、サーバー上のものも[こちら](https://img.atcoder.jp/hokudai-hitachi2022/wVw8B4mE02x8rJNU.html)から利用できます。

詳細はツールキット内のREADMEやビジュアライザのページ下部の説明をお読みください。