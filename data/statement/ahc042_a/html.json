{"html":{"ja":"<span class=\"lang-ja\">\n\n<div class=\"part\">\n<section>\n<h3>ストーリー</h3><p>本日 2月2日、日本では<strong>節分</strong>という伝統行事が行われる。\n節分は、季節の変わり目に邪気を払い、福を招くための行事であり、人々は 「鬼は外！」 と唱えながら炒った豆をまいて邪気（鬼）を追い払い、「福は内！」 と唱えながら福を招き入れる。</p>\n<p>高橋くんは、そんな節分にちなんだ「鬼は外福は内ボードゲーム」を遊んでいる。\nこのゲームでも、鬼を追い払い、福を呼び込むことが目的である。</p>\n<p>できるだけ高得点を獲得するような手順を求めて欲しい。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>N \\times N</var> のマス目からなる盤面がある。\n一番左上のマスの座標を <var>(0,0)</var> とし、そこから下方向に <var>i</var> マス、右方向に <var>j</var> マス進んだ先のマスの座標を <var>(i,j)</var> とする。\nマス <var>(i,0),(i,1),\\cdots,(i,N-1)</var> を <strong>行 <var>i</var></strong>、マス <var>(0,j),(1,j),\\cdots,(N-1,j)</var> を <strong>列 <var>j</var></strong> と呼ぶ。\n初期状態では、盤面上に <strong>鬼</strong> <img src=\"https://img.atcoder.jp/ahc042/cnhLtdRT_oni.png\" width=\"25\"> と <strong>福</strong> <img src=\"https://img.atcoder.jp/ahc042/cnhLtdRT_fuku.png\" width=\"25\"> の駒がそれぞれ <var>2N</var> 個ずつ、全て異なるマスに存在している。</p>\n<p>あなたは 1 回の操作で行または列を 1 つ選び、選んだ行/列を、左右/上下のいずれかの方向に 1 マスだけ動かすことが出来る。</p>\n<ul>\n<li>行 <var>i</var> を左方向に動かす: マス <var>(i,0)</var> にある駒は盤面から取り除かれ、各 <var>j=1, \\dots, N-1</var> に対し、マス <var>(i,j)</var> にある駒は <var>(i,j-1)</var> に移動する。</li>\n<li>行 <var>i</var> を右方向に動かす: マス <var>(i,N-1)</var> にある駒は盤面から取り除かれ、各 <var>j=0, \\dots, N-2</var> に対し、マス <var>(i,j)</var> にある駒は <var>(i,j+1)</var> に移動する。</li>\n<li>列 <var>j</var> を上方向に動かす: マス <var>(0,j)</var> にある駒は盤面から取り除かれ、各 <var>i=1, \\dots, N-1</var> に対し、マス <var>(i,j)</var> にある駒は <var>(i-1,j)</var> に移動する。</li>\n<li>列 <var>j</var> を下方向に動かす: マス <var>(N-1,j)</var> にある駒は盤面から取り除かれ、各 <var>i=0, \\dots, N-2</var> に対し、マス <var>(i,j)</var> にある駒は <var>(i+1,j)</var> に移動する。</li>\n</ul>\n<p>操作は最大で <var>4N^2</var> 回まで行うことができる。\nあなたの目的は、できるだけ少ない操作回数で、福を一つも取り除くことなく、盤面上のすべての鬼を取り除くことである。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>得点</h3><p>出力した操作列における操作回数を <var>T</var>、最終的に盤面上に残る鬼の個数を <var>X</var>、盤面から取り除かれた福の個数を <var>Y</var> とする。\nこのとき、以下の得点が得られる。</p>\n<ul>\n<li><var>X=Y=0</var> の場合、<var>8N^2 - T</var></li>\n<li><var>X&gt;0</var> または <var>Y&gt;0</var> の場合、<var>4N^2 - N (X+Y)</var></li>\n</ul>\n<p>合計で 150 個のテストケースがあり、各テストケースの得点の合計が提出の得点となる。\n一つ以上のテストケースで不正な出力や制限時間超過をした場合、提出全体の判定が<span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"不正解\">WA</span>や<span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"実行時間制限超過\">TLE</span>となる。\nコンテスト時間中に得た最高得点で最終順位が決定され、コンテスト終了後のシステムテストは行われない。 同じ得点を複数の参加者が得た場合、提出時刻に関わらず同じ順位となる。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var>\n<var>C_0</var>\n<var>\\vdots</var>\n<var>C_{N-1}</var>\n</pre>\n<ul>\n<li>盤面の大きさ <var>N</var> は 全てのテストケースで <var>N=20</var> に固定されている。</li>\n<li>各 <var>i=0,1,\\cdots,N-1</var> に対し、<var>C_i</var> は行 <var>i</var> の初期状態を表す長さ <var>N</var> の文字列であり、その <var>j</var> 文字目は、次のいずれかで表される。<ul>\n<li><code>x</code>: 鬼が存在する</li>\n<li><code>o</code>: 福が存在する</li>\n<li><code>.</code>: 鬼も福も存在しない</li>\n</ul>\n</li>\n<li>鬼と福の個数はそれぞれ <var>2N</var> である。</li>\n<li><strong>初期状態で鬼が存在する各マスについて、次のいずれかの条件を満たすことが保証されている。これにより、盤面上のすべての鬼を取り除き、すべての福を残すような、<var>4N^2</var> 手以下の操作手順が必ず存在する。</strong><ul>\n<li>同じ列の上方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ列の下方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ行の左方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ行の右方向にあるすべてのマスに福が存在しない。</li>\n</ul>\n</li>\n</ul>\n<h4>ヒント</h4>\n<p>鬼が存在するマス <var>(i,j)</var> について、上方向に福が存在しない場合、上方向の操作を <var>i+1</var> 回、下方向の操作を <var>i+1</var> 回行うと、福を一つも取り除くことなく鬼 <var>(i,j)</var> を取り除くことが出来る。\n同様に、下・左・右の各方向に福が存在しない場合も、対応する操作を行うことで鬼を取り除くことができる。\nこの操作を行う前後で盤面上に残る駒の位置は変化しないため、すべての鬼に対してこの操作を適用することで、福を一つも取り除くことなく、すべての鬼を取り除くことが可能である。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p><var>t</var> 手目の操作を以下のようにして方向を表す文字 <var>d_t</var> と行・列の番号を表す数値 <var>p_t</var> の組 <var>(d_t, p_t)</var> で表す。</p>\n<ul>\n<li>行 <var>i</var> を左方向に動かす: (<code>L</code>, <var>i</var>)</li>\n<li>行 <var>i</var> を右方向に動かす: (<code>R</code>, <var>i</var>)</li>\n<li>列 <var>j</var> を上方向に動かす: (<code>U</code>, <var>j</var>)</li>\n<li>列 <var>j</var> を下方向に動かす: (<code>D</code>, <var>j</var>)</li>\n</ul>\n<p>このとき、以下の形式で標準出力に出力せよ。</p>\n<pre><var>d_0</var> <var>p_0</var>\n<var>\\vdots</var>\n<var>d_{T-1}</var> <var>p_{T-1}</var>\n</pre>\n<p>出力の操作回数 <var>T</var> は <var>4N^2</var> 以下でなければならない。\n上限を超えた場合、<span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"不正解\">WA</span> と判定される。</p>\n<p><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.html?lang=ja&amp;seed=0&amp;output=sample\">例を見る</a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入力生成方法</h3><p>まず、<var>N^2</var> 個のマスの中から異なる <var>2N</var> マスをランダムに選び、<var>2N</var> 個の福の駒の位置を決定する。</p>\n<p>次に、次のいずれかの条件を満たすマスを列挙し、これを <var>S</var> とする。</p>\n<ul>\n<li>同じ列の上方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ列の下方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ行の左方向にあるすべてのマスに福が存在しない。</li>\n<li>同じ行の右方向にあるすべてのマスに福が存在しない。</li>\n</ul>\n<p>もし <var>S</var> の要素数が <var>2N</var> より小さい場合、福の生成をやり直す。</p>\n<p>最後に、<var>S</var> からランダムに <var>2N</var> 個のマスを選び、鬼の駒の位置を決定する。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>ツール(入力ジェネレータ・ビジュアライザ)</h3><ul>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.html?lang=ja\">Web版</a>: ローカル版より高性能でアニメーション表示と手動プレイが可能です。</li>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.zip\">ローカル版</a>: 使用するには<a href=\"https://www.rust-lang.org/ja\">Rust言語</a>のコンパイル環境をご用意下さい。<ul>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT_windows.zip\">Windows用のコンパイル済みバイナリ</a>: Rust言語の環境構築が面倒な方は代わりにこちらをご利用下さい。</li>\n</ul>\n</li>\n</ul>\n<p>コンテスト期間中に、ビジュアライズ結果の共有や、解法・考察に関する言及は禁止されています。ご注意下さい。</p></section>\n</div>\n</div>\n</span>","en":"<span class=\"lang-en\">\n\n<div class=\"part\">\n<section>\n<h3>Story</h3><p>Today, on February 2nd, the traditional Japanese event <strong>Setsubun</strong> is being celebrated in Japan.\nSetsubun is a ritual to ward off evil spirits and invite good fortune at the turning of the seasons.\nPeople chant \"Oni wa soto!\" (\"Demons out!\") while throwing roasted soybeans to drive away evil spirits (oni) and chant \"Fuku wa uchi!\" (\"Fortune gods in!\") to welcome <strong>Fukunokami</strong>, the deities of good fortune.</p>\n<p>Takahashi is playing a board game called <strong>\"Oni wa Soto, Fuku wa Uchi\"</strong>, inspired by the Setsubun tradition.\nThe objective of this game is also to drive away demons and invite Fukunokami.</p>\n<p>Find a sequence of moves that maximizes the score.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is an <var>N\\times N</var> square board.\nLet <var>(0, 0)</var> be the coordinates of the top-left square, and <var>(i, j)</var> be the coordinates of the square located <var>i</var> squares down and <var>j</var> squares to the right from there.\nThe set of squares <var>(i,0), (i,1), \\dots, (i,N-1)</var> is referred to as <strong>row <var>i</var></strong>, and the set of squares <var>(0,j), (1,j), \\dots, (N-1,j)</var> is referred to as <strong>column <var>j</var></strong>.</p>\n<p>Initially, there are <strong>Oni (demons)</strong> <img src=\"https://img.atcoder.jp/ahc042/cnhLtdRT_oni.png\" width=\"25\"> and <strong>Fukunokami (fortune gods)</strong> <img src=\"https://img.atcoder.jp/ahc042/cnhLtdRT_fuku.png\" width=\"25\"> pieces on the board, with <var>2N</var> pieces of each type, all placed on distinct squares.</p>\n<p>You can select one row or column in a single operation and shift the chosen row/column by one square in either the left/right or up/down direction.</p>\n<ul>\n<li>Shifting row <var>i</var> to the left: The piece on square <var>(i,0)</var> is removed from the board, and for each <var>j=1, \\dots, N-1</var>, the piece on square <var>(i,j)</var> moves to <var>(i,j-1)</var>.</li>\n<li>Shifting row <var>i</var> to the right: The piece on square <var>(i,N-1)</var> is removed from the board, and for each <var>j=0, \\dots, N-2</var>, the piece on square <var>(i,j)</var> moves to <var>(i,j+1)</var>.</li>\n<li>Shifting column <var>j</var> upward: The piece on square <var>(0,j)</var> is removed from the board, and for each <var>i=1, \\dots, N-1</var>, the piece on square <var>(i,j)</var> moves to <var>(i-1,j)</var>.</li>\n<li>Shifting column <var>j</var> downward: The piece on square <var>(N-1,j)</var> is removed from the board, and for each <var>i=0, \\dots, N-2</var>, the piece on square <var>(i,j)</var> moves to <var>(i+1,j)</var>.</li>\n</ul>\n<p>You can perform up to <var>4N^2</var> operations.</p>\n<p>Your goal is to remove all the Oni from the board using as few moves as possible, without removing any Fukunokami.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Scoring</h3><p>Let <var>T</var> be the number of operations in the output sequence, <var>X</var> be the number of Oni remaining on the board, and <var>Y</var> be the number of Fukunokami removed from the board.\nThen, you will obtain the following score.</p>\n<ul>\n<li>If <var>X=0</var> and <var>Y=0</var>, the score is <var>8N^2 - T</var>.</li>\n<li>If <var>X&gt;0</var> or <var>Y&gt;0</var>, the score is <var>4N^2 - N (X+Y)</var>.</li>\n</ul>\n<p>There are <var>150</var> test cases, and the score of a submission is the total score for each test case.\nIf your submission produces an illegal output or exceeds the time limit for some test cases, the submission itself will be judged as <span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Wrong Answer\">WA</span> or <span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Time Limit Exceeded\">TLE</span> , and the score of the submission will be zero.\nThe highest score obtained during the contest will determine the final ranking, and there will be no system test after the contest.\nIf more than one participant gets the same score, they will be ranked in the same place regardless of the submission time.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>\n<pre><var>N</var>\n<var>C_0</var>\n<var>\\vdots</var>\n<var>C_{N-1}</var>\n</pre>\n<ul>\n<li>The board size <var>N</var> is fixed at <var>N=20</var> for all test cases.</li>\n<li>For each <var>i=0,1,\\dots,N-1</var>, <var>C_i</var> represents the initial state of row <var>i</var> as a string of length <var>N</var>, where the <var>j</var>-th character is one of the following:<ul>\n<li><code>x</code>: An Oni is present.</li>\n<li><code>o</code>: A Fukunokami is present.</li>\n<li><code>.</code>: Neither an Oni nor a Fukunokami is present.</li>\n</ul>\n</li>\n<li>There are exactly <var>2N</var> Oni and <var>2N</var> Fukunokami on the board.</li>\n<li><strong>For every square initially occupied by an Oni, at least one of the following conditions is guaranteed to hold. This ensures that there always exists a sequence of at most <var>4N^2</var> moves that removes all Oni while keeping all Fukunokami on the board.</strong><ul>\n<li>All squares above it in the same column do not contain a Fukunokami.</li>\n<li>All squares below it in the same column do not contain a Fukunokami.</li>\n<li>All squares to the left of it in the same row do not contain a Fukunokami.</li>\n<li>All squares to the right of it in the same row do not contain a Fukunokami.</li>\n</ul>\n</li>\n</ul>\n<h4>Hint</h4>\n<p>For a square <var>(i,j)</var> occupied by an Oni, if there is no Fukunokami in the upward direction, performing an upward shift <var>i+1</var> times followed by a downward shift <var>i+1</var> times will remove the Oni at <var>(i,j)</var> without removing any Fukunokami.\nSimilarly, if there are no Fukunokami in the downward, leftward, or rightward directions, the Oni can be removed using the corresponding sequence of moves.</p>\n<p>Since this operation does not change the positions of the remaining pieces on the board, applying it to all Oni ensures that all Oni are removed without removing any Fukunokami.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3>\n<p>Each operation at step <var>t</var> is represented as a pair <var>(d_t, p_t)</var>, where <var>d_t</var> is a character indicating the direction and <var>p_t</var> is an integer indicating the row or column index.</p>\n<ul>\n<li>Shifting row <var>i</var> to the left: (<code>L</code>, <var>i</var>)</li>\n<li>Shifting row <var>i</var> to the right: (<code>R</code>, <var>i</var>)</li>\n<li>Shifting column <var>j</var> upward: (<code>U</code>, <var>j</var>)</li>\n<li>Shifting column <var>j</var> downward: (<code>D</code>, <var>j</var>)</li>\n</ul>\n<p>Then, output to Standard Output in the following format:</p>\n<pre><var>d_0</var> <var>p_0</var>\n<var>\\vdots</var>\n<var>d_{T-1}</var> <var>p_{T-1}</var>\n</pre>\n<p>The number of operations <var>T</var> must not exceed <var>4N^2</var>.\nIf the limit is exceeded, the output will be judged as <span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Wrong Answer\">WA</span>.</p>\n<p><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.html?lang=en&amp;seed=0&amp;output=sample\">Show example</a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Input Generation</h3><p>First, <var>2N</var> distinct squares are randomly selected from the <var>N^2</var> squares on the board to determine the positions of the <var>2N</var> Fukunokami pieces.</p>\n<p>Next, all squares satisfying at least one of the following conditions are listed, forming the set <var>S</var>:</p>\n<ul>\n<li>All squares above it in the same column do not contain a Fukunokami.</li>\n<li>All squares below it in the same column do not contain a Fukunokami.</li>\n<li>All squares to the left of it in the same row do not contain a Fukunokami.</li>\n<li>All squares to the right of it in the same row do not contain a Fukunokami.</li>\n</ul>\n<p>If the number of elements in <var>S</var> is less than <var>2N</var>, the Fukunokami placement process is repeated.</p>\n<p>Finally, <var>2N</var> squares are randomly selected from <var>S</var> to determine the positions of the <var>2N</var> Oni pieces.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Tools (Input generator and visualizer)</h3><ul>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.html?lang=en\">Web version</a>: This is more powerful than the local version providing animations and manual play.</li>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT.zip\">Local version</a>: You need a compilation environment of <a href=\"https://www.rust-lang.org/\">Rust language</a>.<ul>\n<li><a href=\"https://img.atcoder.jp/ahc042/cnhLtdRT_windows.zip\">Pre-compiled binary for Windows</a>: If you are not familiar with the Rust language environment, please use this instead.</li>\n</ul>\n</li>\n</ul>\n<p>Please be aware that sharing visualization results or discussing solutions/ideas during the contest is prohibited.</p></section>\n</div>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/ahc042/tasks/ahc042_a"}