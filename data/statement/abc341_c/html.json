{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>250</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>H</var> 行 <var>W</var> 列のグリッドがあります。</p>\n<p>グリッドの各マスは<strong>陸</strong>か<strong>海</strong>のどちらかであり、\nその情報は <var>H</var> 個の長さ <var>W</var> の文字列 <var>S_1, S_2, \\ldots, S_H</var> で与えられます。\n上から <var>i</var> 行目、左から <var>j</var> 列目のマスを <var>(i, j)</var> で表すと、\n<var>S_i</var> の <var>j</var> 文字目が <code>.</code> のときマス <var>(i, j)</var> は陸であり、<code>#</code> のときマス <var>(i, j)</var> は海です。</p>\n<p>ここで、グリッドの外周のマス（すなわち、<var>i = 1</var> 、<var>i = H</var> 、<var>j = 1</var> 、<var>j = W</var> のうち少なくとも <var>1</var> 個以上を満たすマス <var>(i, j)</var> ）については、すべて海であることが制約として保証されます。</p>\n<p>高橋君が乗った宇宙船が、グリッド上のあるマスに不時着してしまいました。\nその後、高橋君は <code>L</code> 、<code>R</code> 、<code>U</code> 、<code>D</code> のみからなる長さ <var>N</var> の文字列 <var>T</var> で表される手順に沿って、グリッド上を <var>N</var> 回移動しました。\n<var>i = 1, 2, \\ldots, N</var> について、<var>T</var> の <var>i</var> 文字目は <var>i</var> 回目の移動の内容を下記の通り表します。</p>\n<ul>\n<li><code>L</code> のとき、左に <var>1</var> マス移動したことを表す。すなわち、移動前のマスを <var>(i, j)</var> とするとき、移動後のマスは <var>(i, j-1)</var> である。</li>\n<li><code>R</code> のとき、右に <var>1</var> マス移動したことを表す。すなわち、移動前のマスを <var>(i, j)</var> とするとき、移動後のマスは <var>(i, j+1)</var> である。</li>\n<li><code>U</code> のとき、上に <var>1</var> マス移動したことを表す。すなわち、移動前のマスを <var>(i, j)</var> とするとき、移動後のマスは <var>(i-1, j)</var> である。</li>\n<li><code>D</code> のとき、下に <var>1</var> マス移動したことを表す。すなわち、移動前のマスを <var>(i, j)</var> とするとき、移動後のマスは <var>(i+1, j)</var> である。</li>\n</ul>\n<p>高橋君の移動経路上のマス（不時着したマスおよび現在いるマスを含む）はいずれも海でないことがわかっています。\n高橋君が現在いるマスとしてあり得るものの個数を出力してください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>H, W, N</var> は整数</li>\n<li><var>3 \\leq H, W \\leq 500</var></li>\n<li><var>1 \\leq N \\leq 500</var></li>\n<li><var>T</var> は <code>L</code> 、<code>R</code> 、<code>U</code> 、<code>D</code> のみからなる長さ <var>N</var> の文字列</li>\n<li><var>S_i</var> は <code>.</code> と <code>#</code> のみからなる長さ <var>W</var> の文字列</li>\n<li>高橋君が現在いるマスとしてあり得るものが少なくとも <var>1</var> 個存在する。</li>\n<li>グリッドの外周のマスはすべて海である。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>H</var> <var>W</var> <var>N</var>\n<var>T</var>\n<var>S_1</var>\n<var>S_2</var>\n<var>\\vdots</var>\n<var>S_H</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>6 7 5\nLULDR\n#######\n#...#.#\n##...##\n#.#...#\n#...#.#\n#######\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>2\n</pre>\n<p>下記の <var>2</var> つの場合がありえるため、高橋君が現在いるマスとしてあり得るものは <var>(3, 4)</var> と <var>(4, 5)</var> の <var>2</var> 個です。</p>\n<ul>\n<li>マス <var>(3, 5)</var> に不時着し、<var>(3, 5) \\rightarrow (3, 4) \\rightarrow (2, 4) \\rightarrow (2, 3) \\rightarrow (3, 3) \\rightarrow (3, 4)</var> と移動した場合</li>\n<li>マス <var>(4, 6)</var> に不時着し、<var>(4, 6) \\rightarrow (4, 5) \\rightarrow (3, 5) \\rightarrow (3, 4) \\rightarrow (4, 4) \\rightarrow (4, 5)</var> と移動した場合</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>13 16 9\nULURDLURD\n################\n##..##.#..####.#\n###.#..#.....#.#\n#..##..#####.###\n#...#..#......##\n###.##.#..#....#\n##.#####....##.#\n###.###.#.#.#..#\n######.....##..#\n#...#.#.######.#\n##..###..#..#.##\n#...#.#.#...#..#\n################\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>6\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score: <var>250</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is a grid with <var>H</var> rows and <var>W</var> columns.</p>\n<p>Each cell of the grid is <strong>land</strong> or <strong>sea</strong>, which is represented by <var>H</var> strings <var>S_1, S_2, \\ldots, S_H</var> of length <var>W</var>. Let <var>(i, j)</var> denote the cell at the <var>i</var>-th row from the top and <var>j</var>-th column from the left, and <var>(i, j)</var> is land if the <var>j</var>-th character of <var>S_i</var> is <code>.</code>, and <var>(i, j)</var> is sea if the character is <code>#</code>.</p>\n<p>The constraints guarantee that all cells on the perimeter of the grid (that is, the cells <var>(i, j)</var> that satisfy at least one of <var>i = 1</var>, <var>i = H</var>, <var>j = 1</var>, <var>j = W</var>) are sea.</p>\n<p>Takahashi's spaceship has crash-landed on a cell in the grid. Afterward, he moved <var>N</var> times on the grid following the instructions represented by a string <var>T</var> of length <var>N</var> consisting of <code>L</code>, <code>R</code>, <code>U</code>, and <code>D</code>. For <var>i = 1, 2, \\ldots, N</var>, the <var>i</var>-th character of <var>T</var> describes the <var>i</var>-th move as follows:</p>\n<ul>\n<li><code>L</code> indicates a move of one cell to the left. That is, if he is at <var>(i, j)</var> before the move, he will be at <var>(i, j-1)</var> after the move.</li>\n<li><code>R</code> indicates a move of one cell to the right. That is, if he is at <var>(i, j)</var> before the move, he will be at <var>(i, j+1)</var> after the move.</li>\n<li><code>U</code> indicates a move of one cell up. That is, if he is at <var>(i, j)</var> before the move, he will be at <var>(i-1, j)</var> after the move.</li>\n<li><code>D</code> indicates a move of one cell down. That is, if he is at <var>(i, j)</var> before the move, he will be at <var>(i+1, j)</var> after the move.</li>\n</ul>\n<p>It is known that all cells along his path (including the cell where he crash-landed and the cell he is currently on) are not sea. Print the number of cells that could be his current position.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>H</var>, <var>W</var>, and <var>N</var> are integers.</li>\n<li><var>3 \\leq H, W \\leq 500</var></li>\n<li><var>1 \\leq N \\leq 500</var></li>\n<li><var>T</var> is a string of length <var>N</var> consisting of <code>L</code>, <code>R</code>, <code>U</code>, and <code>D</code>.</li>\n<li><var>S_i</var> is a string of length <var>W</var> consisting of <code>.</code> and <code>#</code>.</li>\n<li>There is at least one cell that could be Takahashi's current position.</li>\n<li>All cells on the perimeter of the grid are sea.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>H</var> <var>W</var> <var>N</var>\n<var>T</var>\n<var>S_1</var>\n<var>S_2</var>\n<var>\\vdots</var>\n<var>S_H</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>6 7 5\nLULDR\n#######\n#...#.#\n##...##\n#.#...#\n#...#.#\n#######\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>2\n</pre>\n<p>The following two cases are possible, so there are two cells that could be Takahashi's current position: <var>(3, 4)</var> and <var>(4, 5)</var>.</p>\n<ul>\n<li>He crash-landed on cell <var>(3, 5)</var> and moved <var>(3, 5) \\rightarrow (3, 4) \\rightarrow (2, 4) \\rightarrow (2, 3) \\rightarrow (3, 3) \\rightarrow (3, 4)</var>.</li>\n<li>He crash-landed on cell <var>(4, 6)</var> and moved <var>(4, 6) \\rightarrow (4, 5) \\rightarrow (3, 5) \\rightarrow (3, 4) \\rightarrow (4, 4) \\rightarrow (4, 5)</var>.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>13 16 9\nULURDLURD\n################\n##..##.#..####.#\n###.#..#.....#.#\n#..##..#####.###\n#...#..#......##\n###.##.#..#....#\n##.#####....##.#\n###.###.#.#.#..#\n######.....##..#\n#...#.#.######.#\n##..###..#..#.##\n#...#.#.#...#..#\n################\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>6\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc341/tasks/abc341_c"}