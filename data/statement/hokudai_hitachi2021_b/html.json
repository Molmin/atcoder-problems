{"html":{"ja":"<span class=\"lang-ja\">\n        <p></p><details open=\"\"><summary>目次</summary>\n        <ul>\n        <li><a href=\"#問題概要\">問題概要</a>\n        <ul>\n        <li><a href=\"#入出力形式1\">入出力形式1</a> </li>\n        <li><a href=\"#入出力形式2\">入出力形式2</a> </li>\n        <ul>\n        <li><a href=\"#mathrmgrid_info-詳細\"><var>\\mathrm{grid\\_info}</var> 詳細</a> </li>\n        <li><a href=\"#mathrmev_info-詳細\"><var>\\mathrm{EV\\_info}</var> 詳細</a> </li>\n        </ul>\n        <li><a href=\"#入出力形式3\">入出力形式3</a> </li>\n        </ul>\n        </li>\n        <li><a href=\"#問題詳細\">問題詳細</a>\n        <ul>\n        <li><a href=\"#地図情報\">地図情報</a> </li>\n        <li><a href=\"#アセット情報\">アセット情報</a> </li>\n        <li><a href=\"#電力需要\">電力需要</a> </li>\n        <li><a href=\"#電力供給\">電力供給</a> </li>\n        <li><a href=\"#電力需給詳細\">電力需給詳細</a> </li>\n        <li><a href=\"#作業\">作業</a> </li>\n        <li><a href=\"#運搬依頼\">運搬依頼</a> </li>\n        <li><a href=\"#車両\">車両</a> </li>\n        <li><a href=\"#採点方法\">採点方法</a> </li>\n        <li><a href=\"#クエリ詳細\">クエリ詳細</a> </li>\n        <li><a href=\"#入出力制約\">入出力制約</a> </li>\n        </ul>\n        </li>\n        <li> <a href=\"#サンプルコードB\">サンプルコードB</a> </li>\n        </ul>\n        </details><p></p>\n        <p><a id=\"問題概要\" class=\"anchor\"></a></p>\n        \n        <div class=\"part\">\n        <section>\n<h3>問題文</h3><p>再生可能エネルギーを活用した最新鋭の超小型グリッド(ナノグリッド)を分散配置することで、地域に低炭素の電力を安定供給するプロジェクトが立ち上がった。供給した電力は各地の電力需要地で利用される他、EVでヒトやモノの輸送を行う際にも活用される。</p>\n<p>あなたはこのプロジェクトの初期設計者だ。開発部が作成したシミュレータを駆使して、安定した電力供給に加えて円滑に輸送サービスを提供するために適切なナノグリッドの配置を考えて欲しい。設備設計後、日々運用アルゴリズムも提出して頂くことになる。仮にあなたが考案した設備配置が環境負荷の低い運転が可能で、広域停電が発生した非常時の際も円滑に電力を供給できるならば、追加の得点が得られるだろう。</p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/problemB_fig1.png\" style=\"width: 80%\">\n\n<figcaption>図1 問題Bの解答から採点までの流れ</figcaption>\n</div>\n\n<p><br></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/45a33c63762ec78374950de4919d574c.png\" style=\"width: 60%\">\n\n<figcaption>図2 デザイン決定の例(予算額6600万円の場合)。各ナノグリッドのデザイン(設備構成)に加えて、ナノグリッドの設置場所、EVの初期配置や初期蓄電量も決定する </figcaption>\n</div>\n\n<p><br></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/problemB_fig3.png\" style=\"width: 60%\">\n\n<figcaption>図3 問題AとBの違い </figcaption>\n</div>\n\n<p><a id=\"入出力形式1\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入出力形式1</h3>\n<p>はじめに、コンテスタントはジャッジから必要な情報を入手することができる。その際の入出力形式は以下の通りである。</p>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">コンテスタント</th>\n<th align=\"center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_1</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_1</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_2</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_2</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\vdots</var></td>\n<td align=\"center\"><var>\\vdots</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_M</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_M</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"end\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n</tbody>\n</table>\n\n<ul>\n<li>1 行<var>\\mathrm{query}</var>を出力するごとに、対応した情報が標準入力から与えられる。コンテスタントは<var>\\mathrm{query}</var>を出力するごとに標準出力をフラッシュする必要があり、また、<var>\\mathrm{query}</var>を出力する度に全ての入力を読み切る必要がある。これらに違反した場合は未定義動作となる。</li>\n<li>最後のクエリでは<code>end</code>を出力する必要がある。ジャッジは<code>end</code>を読み込むことで次の動作に移行する。<code>end</code>を発行しない場合、未定義動作となる。</li>\n<li>有効な<var>\\mathrm{query}</var>は以下の通りである。有効ではない<var>\\mathrm{query}</var>を出力した場合は<code>WA</code>となる。\n<ul>\n<li> <code>budget</code> </li>\n<li> <code>temporal</code> </li>\n<li> <code>score</code> </li>\n<li> <code>graph</code> </li>\n<li> <code>demand</code> </li>\n<li> <code>demand [day] [id]</code> </li>\n<li> <code>radiation [day] [id]</code> </li>\n<li> <code>asset</code> </li>\n<li> <code>asset PV [id]</code> </li>\n<li> <code>asset FE [id]</code> </li>\n<li> <code>asset RB [id]</code> </li>\n<li> <code>asset EVC [id]</code> </li>\n<li> <code>asset vehicle [id]</code> </li>\n<li> <code>order [day]</code> </li>\n<li> <code>shelter</code> </li>\n<li> <code>work</code> </li>\n<li> <code>work [day] [id]</code> </li>\n<li> <code>end</code> </li>\n</ul></li>\n<li>各<var>\\mathrm{query}</var>に対する出力の内容は<a href=\"#クエリ詳細\">クエリ詳細</a>に記載する。</li>\n</ul>\n<hr>\n\n<p><a id=\"入出力形式2\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入出力形式2</h3>\n<p>入出力形式1の後、コンテスタントは以下の形式でナノグリッド設備構成とEV配置を出力する。</p>\n<p>まず、コンテスタントは設置するナノグリッドの数<var>N_\\mathrm{grid}</var>を出力する。</p>\n<pre><var>\\begin{aligned}N_\\mathrm{grid}\\end{aligned}</var>\n</pre>\n\n<p>次に、以下の形式でナノグリッドの設備情報を出力する。</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{grid\\_info}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{grid\\_info}_{N_\\mathrm{grid}} \\\\\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>コンテスタントは後述する<var>\\mathrm{grid\\_info}</var>の形式に従って、<var>N_\\mathrm{grid}</var>個のナノグリッドを配置する。</li>\n<li>あらかじめ設定された電力需要地以外に設置されるナノグリッドの電力需要は常に<var>0</var>である。</li>\n<li>各ナノグリッドについて、PV 設置量に必要な土地面積が各頂点の取得可能面積量を上回った場合、<code>WA</code>である。</li>\n<li>同じ頂点に複数回ナノグリッドを設置しようとした場合、最後の設置が有効となる。</li>\n<li><font color=\"red\">ナノグリッドには以下ルールでIDが振られ、以降このIDで参照される。このIDは電力需要地のIDとは異なることに注意せよ。<br>\nルール：電力需要地に設置されたナノグリッドがある場合、電力需要地のID順にIDが振られる。その後、残りのナノグリッドに対して、本形式での設置順に、続きからIDが振られる。電力需要地に設置されたナノグリッドが無い場合は、本形式での設置順にIDが振られる。</font></li>\n</ul>\n<p>次に、コンテスタントは配置するEVの台数<var>N_\\mathrm{EV}</var>を出力する。</p>\n<pre><var>\\begin{aligned}N_\\mathrm{EV}\\end{aligned}</var>\n</pre>\n\n<p>次に、以下の形式で配置するEVの情報を出力する。</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{EV\\_info}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{EV\\_info}_{N_\\mathrm{EV}}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>コンテスタントは後述する<var>\\mathrm{EV\\_info}</var>の形式に従って、<var>N_\\mathrm{EV}</var>個のEVを配置する。</li>\n<li>EVには設置順にIDが振られ、以降このIDで参照される。</li>\n</ul>\n<p>最後に、コンテスタントは以下の形で実行形式を指定する。</p>\n<pre><var>\\begin{aligned}\\mathrm{command} &amp; &amp; \\mathrm{day}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>1つめの引数は実行形態を指定する文字列である。有効な文字列は以下の通り。</li>\n<li><code>test</code>: 指定したナノグリッド配置、EV配置で<var>\\mathrm{day}</var>で指定された日付のテストを実行する。この場合、引き続き入出力形式3により日々の運用を行い、その日のスコアに関する情報を標準入力に返却する。スコアの形式など詳細は<a href=\"#入出力形式3\">入出力形式3</a>を参照せよ。</li>\n<li><code>submit</code>: 指定したナノグリッド配置、EV配置を解答として提出する。<var>\\mathrm{day}</var>は無視される。この場合、引き続き入出力形式3により日々の運用を行い、最後に災害対応のテストを行う。詳細は<a href=\"#入出力形式3\">入出力形式3</a>を参照せよ。</li>\n<li>2 つめの引数はテストを実行する日付を指定する。日付は第 1 日目から第<var>N_\\mathrm{day}</var> 目まで有効であり、それ以外の日付を指定した場合は<code>WA</code>となる。</li>\n</ul>\n<p><a id=\"mathrmgrid_info-詳細\" class=\"anchor\"></a></p>\n<h4><var>\\mathrm{grid\\_info}</var> 詳細</h4>\n<h5>入出力形式</h5>\n<pre><var>\\begin{aligned}&amp; x^\\mathrm{grid}_\\mathrm{pos} &amp; &amp; \\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{PV} &amp; &amp; A^\\mathrm{grid}_\\mathrm{PV} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{FE} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{RB} &amp; &amp; A^\\mathrm{grid}_\\mathrm{RB} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC}\\end{aligned}</var>\n</pre>\n\n<h5>説明</h5>\n<ul>\n<li>1 行目は、ナノグリッドが頂点<var>x^\\mathrm{grid}_\\mathrm{pos}</var>に位置し、開始時の蓄電量が<var>\\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init}</var>であることを示す。</li>\n<li>続く4行は導入する設備の種類と量を指定する。PV、FE、RB、EVCの各設備は各々1種類のみ導入可能である。</li>\n<li>1行目は PV 設備の構成を表す。<var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{PV}</var>は種類、<var>A^\\mathrm{grid}_\\mathrm{PV}</var>は発電容量で見たPV導入量を表す。</li>\n<li>2行目は自家発電機の構成を表す。<var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{FE}</var>は種類を表す。</li>\n<li>3行目は蓄電池の構成を表す。<var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{RB}</var>は種類、<var>A^\\mathrm{grid}_\\mathrm{RB}</var>は導入量を表す。</li>\n<li>4行目はEVCの種類を表す。<var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC}</var>は種類を表す。</li>\n<li>PV導入に関しては、次の制約を満たす必要がある:\n<p><var>A^\\mathrm{PV} A^\\mathrm{grid}_\\mathrm{PV} \\leq A_{x^\\mathrm{grid}_\\mathrm{pos}}</var></p>\nここで、<var>A^\\mathrm{PV}</var>は設置しようとしているPVの発電容量あたり要求面積、<var>A^\\mathrm{grid}_\\mathrm{PV}</var>はPVの導入量、<var>A_{x^\\mathrm{grid}_\\mathrm{pos}}</var>はナノグリッドを設置しようとしている頂点のPV導入可能面積である。</li>\n</ul>\n<p><a id=\"mathrmev_info-詳細\" class=\"anchor\"></a></p>\n<h4><var>\\mathrm{EV\\_info}</var> 詳細</h4>\n<h5>入出力形式</h5>\n<pre><var>\\begin{aligned}&amp; x^\\mathrm{EV}_\\mathrm{pos} &amp; &amp; \\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init} &amp; &amp; \\mathrm{type}_\\mathrm{EV}\\end{aligned}</var>\n</pre>\n\n<h5>説明</h5>\n<ul>\n<li>EVが<var>t = 0</var>で頂点<var>x^\\mathrm{EV}_\\mathrm{pos}</var>に配置され、開始時の蓄電量が<var>\\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init}</var>であり、製品<var>\\mathrm{type}_\\mathrm{EV}</var>であることを示す。</li>\n<li>頂点<var>x^\\mathrm{EV}_\\mathrm{pos}</var>は予めナノグリッドが設置された頂点である必要がある。</li>\n</ul>\n<hr>\n\n<p><a id=\"入出力形式3\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入出力形式3</h3>\n<p>ナノグリッドとEVの配置を出力した後、コンテスタントはEV、FE発電量、運搬注文の諾否、および作業機械に係わる制御を行い、配置のテストを行う。</p>\n<p>各時刻<var>t</var>毎に、コンテスタントは最初に、その時刻におけるEVとナノグリッド、作業機械の状態<var>\\mathrm{info}_t</var>を受け取る。<var>\\mathrm{info}_t</var>の形式は以下の通りである。</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{Chg}^\\mathrm{grid}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{actual}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{excess}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{FE}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{buy}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{grid}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{actual}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{excess}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{FE}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{buy}_{N_\\mathrm{grid}} \\\\&amp; \\mathrm{Chg}^\\mathrm{EV}_1 &amp; &amp; u_1 &amp; &amp; v_1 &amp; &amp; \\mathrm{dist}_1 &amp; &amp; N^\\mathrm{order}_1 &amp; &amp; o_{i, 1} &amp; &amp; \\cdots &amp; &amp; o_{i, N^\\mathrm{order}_1} \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{EV}_{N_\\mathrm{EV}} &amp; &amp; u_{N_\\mathrm{EV}} &amp; &amp; v_{N_\\mathrm{EV}} &amp; &amp; \\mathrm{dist}_{N_\\mathrm{EV}} &amp; &amp; N^\\mathrm{order}_{N_\\mathrm{EV}} &amp; &amp; o_{i, {N_\\mathrm{EV}}} &amp; &amp; \\cdots &amp; &amp; o_{i, N^\\mathrm{order}_{N_\\mathrm{EV}}} \\\\&amp; \\mathrm{Chg}^\\mathrm{work}_1 &amp; &amp; x^\\mathrm{work}_1 &amp; &amp; W^\\mathrm{work}_1 &amp; &amp; w^\\mathrm{work}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; x^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; W^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; w^\\mathrm{work}_{N_\\mathrm{work}} \\\\&amp; N_\\mathrm{order} \\\\&amp; \\mathrm{id}_1 &amp; &amp; w_1 &amp; &amp; z_1 &amp; &amp; \\mathrm{state}_1 &amp; &amp; \\mathrm{time}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{id}_{N_\\mathrm{order}} &amp; &amp; w_{N_\\mathrm{order}} &amp; &amp; z_{N_\\mathrm{order}} &amp; &amp; \\mathrm{state}_{N_\\mathrm{order}} &amp; &amp; \\mathrm{time}_{N_\\mathrm{order}} \\\\\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>最初の<var>N_\\mathrm{grid}</var>行はナノグリッドの電力需給に関する情報である。<var>i</var>行目は、IDが<var>i</var>であるナノグリッドの蓄電量が<var>\\mathrm{Chg}^\\mathrm{grid}_i</var>であり、前時刻における電力収支が<var>\\mathrm{pw}^\\mathrm{actual}_i</var>、<font color=\"red\">過剰発電量</font>が<var>\\mathrm{pw}^\\mathrm{excess}_i</var>、燃料エンジン発電量が<var>\\mathrm{pw}^\\mathrm{FE}_i</var>、系統から購入した電力の量が<var>\\mathrm{pw}^\\mathrm{buy}_i</var>であることを表す。ただし、<var>t = 0</var>においては、<var>\\mathrm{pw}^\\mathrm{actual}_i = \\mathrm{pw}^\\mathrm{excess}_i = \\mathrm{pw}^\\mathrm{FE}_i = \\mathrm{pw}^\\mathrm{buy}_i = 0</var>である。</li>\n<li>続く<var>N_\\mathrm{EV}</var>行はEVの状態を表す。<var>N_\\mathrm{EV}</var>行のうち<var>i</var>行目はIDが<var>i</var>であるEVの状態を表し、蓄電量が<var>\\mathrm{Chg}^\\mathrm{EV}_i</var>であり、グラフ上の座標<var>(u_i, v_i, \\mathrm{dist}_1)</var>に位置し、運搬中の注文が<var>N^\\mathrm{order}_i</var>件存在してそれらが<var>o_{i, 1}, \\cdots, o_{i, N^\\mathrm{order}_i}</var>であることを表す。</li>\n<li>続く<var>N_\\mathrm{work}</var>行は作業注文の状態を表す。<font color=\"red\"><var>N_\\mathrm{work}</var></font>行のうち<var>i</var>行目はIDが<var>i</var>である作業需要の状態を表し、対応する作業機械の蓄電量が<var>\\mathrm{Chg}^\\mathrm{work}_i</var>であり、頂点<var>x^\\mathrm{work}_i</var>で発生している作業需要であり、今まで実行された作業の累計が<var>W^\\mathrm{work}_i</var>であり、現在の連続作業時間が<var>w^\\mathrm{work}_i</var>であることを表す。</li>\n<li>続く<var>1</var>行は、未処理の運搬注文の個数<var>N_\\mathrm{order}</var>を表す。未処理であるとは、注文が拒否もキャンセルもされておらず、また運搬が完了していないということである。</li>\n<li>続く<var>N_\\mathrm{order}</var>行は未処理の運搬注文の詳細に関する情報である。<var>N_\\mathrm{order}</var>行のうち<var>i</var>行目は未処理注文のうち<var>i</var>番目に発生した注文に関する情報で、IDが<var>\\mathrm{id}</var>、出発地点が<var>w_i</var>、到着地点が<var>z_i</var>、状態が<var>\\mathrm{state}_i</var>で、発生時刻が<var>\\mathrm{time}_i</var>であることを表す。状態についての詳細は<a href=\"#運搬依頼\">運搬依頼</a>を参照せよ。</li>\n</ul>\n<p><var>\\mathrm{info}_t</var>を受け取ったのち、コンテスタントは以下の形式で望むだけコマンドを発行する。</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{group} &amp; &amp; \\mathrm{id} &amp; &amp; \\mathrm{command}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{group}</var>は<code>EV</code>、<code>FE</code>、<code>Machinery</code>、<code>Order</code>のうち、いずれか一つでなければならない。<var>\\mathrm{group}</var>としてこれら以外の文字列を発行した場合は<code>WA</code>である。</li>\n<li><code>EV</code>はEVを、<code>FE</code>は各ナノグリッドに設置された燃料発電機を、<code>Machinery</code>は各作業需要地の作業機械を操作し、<code>Order</code>は注文に対する応答を行うことを表す。</li>\n<li><var>\\mathrm{id}</var>は各グループの内、実際に操作、または応答する対象を表す。<var>\\mathrm{group}</var>が<code>EV</code>である場合にはEVのID、<var>\\mathrm{group}</var>が<code>FE</code>である場合にはナノグリッドのID、<var>\\mathrm{group}</var>が<code>Machinery</code>である場合には作業需要地のID、<var>\\mathrm{group}</var>が<code>Order</code>である場合には注文のIDを指定する。各グループに対して有効ではないIDを指定した場合は<code>WA</code>である。</li>\n<li><var>\\mathrm{command}</var>は<var>\\mathrm{group}</var>と<var>\\mathrm{id}</var>で指定した対象に対する操作、または応答を表す。具体的な<var>\\mathrm{command}</var>の内容については<var>\\mathrm{group}</var>が<code>EV</code>である場合には<a href=\"#車両\">車両</a>、<var>\\mathrm{group}</var>が<code>FE</code>である場合には<a href=\"#電力供給\">電力供給</a>、<var>\\mathrm{group}</var>が<code>Machinery</code>である場合には<a href=\"#作業\">作業</a>、<var>\\mathrm{group}</var>が<code>Order</code>である場合には<a href=\"#運搬依頼\">運搬依頼</a>を参照せよ。各グループに対して有効ではない<var>\\mathrm{command}</var>を発行した場合は<code>WA</code>である。</li>\n<li>以上のコマンド発行のうち、同一の<var>\\mathrm{group}</var>と<var>\\mathrm{id}</var>に対して複数回のコマンドが発行された場合は最後に発行されたコマンドが使用されるが、複数回のコマンド発行のうち、一度でも有効ではないコマンドが発行された場合は<code>WA</code>である。\n時刻<var>t</var>におけるコマンド発行後、コンテスタントは以下の内容を出力してジャッジにコマンド発行終了を通知する。</li>\n</ul>\n<pre><var>\\begin{aligned}\\mathrm{\"end\"}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>直接文字列で<code>end</code>を発行すればよい。</li>\n<li><code>end</code>が発行されない場合の動作は未定義である。</li>\n</ul>\n<p>以上で時刻<var>t</var>における制御が終了する。コンテスタントは以上の操作を<var>T_\\mathrm{max}</var>回行うことで、1日分のテストを終了する。その後、<a href=\"#入出力形式2\">入出力形式2</a>で実行したコマンドが<code>test</code>の場合、以下の形式でスコアを返却する:\n</p><p><var>S_\\mathrm{trans}\\quad S_\\mathrm{ele}\\quad S_\\mathrm{env} \\quad S_\\mathrm{work}</var></p><p></p>\n<p>返却されたスコアは必ず読み取ること。さもなければ<code>WA</code>である。また、このテスト実行に係わるCPU時間も実行時間制限に含まれることに注意せよ。\n<a href=\"#入出力形式2\">入出力形式2</a>で実行したコマンドが<code>submit</code>の場合、制御を<var>N_\\mathrm{day}</var>日分行った後、災害対応のテストを行う。災害対応のテストは、まず1から<var>N_\\mathrm{day}</var>の中から一様ランダムに1日を選択して開始される。</p>\n<p><a id=\"問題詳細\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>問題詳細</h3><p><a id=\"地図情報\" class=\"anchor\"></a></p>\n</section>\n</div>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>地図情報</h3>\n<p>地図情報は単純無向グラフとして与えられる。車両は全てこのグラフの辺の上を移動する。各頂点は 2 次元平面上に配置され、同時に人口と太陽光発電設備の設置容量が指定されている。人口が多い頂点ほど、運搬注文の発生確率が高くなる。また、頂点のうちいくつかには電力需要、または作業需要、あるいはその両方が設定されている。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"アセット情報\" class=\"anchor\"></a>アセット情報</h3>\n<p>一つのナノグリッドは太陽光発電設備(PV)、自家発電機(FE)、蓄電池(RB)、とEV充放電装置(EVC) によって構成される。ナノグリッドを設置する際には、これらの設備に関する構成も指定する必要がある。</p>\n<p>各設備の特徴は以下の通り：</p>\n<ul>\n<li>PV: 日射量に比例する量の発電を行う。日射量は各頂点毎に与えられ、時間区間毎に変化する。一度設置してしまえば発電のための追加のコストは必要としないが、各頂点毎の設置容量を超えて設置しようとした場合は<code>WA</code>(Wrong Answer)となる。すなわち、PV設置のためには以下の制約を満たす必要がある：\n<p><var>A^\\mathrm{PV} A^\\mathrm{grid}_\\mathrm{PV} \\leq A_i</var></p>\nここで、<var>A^\\mathrm{PV}</var>は設置しようとしているPVの発電容量あたり要求面積、<var>A^\\mathrm{grid}_\\mathrm{PV}</var>はPVの導入量、<var>A_i</var>はナノグリッドを設置しようとしている頂点のPV導入可能面積である。</li>\n<li>FE: 燃料を消費することで発電を行う。<strong>FE の発電量はステップごとの出力を指定することで制御する。FEの発電量は最小出力以上、最大出力以下の値、または0を指定する必要があり、それ以外の出力は<code>WA</code>である。また、FEの発電効率は最大出力時にもっとも良くなる。</strong> 出力あたりの設置コストは安価で、天候に依存しない発電が可能だが、発電のためには追加のコストが要求される。</li>\n<li>RB: 発電された電力のうち、余剰分を蓄積し、不足時に放出する。シミュレーション時、1日を開始する際の初期蓄電量は任意に指定出来る。</li>\n<li>EVC: PV・FE・RB と負荷を相互に接続し、また、車両等の外部機器との電力入出力を行う。</li>\n</ul>\n<p>これらの設備による発電量と EV による充放電を総合し、電力の不足が生じた場合、電力は通常の電気系統からの購入によって賄われる。</p>\n<p>また、導入する車両についても、カタログが与えられる。詳細は<a href=\"#車両アセット情報\">車両アセット情報</a>を参照せよ。</p>\n<p>これらの設備・車両の導入には初期費用が必要である。初期費用の基準額は<a href=\"#入出力形式1\">入出力形式1</a>の中で取得可能である。初期費用が基準額を超えた場合、スコアにペナルティが与えられる。</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"電力需要\" class=\"anchor\"></a>電力需要</h3>\n<p>地域には電力需要を持つ地点が存在している。電力需要地の位置、および電力需要の予測値はテストケース開始時に取得可能である。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"電力供給\" class=\"anchor\"></a>電力供給</h3>\n<p>電力の供給は主にPVによって行われ、EV または作業機械との充放電と電力需要との差分が RB に集約される。FEは電力不足時に稼働し、不足分を補う。FEの最大出力以上の電力不足が生じた場合、系統からの電力購入が行われる。</p>\n<ul>\n<li><strong>PV 発電量</strong> : PV 発電量は当該時間区間での日射量と PV 設備容量の積で与えられる。PV 設備容量の与え方については<a href=\"#入出力形式2\">入出力形式2</a>を参照せよ。</li>\n<li>\n<p><strong>FE 発電量</strong> : <strong>FE の発電量はステップごとの出力を指定することで制御する。FEの発電量は最小出力以上、最大出力以下の値、または0を指定する必要があり、それ以外の出力は<code>WA</code>である。また、FEの発電効率は最大出力時にもっとも良くなる。</strong></p>\n</li>\n<li>\n<p><strong>RB 充放電量</strong> : RB は短期的な電力需給のインバランスを補償するように動作する。各時刻において、PV 発電量、EV 充放電量と<strong>作業機械充放電量</strong>の和と電力需要との差が、RB 蓄電量に積算されていく。すなわち、PV 発電量と EV からナノグリッドへの充電量の和が、電力需要とナノグリッドから EV への充電量の和を上回っていた場合、RB 蓄電量が増加する。逆の場合は減少する。\n<strong>電力供給が過大である場合、PV発電量の抑制が行われる。<font color=\"red\"><del>が、PV発電量を0としても尚発電量が過大となる場合は<code>WA</code>である。</del></font></strong></p>\n</li>\n</ul>\n<p>FE の出力を制御するためには、<a href=\"#入出力形式3\">入出力形式3</a>にて、以下の形式のコマンドを発行する必要がある。</p>\n<pre><var>\\begin{aligned}\\mathrm{\"FE\"} &amp; &amp; \\mathrm{id} &amp; &amp; d\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{id}</var> は頂点番号を用いる。有効な<var>\\mathrm{id}</var>はコンテスタントが入出力形式2でナノグリッドを設置した位置に対する頂点番号(<var>x^\\mathrm{grid}_\\mathrm{pos}</var>)のみであり、それ以外の<var>\\mathrm{id}</var>を指定した場合は<code>WA</code>となる。</li>\n<li><var>d</var> はFEのステップあたり発電量である。有効な値は該当するナノグリッドに設置されたFEの最低出力以上、最大出力以下の整数値か、0である必要がある。</li>\n<li>制御が行われなかったFEは発電を行わない。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"電力需給詳細\" class=\"anchor\"></a>電力需給詳細</h3>\n<p>各ナノグリッド、電力需要地、作業需要地における電力需給は、以下のようにまとめられる。</p>\n<ul>\n<li> 手順 1: 仮の電力収支<var>\\Delta_\\mathrm{tmp}</var>を計算する。\n<p><var>\\Delta_\\mathrm{tmp, t} = \\Delta_\\mathrm{PV, t}^\\mathrm{actual} - \\Delta_\\mathrm{demand, t}^\\mathrm{actual} + \\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t} - \\Delta^\\mathrm{EV}_{\\mathrm{charge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{discharge}, t} - \\Delta^\\mathrm{work}_{\\mathrm{charge}, t} \\textcolor{red}{+ \\Delta^\\mathrm{FE}_{t}} </var></p>\nここで、各変数は以下の通りである：\n<ul>\n<li> <var>\\Delta_\\mathrm{PV, t}^\\mathrm{actual}</var> : 時刻<var>t</var>における該当地点でのPV発電量である。ナノグリッド以外の地点ではPV発電量は常に0である。</li>\n<li> <var>\\Delta_\\mathrm{demand, t}^\\mathrm{actual}</var> : 時刻<var>t</var>における該当地点での電力需要量である。電力需要地以外の地点では電力需要量は常に0である。</li>\n<li> <var>\\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t}</var> : 時刻<var>t</var>における該当地点での総EV放電量である。</li>\n<li> <var>\\Delta^\\mathrm{EV}_{\\mathrm{charge}, t}</var> : 時刻<var>t</var>における該当地点での総EV充電量である。</li>\n<li> <var>\\Delta^\\mathrm{work}_{\\mathrm{discharge}, t}</var> : 時刻<var>t</var>における総作業機械放電量である。</li>\n<li> <var>\\Delta^\\mathrm{work}_{\\mathrm{charge}, t}</var> : 時刻<var>t</var>における総作業機械充電量である。</li>\n<li> <font color=\"red\"><var>\\Delta^\\mathrm{FE}_{t}</var> :</font><font color=\"red\">時刻<var>t</var>における該当地点でのFEの発電量である。</font></li>\n<li> 以下の制約を満たさない場合、その時点で<code>WA</code>となる。\n<p><var>\n\\left\\{\n\\begin{aligned}\n&amp; \\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{discharge}, t} \\leq P^\\mathrm{EVC}_\\mathrm{in} \\textcolor{red}{\\text{(左辺の} \\Delta^\\mathrm{FE}_{t} \\text{は削除)}}  \\\\\n&amp; \\Delta^\\mathrm{EV}_{\\mathrm{charge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{charge}, t} \\leq P^\\mathrm{EVC}_\\mathrm{out}\n\\end{aligned}\\right.\n</var></p>\n<ul>\n\n<li> ここで、<var>P^\\mathrm{EVC}_\\mathrm{in}</var>と<var>P^\\mathrm{EVC}_\\mathrm{out}</var>はそれぞれ該当地点に導入されているEVCの値を参照せよ。ナノグリッドが導入されていない地点では、これらの値は0とみなされる。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li> 手順 2-a: 発電量が過剰である場合の処理。\n<var>\\Delta_\\mathrm{tmp, t} &gt; \\min\\{P^\\mathrm{RB}_{\\mathrm{charge}}, \\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}  - \\mathrm{Chg}^\\mathrm{grid}_t\\}</var> の場合、次のようにする：\n<var>\\Delta_\\mathrm{total, t} = \\min\\{P^\\mathrm{RB}_{\\mathrm{charge}}, \\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}  - \\mathrm{Chg}^\\mathrm{grid}_t\\}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = \\Delta_\\mathrm{tmp, t} - \\Delta_\\mathrm{total, t}, \\quad \\mathrm{pw}^\\mathrm{buy}_t = 0.</var>\nここで、各変数は以下の通りである：\n<ul>\n<li> <var>P^\\mathrm{RB}_{\\mathrm{charge}}</var> : 該当地点でのバッテリー最大充電速度で、導入されているRBの値を参照する。ナノグリッド以外の地点ではバッテリー充電速度は常に0である。</li>\n<li> <var>\\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}</var> : 該当地点でのバッテリー蓄電容量で、導入されているRBの値の1台あたり容量と導入量の積である。ナノグリッド以外の地点ではバッテリー蓄電容量は常に0である。</li>\n<li> <var>\\mathrm{Chg}^\\mathrm{grid}_t</var> : 時刻<var>t</var>における該当地点でのバッテリー蓄電量である。ナノグリッド以外の地点ではバッテリー蓄電量は常に0である。</li>\n<li> <var>\\mathrm{pw}^\\mathrm{excess}_t</var> : 時刻<var>t</var>における該当地点での過剰発電量である。<font color=\"red\"> [以下削除]<del><var>\\Delta_\\mathrm{PV, t}^\\mathrm{actual} &lt; \\mathrm{pw}^\\mathrm{excess}_t</var> となる場合は<code>WA</code>となる。これは、PV出力抑制による対応が追い付かないことを表現している。</del></font></li>\n<li> <var>\\mathrm{pw}^\\mathrm{buy}_t</var> : 時刻<var>t</var>における該当地点で系統から購入する必要がある電力量である。</li>\n</ul>\n</li>\n<li> 手順 2-b 発電量が不足している場合の処理。\n<var>\\Delta_\\mathrm{tmp, t} &lt; -\\min\\{P^\\mathrm{RB}_{\\mathrm{discharge}}, \\mathrm{Chg}^\\mathrm{grid}_t\\}</var>\nの場合、次のようにする：\n<br>\n<var>\\Delta_\\mathrm{total, t} = -\\min\\{P^\\mathrm{RB}_{\\mathrm{discharge}}, \\mathrm{Chg}^\\mathrm{grid}_t\\}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = 0, \\quad \\mathrm{pw}^\\mathrm{buy}_t = \\Delta_\\mathrm{total, t} - \\Delta_\\mathrm{tmp, t}.</var>\n<br>\nここで、\n<br>\n<ul>\n<li> <var>P^\\mathrm{RB}_{\\mathrm{discharge}}</var> : 該当地点でのバッテリーの最大放電速度で、導入されているRBの値を参照する。ナノグリッド以外の地点ではバッテリー放電速度は常に0である。</li>\n</ul>\n</li>\n<li> 手順 2-c: 発電量が適度な大きさの場合の処理。\n手順2-aと手順2-bの条件を満たさなかった場合、次のようにする。\n<br>\n<var>\\Delta_\\mathrm{total, t} = \\Delta_\\mathrm{tmp, t}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = 0, \\quad \\mathrm{pw}^\\mathrm{buy}_t = 0.</var>\n</li>\n<li> 手順3 蓄電量の更新処理。\n<br>\n<var>\\Delta_\\mathrm{total, t} &lt; 0 </var>の場合\n<br>\n<var>\\mathrm{Chg}^\\mathrm{grid}_{t + 1} = \\Delta_\\mathrm{total, t} + \\mathrm{Chg}^\\mathrm{grid}_t</var>\n<br>\n<var>\\Delta_\\mathrm{total, t} \\geq 0 </var>の場合\n<br>\n<var>\\mathrm{Chg}^\\mathrm{grid}_{t + 1} = \\eta^\\mathrm{RB}\\Delta_\\mathrm{total, t} + \\mathrm{Chg}^\\mathrm{grid}_t</var>\n<br>\nここで、\n<ul>\n<li> <var>\\eta^\\mathrm{RB}</var> : 該当地点でバッテリー充電効率である。ナノグリッド以外の地点では1とみなされる。</li>\n</ul>\n</li>\n</ul>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"作業\" class=\"anchor\"></a>作業</h3>\n<p>地域には作業需要を持つ地点が存在している。作業需要地の位置、および作業需要の予測値はテストケース開始時に取得可能である。\n作業需要は1日内の延べ作業時間と作業可能時間帯の形で指定され、達成することで追加のスコアを取得することができる。作業は一度開始すると一定時間継続して行う必要があり、また、作業に先んじて消費する電力の充電を行う必要がある。\n作業機械を制御するためには、<a href=\"#入出力形式3\">入出力形式3</a>にて、以下の形式のコマンドを発行する必要がある。</p>\n<pre><var>\\begin{aligned}\\mathrm{\"Machinery\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\left\\{ \\mathrm{\"break\"} \\mid \\mathrm{\"work\"} \\mid \\mathrm{\"charge\\_from\"}\\ d \\mid \\mathrm{\"charge\\_to\"}\\ d\\right\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{group}</var>は<code>Machinery</code>を指定する必要がある。</li>\n<li>有効な<var>\\mathrm{id}</var>は、<var>1</var>以上<var>N_\\mathrm{work}</var>以下である。</li>\n<li>有効な<var>\\mathrm{command}</var>とその内容は下記の通り\n<ul>\n<li> <code>break</code>:  作業を行わない。</li>\n<li> <code>work</code>:  作業を行う。一旦作業を始めた場合、最小作業時間で指定されたステップ数以上作業を継続する必要があり、さもなくば<code>WA</code>である。</li>\n<li> <code>charge_from d</code>:  作業機械へ<var>d</var>だけ充電する。この時、<var>\\Delta^\\mathrm{work}_{\\mathrm{charge}, t}</var>には<var>d</var>だけ足しこまれるが、<var>\\mathrm{Chg}^\\mathrm{work}</var>の増分は<var>\\eta^\\mathrm{work}</var>を乗じたものになる。</li>\n<li> <code>charge_to d</code>:  作業機械から<var>d</var>だけ放電する。</li>\n</ul></li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"運搬依頼\" class=\"anchor\"></a>運搬依頼</h3>\n<p>運搬依頼に基づき、EVは運搬物を出発地点でピックアップし目的地点まで運ぶ。 依頼はオンラインで発生し、各運搬依頼は以下の内部状態を持つ。ここで、全ての変数は整数である。</p>\n<ul>\n<li>注文ID <var>\\mathrm{id}</var>: 全ての注文には発生した順番にIDが割り振られる。同じ時刻に発生した注文についてのIDの割り振り順序は規定されない。</li>\n<li>発生時刻 <var>\\mathrm{ordered}</var>: 注文が発生した時刻。</li>\n<li>注文発生地点 <var>p^\\mathrm{order}</var>: 運搬注文に対し、pickup を行うべき頂点。</li>\n<li>注文目的地点 <var>d^\\mathrm{order}</var>: pickup した注文を送り届けるべき頂点。到着後、積み下ろしは自動で行われる。</li>\n<li>状態 <var>\\mathrm{state}</var>: 運搬注文の状態。<var>0</var>は運搬注文が発生した後、まだどのEVにも積み込まれていないことを示し、<var>1</var>は積み込まれた後、まだ目的地には到着していないことを示す。</li>\n</ul>\n<p>運搬依頼は発生してから<var>T_\\mathrm{grace}</var>ステップ以内に受諾、または拒否を通知しなければならない。<var>T_\\mathrm{grace}</var>ステップ以内に通知が無い場合、注文はキャンセルされ、運搬スコアにペナルティが課せられる。受諾、または拒否を通知するためには、<a href=\"#入出力形式3\">入出力形式3</a>にて、以下の形式のコマンドを発行する必要がある。</p>\n<pre><var>\\begin{aligned}\\mathrm{\"Order\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\{ \\mathrm{\"accept\"} | \\mathrm{\"reject\"}\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{group}</var>は<code>Order</code>を指定する必要がある。</li>\n<li>有効な<var>\\mathrm{id}</var>は、コマンド発行時点で<var>\\mathrm{state}</var>が<var>0</var>である運搬依頼のIDである。運搬依頼の情報に係わる入力については<a href=\"#入出力形式3\">入出力形式3</a>を参照せよ。</li>\n<li>有効な<var>\\mathrm{command}</var>は<code>accept</code>か<code>reject</code>のどちらか一方である。<code>accept</code>は運搬依頼を受理することを表し、<code>reject</code>は運搬依頼を拒否することを表す。</li>\n<li>受諾していない運搬依頼をpickupしようとした場合、<code>WA</code>となる。</li>\n</ul>\n<p>運搬依頼の内部状態<var>\\mathrm{state}</var>が表すのは下記の通りである。</p>\n<ul>\n<li><var>\\mathrm{state} = -2</var>: 運搬依頼はキャンセルされた。</li>\n<li><var>\\mathrm{state} = -1</var>: 運搬依頼は拒否された。</li>\n<li><var>\\mathrm{state} = 0</var>: 運搬依頼が発生した。</li>\n<li><var>\\mathrm{state} = 1</var>: 運搬依頼が受理された。</li>\n<li><var>\\mathrm{state} = 2</var>: 運搬依頼はEVに積み込まれている。</li>\n<li><var>\\mathrm{state} = 3</var>: 運搬依頼は目的地に到着した。</li>\n</ul>\n<p>以上のうち、<var>\\mathrm{state} = 0, 1, 2</var>である運搬注文が未処理として扱われ、コンテスタントに毎時刻で状態が通知される。<var>\\mathrm{state} = -2, -1</var>である注文は、始めてその状態になった次の時刻に一度だけ状態が通知される。詳細は<a href=\"#入出力形式3\">入出力形式3</a>を参照せよ。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"車両\" class=\"anchor\"></a>車両</h3>\n<p>コンテスタントは複数のEVを操作し、ナノグリッド間の電力バランス調整や運搬を行う。各車両は以下の内部状態を持つ。</p>\n<ul>\n<li>蓄電量  <var>\\mathrm{Chg}^\\mathrm{EV}(t)</var></li>\n<li>位置  <var>(u^V, v^V, d^V)</var> : 車両が辺<var>(u^V, v^V)</var>上に存在し、その現在位置は頂点<var>u^V</var>から距離<var>d^V</var>であることを示す。</li>\n</ul>\n<p>EVを操作するためには、<a href=\"#入出力形式3\">入出力形式3</a>にて、以下の形式のコマンドを発行する必要がある。</p>\n<pre><var>\\begin{aligned}\\mathrm{\"EV\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\left\\{ \\mathrm{\"stay\"} \\mid \\mathrm{\"move\"} w \\mid \\mathrm{\"pickup\"}\\ a \\mid \\mathrm{\"charge\\_from\\_grid\"}\\ d \\mid \\mathrm{\"charge\\_to\\_grid\"} d \\right\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{group}</var>は<code>EV</code>を指定する必要がある。</li>\n<li>有効な<var>\\mathrm{id}</var>は、<var>1</var>以上<var>N_\\mathrm{EV}</var>以下である。</li>\n<li>有効な<var>\\mathrm{command}</var>とその内容は下記の通り\n<ul>\n<li> <code>stay</code>: 移動せずにその場にとどまる。この場合、車両の電力は消費されず、環境負荷も発生しない。</li>\n<li> <code>move w</code>: 頂点<code>w</code>に向かって距離1だけ移動する。</li>\n<li> <code>pickup a</code>: ID が<code>a</code>である注文をピックアップする。</li>\n<li> <code>charge_from_grid d</code>: 現在位置するナノグリッドから、車両へ<code>d</code>だけ充電する。</li>\n<li> <code>charge_to_grid d</code>:  車両から、現在位置するナノグリッドへ<code>d</code>だけ充電する。</li>\n</ul></li>\n<li>以上の 2 項目による充電・放電の総量はターン毎、グリッド毎に<var>\\Delta_\\mathrm{EV}</var>に集約され、評価される。詳細は<a href=\"#電力需給詳細\">電力需給詳細</a>を参照せよ。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"採点方法\" class=\"anchor\"></a>採点方法</h3>\n<p>最終的なスコア<var>S</var>は以下の式で決定される：</p>\n<p><var>S = \\sum_{i = 1}^{N_\\mathrm{day}}w_{\\mathrm{day}, i}S_i  + w_\\mathrm{acc}S_\\mathrm{acc} - \\alpha_\\mathrm{cost}\\max(0, C_\\mathrm{total} - C_\\mathrm{init})</var></p>\n<p>ここで、<var>S_i</var>は第<var>i</var>日目のスコア、<var>S_\\mathrm{acc}</var>は災害対応スコア、<var>w_{\\mathrm{day}, i}</var>は各<var>S_i</var>に対する重み付け係数、<var>w_\\mathrm{acc}</var>は災害対応スコアの重みづけ係数、<var>C_\\mathrm{total}</var>は設置した設備全体のコスト、<var>\\alpha_\\mathrm{cost}</var>はスコア換算のための係数、<var>C_\\mathrm{init}</var>は設備配置のための予算額である。<var>S_i</var>は以下の計算式で決定される。</p>\n<p><var>S_i = w_\\mathrm{trans}S_\\mathrm{trans} + w_\\mathrm{ele}S_\\mathrm{ele} + w_\\mathrm{env}S_\\mathrm{env} + w_\\mathrm{work}S_\\mathrm{work}</var></p>\n<p>ここで、<var>S_\\mathrm{trans}</var>は輸送スコア、<var>S_\\mathrm{ele}</var>は電力スコア、<var>S_\\mathrm{env}</var>は環境スコア、<var>S_\\mathrm{work}</var>は作業スコアである。詳細は以下の記述を参照せよ。<var>w_\\mathrm{trans}</var>、<var>w_\\mathrm{ele}</var>、<var>w_\\mathrm{env}</var>、<var>w_\\mathrm{work}</var>は各スコアの重みづけ係数である。それぞれのスコアは、該当する日のパラメータによるテストで求められる。</p>\n<h4>輸送スコア <var>S_\\mathrm{trans}</var></h4>\n<p>輸送スコア<var>S_\\mathrm{trans}</var>は以下の式で表される。</p>\n<p><var>S_\\mathrm{trans} = \\sum_{i \\in \\mathcal O^\\mathrm{trans}} \\max\\left(0, \\alpha^\\mathrm{trans}_\\mathrm{fee}\\mathrm{dist}_i - \\alpha^\\mathrm{trans}_\\mathrm{penalty}(T_{\\mathrm{wait}, i} - T_i)^2\\right) - \\alpha^\\mathrm{trans}_\\mathrm{undelivered}N_\\mathrm{undelivered} - \\alpha^\\mathrm{trans}_\\mathrm{canceled}N_\\mathrm{canceled}</var></p>\n<p>ただし、<var>\\mathcal O^\\mathrm{trans}</var>はテストケース終了時までに完了した運搬依頼のIDの集合、<var>T_\\mathrm{wait, i}</var>はID<var>i</var>の運搬依頼が発生してから目的地に到着するまでの時間、<var>T_i</var>はID<var>i</var>の運搬注文の発生地点から目的地点までの最短経路長から計算した最短所要時間である。<var>\\alpha^\\mathrm{trans}_\\mathrm{fee}</var>は運賃収入に対応するパラメータであり、<var>\\alpha^\\mathrm{trans}_\\mathrm{penalty}</var>は運搬依頼の遅れに対するペナルティに対応する。<var>N_\\mathrm{undelivered}</var>は受理の通知を出したが<var>T_\\mathrm{max}</var>迄に運搬が完了しなかった注文の総数である。また、<var>N_\\mathrm{canceled}</var> は受理、拒否の通知を出さずにキャンセルされた注文の総数である。</p>\n<h4>電力スコア <var>S_\\mathrm{ele}</var></h4>\n<p>電力スコアは以下の式で表される。</p>\n<p><var>S_\\mathrm{ele} = \\alpha^\\mathrm{ele}C^\\mathrm{balance} - \\alpha^\\mathrm{ele}_\\mathrm{FE}\\sum_{t = 0}^{T_\\mathrm{max}}\\sum_{i = 1}^{N_\\mathrm{grid}}L^\\mathrm{FE}_{i, t} - \\alpha^\\mathrm{ele}_\\mathrm{buy}\\sum_{t = 0}^{T_\\mathrm{max}}\\sum_{i = 1}^{N_\\mathrm{grid}}L^\\mathrm{buy}_{i, t}</var></p>\n<p><var>C^\\mathrm{balance} = \\sum_{i = 1}^{N_\\mathrm{EV}} C^{\\mathrm{EV}_i}_{t = T_\\mathrm{max}} + \\sum_{i = 1}^{N_\\mathrm{grid}} C^{\\mathrm{grid}_i}_{t = T_\\mathrm{max}} - \\sum_{i = 1}^{N_\\mathrm{grid}} C^{\\mathrm{grid}_i}_{t = 0}  - \\sum_{i = 1}^{N_\\mathrm{EV}} C^{\\mathrm{EV}_i}_{t = 0} - \\sum_{i = 1}^{N_\\mathrm{EV}}\\Delta^\\mathrm{EV}_{\\mathrm{move}, i}\\mathrm{ret}_i</var></p>\n<p>ただし、第1項の<var>C^\\mathrm{balance}</var>は全体の電力収支に対応し、<var>t = T_\\mathrm{max}</var>時点における全EV及び全ナノグリッドの蓄電残量の総和から、初期蓄電量の総和とEVが初期値点へ帰投するために必要な電力量の総和を引いたものである。<var>L^\\mathrm{FE}_{i, t}</var>と<var>L^\\mathrm{buy}_{i, t}</var>はそれぞれ、<font color=\"red\">ナノグリッド<var>i</var>において時刻<var>t</var>でFEの発電に要した燃料の量と、系統から購入した電力である。</font><var>\\alpha^\\mathrm{ele}</var>、<var>\\alpha^\\mathrm{ele}_\\mathrm{FE}</var>および<var>\\alpha^\\mathrm{ele}_\\mathrm{buy}</var>は電力スコア換算のための係数である。</p>\n<p>電力需要地にナノグリッドを設置しなかった場合、ナノグリッドが設置されなかった電力需要地で消費された電力は全て系統から購入したものとして扱われる。</p>\n<h4>環境スコア <var>S_\\mathrm{env}</var></h4>\n<p>環境スコアは以下の式で表される。</p>\n<p><var>S_\\mathrm{env} =  - \\alpha^\\mathrm{env}_\\mathrm{fuel} \\sum_{t = 0}^{T_\\mathrm{max}} \\sum_{i = 1}^{N_\\mathrm{grid}} L^\\mathrm{FE}_{i, t} - \\alpha^\\mathrm{env}_\\mathrm{buy} \\sum_{t = 0}^{T_\\mathrm{max}} \\sum_{i = 1}^{N_\\mathrm{grid}} L^\\mathrm{buy}_{i, t}</var></p>\n<p>ただし、<var>\\alpha^\\mathrm{env}_\\mathrm{fuel}</var>および<var>\\alpha^\\mathrm{env}_\\mathrm{grid}</var>は環境負荷換算のための係数である。</p>\n<h4>災害対応スコア <var>S_\\mathrm{acc}</var></h4>\n<p>災害対応スコアは以下の式で表される。</p>\n<p><var>S_\\mathrm{acc} = \\alpha^\\mathrm{acc}\\mathrm{Day}</var></p>\n<p>ただし、<var>\\mathrm{Day}</var>は災害時における連続無停電日数であり、最大で<var>N_\\mathrm{acc}</var>となる。<var>\\alpha^\\mathrm{acc}</var>はスコア換算のための係数である。詳細は以下の折り畳みを参照せよ。</p>\n<details>\n\n災害対応スコアは以下のようにして計算される。\n\n\n1. テストケース内の1日が一様ランダムで選択され、コンテスタントの指定した初期蓄電量からテストが開始される。\n2. <var>\\{1, \\cdots , T^\\mathrm{max}\\}</var>から一様ランダムに1点が選択され、その時刻が災害発生時刻<var>t_\\mathrm{acc}</var>となり、1.で実行したテスト中での時刻<var>t_\\mathrm{acc}</var>における蓄電量が記録される。\n3. 新たにテストが開始される。初期蓄電量は2.で記録した蓄電量となり、以降、系統からの電力供給を受けずに無停電動作を行う限り、また先述の最大連続無停電日数の範囲でテストが続行される。この間、2日目以降の初期蓄電量は前日の最終蓄電量が使用される。また、避難所の位置に電力需要地が出現する。詳細は[入出力形式1](#入出力形式1)の避難所情報(<code>shelter</code>)を参照せよ。加えて、これらのテストの間、運搬注文は発生しない。\n4. 上記の災害対応テストは最大<var>N_\\mathrm{acc}</var>日間で終了する。\n\n</details>\n\n<h4>作業スコア</h4>\n<p>作業スコアは以下の式で表される。</p>\n<p><var>S_\\mathrm{work} = \\alpha^\\mathrm{work}\\mathrm{Work}</var></p>\n<p>ただし、<var>\\mathrm{Work}</var>は作業需要を達成した作業需要地の数である。<var>\\alpha^\\mathrm{work}</var>はスコア換算のための係数である。</p>\n<h4><font color=\"red\">最終順位決定方法</font></h4>\n<p><font color=\"red\">システムテストでは、コンテスト期間中とは異なる400個のテストケースを用いて、その合計点で最終順位を決定する。各コンテスタントでシステムテストの対象となるコードは\"ACを獲得した最後の提出\"となる。また、TLEもしくはWAとなったテストケースが存在した場合、そのケースの得点は0点になる。テストケースの詳細な内訳は下記表を参照せよ。<br>\n※generatorの配布予定は無し。</font></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/1b22d564a45044632b4720164a2186b5.png\" style=\"width: 80%\">\n\n</div>\n\n<p><font color=\"red\">(1)ツールキット公開済4種＋未公開2種</font><br>\n<font color=\"red\">(2)実データから日射量多め×1,少なめ×1,乱択×2の合計4種</font><br>\n<font color=\"red\">(3)運搬数の合計の期待値は地図データと一対一対応とする</font><br>\n<font color=\"red\">(4)但し、期間中順位用のテストケースと比較して、計算時間・メモリ消費量が極端に大きくなるケースは除外する</font><br>\n<font color=\"red\">(5)地図6種 × 日射量4種 × 予算額3種 × 他パラメタパターン4種 = 288ケース</font><br>\n<font color=\"red\">(6)将来的な技術動向や政策動向を考慮し、特定のアセットや条件などが有利になるケースを含むように選択<br><strong>(例: 系統から電力を購入することによるペナルティ(<var>\\alpha^\\mathrm{ele}_\\mathrm{buy}</var>や<var>\\alpha^\\mathrm{env}_\\mathrm{buy}</var>)が大きいケース、<var>w_\\mathrm{acc}, w_\\mathrm{trans}, w_\\mathrm{ele}, w_\\mathrm{env}, w_\\mathrm{work}</var>のいずれか1つが小さくなるケース)</strong></font><br></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"クエリ詳細\" class=\"anchor\"></a>クエリ詳細</h3>\n<h4>予算情報 (<code>budget</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">コンテスタント</th>\n<th align=\"center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"budget\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>C_\\mathrm{init}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><var>C_\\mathrm{init}</var>はテストケース毎に指定される予算総額である。</li>\n</ul>\n<h4>時間情報 (<code>temporal</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">コンテスタント</th>\n<th align=\"center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"temporal\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>T_\\mathrm{max} \\quad T_\\mathrm{last} \\quad N_\\mathrm{div} \\quad N_\\mathrm{day} \\quad N_\\mathrm{acc} \\quad T_\\mathrm{grace} </var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><var>T_\\mathrm{max}</var>は 1 日あたりのステップ数、<var>T_\\mathrm{last}</var>は 1 日の中で各種注文が発生しうる最終ステップである。</li>\n<li><var>T_\\mathrm{max}</var>は均等に<var>N_\\mathrm{div}</var>個の区間に分割される。気象予測、電力需要パターン、注文予測は、この時間区間のそれぞれで一定の値を取る。</li>\n<li><var>N_\\mathrm{day}</var>はテストケースが何日分のデータで構成されるかを示している。</li>\n<li><var>N_\\mathrm{acc}</var>は災害対応スコア計算時のテストケースが何日分のデータで構成されるかを示している。</li>\n<li><var>T_\\mathrm{grace}</var>は運搬注文がキャンセルされるまでの猶予時間である。</li>\n</ul>\n<h4>スコア情報 (<code>score</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"score\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; \\alpha_\\mathrm{cost} \\\\&amp; w_{\\mathrm{day}, 1} &amp; &amp; \\cdots &amp; &amp; w_{\\mathrm{day}, N_\\mathrm{day}} \\\\&amp; w_\\mathrm{trans} &amp; &amp; w_\\mathrm{ele} &amp; &amp; w_\\mathrm{env} &amp; &amp; w_\\mathrm{acc} &amp; &amp; w_\\mathrm{work} \\\\&amp; \\alpha^\\mathrm{trans}_\\mathrm{fee} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{penalty} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{undelivered} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{canceled} \\\\&amp; \\alpha^\\mathrm{ele} &amp; &amp; \\alpha^\\mathrm{ele}_\\mathrm{FE} &amp; &amp; \\alpha^\\mathrm{ele}_\\mathrm{buy} \\\\&amp; \\alpha^\\mathrm{env}_\\mathrm{fuel} &amp; &amp; \\alpha^\\mathrm{env}_\\mathrm{buy} &amp; &amp; \\textcolor{red}{\\text{(先頭の}\\alpha^\\mathrm{env}\\text{は削除)}} \\\\&amp; \\alpha^\\mathrm{acc} \\\\&amp; \\alpha^\\mathrm{work} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>8行の間にスコア計算に用いられる係数が列挙される。これらの係数がどのように用いられるのか、詳細な計算式については<a href=\"#採点方法\">採点方法</a>を参照せよ。</li>\n</ul>\n<h4>グラフ情報 (<code>graph</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"graph\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; V &amp; &amp; E \\\\ &amp; x_1 &amp; &amp; y_1 &amp; &amp; p_1 &amp; &amp; A_1 &amp; &amp; l_1 \\\\ &amp; \\vdots \\\\ &amp; x_V &amp; &amp; y_V &amp; &amp; p_V &amp; &amp; A_V &amp; &amp; l_V \\\\ &amp; u_1 &amp; &amp; v_1 &amp; &amp; d_1 \\\\ &amp; \\vdots \\\\ &amp; u_E &amp; &amp; v_E &amp; &amp; d_E \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>1 行目の<var>V</var>は頂点数、<var>E</var>は辺の数。</li>\n<li>続く<var>V</var>行でグラフの頂点が与えられる。<var>V</var>行のうち、<var>i</var>行目は頂点<var>i</var>が座標<var>(x_i, y_i)</var>に存在して、人口<var>p_i</var>が存在し、取得可能な土地面積が<var>A_i</var>であり、取得面積当たり費用が<var>l_i</var>であることを示す。また、<var>i</var>番目の頂点は頂点番号<var>i</var>で参照される。</li>\n<li>続く<var>E</var>行で、グラフの辺が与えられる。<var>E</var>行のうち、<var>i</var>行目は頂点<var>u_i</var>と頂点<var>v_i</var>の間に距離<var>d_i</var>の辺が存在することを示す。</li>\n</ul>\n<h4>電力需要情報 (<code>demand</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"demand\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>N_\\mathrm{demand}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><var>N_\\mathrm{demand}</var>は電力需要地の数である。</li>\n</ul>\n<h4>電力需要情報詳細 <code>demand [day] [id]</code></h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"demand\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; x &amp; &amp; \\sigma_D^2 \\\\&amp; D^{\\rm predict}_1 &amp; &amp; \\cdots &amp; &amp; D^{\\rm predict}_{N_{\\rm div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><code>d</code>日目における<code>i</code>で指定した電力需要地の電力需要予測を返す。</li>\n<li>1 行目の<var>x</var>は電力需要地が存在する頂点の頂点番号であり、続く<var>\\sigma_D^2</var>は電力需要予測に対し、ステップごとに生じる誤差の分散である。即ち、電力需要予測に対してステップごとに生じる誤差は平均<var>0</var>、分散<var>\\sigma_D^2</var>の正規分布に従う。</li>\n<li>続く<var>1</var>行に時間区間毎の予測電力需要の値が与えられる。 <var>N_{\\rm div}</var>個の数値のうち、<var>i</var>番目の数値<var>D^\\mathrm{predict}_i</var>は、時間区間<var>i</var>での予測電力需要の値を表す。</li>\n</ul>\n<h4>日射量予測 (<code>radiation [day] [id]</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"radiation\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; R^{\\rm predict}_1 &amp; &amp; \\cdots &amp; &amp; R^{\\rm predict}_{N_{\\rm div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><code>d</code>日目における頂点<code>i</code>の日照量の予測値を返す。</li>\n<li><var>i</var>番目の数値<var>R^\\mathrm{predict}_i</var>は、時間区間<var>i</var>での予測日照量の値を表す。予測日射量の精度に関して、1日の積算量については概ね正確であるが、各ステップにおける精度は保証されない。</li>\n</ul>\n<h4>アセット情報 <code>asset</code></h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{PV} \\\\&amp; N_\\mathrm{FE} \\\\&amp; N_\\mathrm{RB} \\\\&amp; N_\\mathrm{EVC} \\\\&amp; N_V \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>1 行目の<var>N_\\mathrm{PV}</var>は PV 設備の製品数である。</li>\n<li>続く 1 行の<var>N_\\mathrm{FE}</var>は自家発電装置の製品数である。</li>\n<li>続く 1 行の<var>N_\\mathrm{RB}</var>は蓄電池の製品数である。</li>\n<li>続く 1 行の<var>N_\\mathrm{EVC}</var>は EVC の製品数である。</li>\n<li>続く 1 行の<var>N_V</var>は車両の製品数である。</li>\n</ul>\n<h4>PVアセット情報 <code>asset PV [pv_id]</code></h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ PV\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; A^\\mathrm{PV} &amp; &amp; C^\\mathrm{PV}_{\\mathrm{init}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>製品<code>i</code>の PV 設備に関する情報である。<var>A^\\mathrm{PV}</var>は発電容量あたりの要求面積、<var>C^\\mathrm{PV}_\\mathrm{init}</var>は発電容量あたりのコストである。</li>\n<li>PVに対して有効な<code>i</code>は1以上<var>N_\\mathrm{PV}</var>以下である。</li>\n</ul>\n<h4>FEアセット情報 (<code>asset FE [fe_id]</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ FE\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned} &amp; P^\\mathrm{FE}_\\mathrm{min} &amp; &amp; P^\\mathrm{FE}_\\mathrm{max} &amp; &amp; \\eta^\\mathrm{FE}_\\mathrm{min} &amp; &amp; \\eta^\\mathrm{FE}_\\mathrm{max} &amp; &amp; C^\\mathrm{FE}_\\mathrm{init} &amp; &amp; C^\\mathrm{FE}_\\mathrm{fuel} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>製品<code>i</code>の自家発電装置に関する情報である。<var>P^\\mathrm{FE}_\\mathrm{min}</var>は運転のための最低出力、<var>P^\\mathrm{FE}_\\mathrm{max}</var>は最大出力、<var>\\eta^\\mathrm{FE}_\\mathrm{min}</var>は最低出力時の燃料消費率、<var>\\eta^\\mathrm{FE}_\\mathrm{max}</var>は最大出力時の燃料消費率、<var>C^\\mathrm{FE}_\\mathrm{init}</var>は一機あたりの初期コスト<font color=\"red\"><del>、<var>C^\\mathrm{FE}_\\mathrm{fuel}</var>は単位発電量あたりの燃料費</del></font>である。なお、各時刻における燃料消費率<var>\\eta^\\mathrm{FE}_t</var>は、時刻<var>t</var>の出力値に応じて、<var>\\eta^\\mathrm{FE}_\\mathrm{max}</var>と<var>\\eta^\\mathrm{FE}_\\mathrm{min}</var>の間の線形補間で求める。<font color=\"red\">(燃料消費量はFEの発電量<var>\\Delta^\\mathrm{FE}_{t}</var>を用いて、<var>\\Delta^\\mathrm{FE}_{t} \\times ((\\Delta^\\mathrm{FE}_{t} - P^\\mathrm{FE}_\\mathrm{min}) \\times (\\eta^\\mathrm{FE}_\\mathrm{max} - \\eta^\\mathrm{FE}_\\mathrm{min}) / (P^\\mathrm{FE}_\\mathrm{max} - P^\\mathrm{FE}_\\mathrm{min}) + \\eta^\\mathrm{FE}_\\mathrm{min} ) / 1000 </var> と計算される。<var>1/1000</var> は単位換算のための係数である。)</font></li>\n<li>FEに対して有効な<code>i</code>は1以上<var>N_\\mathrm{FE}</var>以下である。</li>\n<li><var>P^\\mathrm{FE}_\\mathrm{min} = P^\\mathrm{FE}_\\mathrm{max} = \\eta^\\mathrm{FE}_\\mathrm{min} = \\eta^\\mathrm{FE}_\\mathrm{max} = C^\\mathrm{FE}_\\mathrm{init} = C^\\mathrm{FE}_\\mathrm{fuel} = 0</var>の製品が必ず含まれている。FEを配置することを望まない場合はこの製品を選択すること。</li>\n</ul>\n<h4>RBアセット情報 (<code>asset RB [rb_id]</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ RB\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned} &amp; P^\\mathrm{RB}_\\mathrm{charge} &amp; &amp; P^\\mathrm{RB}_\\mathrm{discharge} &amp; &amp; \\eta^\\mathrm{RB} &amp; &amp; \\mathrm{Cap}^\\mathrm{RB} &amp; &amp; C^\\mathrm{RB}_\\mathrm{init} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>製品<code>i</code>の蓄電池に関する情報である。<var>P^\\mathrm{RB}_\\mathrm{charge}</var>は最大充電速度、<var>P^\\mathrm{RB}_\\mathrm{discharge}</var>は最大放電速度、<var>\\eta^\\mathrm{RB}</var>は充電効率、<var>\\mathrm{Cap}^\\mathrm{RB}</var> は蓄電池容量、<var>C^\\mathrm{RB}_\\mathrm{init}</var>は一機あたりの初期コストである。</li>\n<li>RBに対して有効な<code>i</code>は1以上<var>N_\\mathrm{RB}</var>以下である。</li>\n</ul>\n<p><a id=\"EVCアセット\" class=\"anchor\"></a></p>\n<h4>EVCアセット情報 <code>asset EVC [EVC_id]</code></h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ EVC\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; P^\\mathrm{EVC}_\\mathrm{in} &amp; &amp; P^\\mathrm{EVC}_\\mathrm{out} &amp; &amp; C^\\mathrm{EVC}_\\mathrm{init} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>製品<code>i</code>のEVCに関する情報である。<var>P^\\mathrm{EVC}_{\\mathrm{in}}</var>は最大入力電力、<var>P^\\mathrm{EVC}_{\\mathrm{out}}</var>は最大出力電力、<var>C^\\mathrm{EVC}_{\\mathrm{init}}</var>は初期コストである。</li>\n<li>EVCに対して有効な<code>i</code>は1以上<var>N_\\mathrm{EVC}</var>以下である。</li>\n<li><var>P^\\mathrm{EVC}_\\mathrm{in} = P^\\mathrm{EVC}_\\mathrm{out} = C^\\mathrm{EVC}_\\mathrm{init} = 0</var>の製品が必ず含まれている。EVCを配置することを望まない場合はこの製品を選択すること。</li>\n</ul>\n<p><a id=\"車両アセット\" class=\"anchor\"></a></p>\n<h4>車両アセット情報 (<code>asset vehicle [v_id]</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ vehicle\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; \\mathrm{Cap}^V_\\mathrm{ele} &amp; &amp; \\mathrm{Cap}^V_\\mathrm{pop} \\\\&amp; P^V_{\\mathrm{charge}} &amp; &amp; P^V_{\\mathrm{discharge}} &amp; &amp; C^V_{\\mathrm{init}} &amp; &amp; \\Delta^V_{\\mathrm{move}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>製品<code>i</code>の車両に関する情報である。</li>\n<li>1 行目のうち、<var>\\mathrm{Cap}^V_{\\mathrm{ele}, i}</var>は蓄電池容量、<var>\\mathrm{Cap}^V_{\\mathrm{pop}, i}</var>は車両の定員である。</li>\n<li>2 行目のうち、<var>P^V_\\mathrm{charge}</var>は最大充電速度、<var>P^V_{\\mathrm{discharge}, 1}</var>は最大放電速度、<var>C^V_{\\mathrm{init}, i}</var>は 1 台あたりの費用、<var>\\Delta^V_{\\mathrm{move}, i}</var>は移動時の消費電力である。</li>\n<li>車両アセット情報に対して有効な<code>i</code>は1以上<var>N_\\mathrm{V}</var>以下である。</li>\n</ul>\n<h4>運搬依頼情報 (<code>order [day]</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"order\"}\\quad d</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; o_1 &amp; &amp; \\cdots &amp; &amp; o_{N_\\mathrm{div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><code>d</code>日目の運搬依頼の発生頻度に関する情報である。</li>\n<li><var>i</var>個めの引数<var>o_i</var>は時間区間<var>i</var>の間に発生する運搬依頼の期待値である。運搬依頼の発生数に関する詳細は<a href=\"#運搬依頼\">運搬依頼</a>を参照せよ。(メモ：運搬依頼情報は母数<var>o_i</var>のPoisson分布に従う。)</li>\n</ul>\n<h4>避難所情報 (<code>shelter</code>)</h4>\n<h5>入出力形式</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"shelter\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{shelter} \\\\&amp; x^\\mathrm{shelter}_1 &amp; &amp; p^\\mathrm{shelter}_1 \\\\&amp; \\vdots \\\\&amp; x^\\mathrm{shelter}_{N_\\mathrm{shelter}} &amp; &amp; p^\\mathrm{shelter}_{N_\\mathrm{shelter}} \\\\&amp; D^\\mathrm{shelter}_1 &amp; &amp; \\cdots &amp; &amp; D^\\mathrm{shelter}_{N_\\mathrm{div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li>避難所に関する情報である。</li>\n<li>1行目の<var>N_\\mathrm{shelter}</var>は避難所の数を示す。</li>\n<li>続く<var>N_\\mathrm{shelter}</var>行は避難所の設置位置と想定収容人数である。<var>i</var>行目は<var>i</var>番目の避難所が頂点<var>x_i</var>に位置し、想定収容人数が<var>p_i</var>であることを示す。</li>\n<li>続く1行は、災害発生時に避難所で発生する基準電力需要である。<var>i</var>番目の数字<var>D^\\mathrm{shelter}_i</var>は、時間区間<var>i</var>における基準電力需要が<var>D^\\mathrm{shelter}_i</var>であることを示す。時間区間<var>i</var>における避難所<var>j</var>の電力需要<var>D^\\mathrm{shelter}_{i, j}</var>は以下の式で表される(端数切り捨て) :</li>\n</ul>\n<pre><var>\\begin{aligned}D^\\mathrm{shelter}_{i, j} = p^\\mathrm{shelter}_j * D^\\mathrm{shelter}_i / 100\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>電力需要地と避難所が同じ頂点に位置する場合、災害対応スコア計算時には、電力需要地としての電力需要と避難所としての電力需要を合算したものが該当地点の電力需要となる。</li>\n</ul>\n<h4>作業需要情報 (<code>work</code>)</h4>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"work\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{work} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><var>N_\\mathrm{work}</var>は作業需要地の数である。</li>\n</ul>\n<h4>作業需要情報詳細 (<code>work [day] [id]</code>)</h4>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">コンテスタント</th>\n<th style=\"text-align:center\">ジャッジ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"work\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; x &amp; &amp; \\Delta^\\mathrm{work} &amp; &amp; I^\\mathrm{work}_\\mathrm{min} &amp; &amp; D^\\mathrm{work} \\\\&amp; \\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele} &amp; &amp; P^\\mathrm{work}_\\mathrm{charge} &amp; &amp; P^\\mathrm{work}_\\mathrm{discharge} &amp; &amp; \\eta^\\mathrm{work} \\\\&amp; A^{\\rm work}_1 &amp; &amp; \\cdots &amp; &amp; A^{\\rm work}_{N_{\\rm div}} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>説明</h5>\n<ul>\n<li><code>d</code>日目における<code>i</code>で指定した作業需要地の作業需要を返す。</li>\n<li>1 行目の<var>x</var>は作業需要地が存在する頂点の頂点番号であり、続く<var>\\Delta^\\mathrm{work}</var>は1ステップの作業に必要な電力量、<var>I^\\mathrm{work}_\\mathrm{min}</var>は最小連続作業ステップ数、<var>D^\\mathrm{work}</var>はステップ数で表された作業需要量である。</li>\n<li>続く1行に作業機械の充放電に係わる情報が与えられる。<var>\\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele}</var>は最大蓄電量、<font color=\"red\"><var>P^\\mathrm{work}_\\mathrm{charge}</var></font>は最大充電速度、<font color=\"red\"><var>P^\\mathrm{work}_\\mathrm{discharge}</var></font>は最大放電速度、<var>\\eta^\\mathrm{work}</var>は充放電効率である。</li>\n<li>続く1行に時間区間毎の作業可能性が与えられる。<var>N_{\\rm div}</var>個の数値のうち、<var>i</var>番目の数値<var>A^\\mathrm{work}_i</var>は、時間区間<var>i</var>での作業可能性を示す。<var>A^\\mathrm{work}_i = 0</var>は時間区間<var>i</var>における作業が不可能であり、<var>A^\\mathrm{work}_i = 1</var>は時間区間<var>i</var>における作業が可能であることを示す。</li>\n<li>一つの頂点に複数の作業需要が設定されている可能性があることに注意せよ。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"入出力制約\" class=\"anchor\"></a>入出力制約</h3>\n<p>入力で与えられる数値のうち<strong>小数</strong>と記載されているものは小数で与えられ、その他のものは整数で与えられる。</p>\n<h4>入出力形式1</h4>\n<ul>\n<li><var>40 \\leq w_{\\mathrm{day}, i} \\leq 1000</var></li>\n<li><var>1000 \\leq \\alpha_\\mathrm{cost} \\leq 2000</var></li>\n<li><var>10000 \\leq C_\\mathrm{init} \\leq 800000</var></li>\n<li><var>0 \\leq w_\\mathrm{trans} \\leq 1</var> [小数]</li>\n<li><var>0 \\leq w_\\mathrm{ele} \\leq 1</var> [小数]</li>\n<li><var>0 \\leq w_\\mathrm{env} \\leq 1</var> [小数]</li>\n<li><var>0 \\leq w_\\mathrm{acc} \\leq 1</var> [小数]</li>\n<li><font color=\"red\"><var>0 \\leq w_\\mathrm{work} \\leq 1</var> </font>[小数]</li>\n<li><var>15 \\leq \\alpha^\\mathrm{trans}_\\mathrm{fee} \\leq 20</var> [小数]</li>\n<li><var>0.005 \\leq \\alpha^\\mathrm{trans}_\\mathrm{penalty} \\leq 0.2</var> [小数]</li>\n<li><var>50 \\leq \\alpha^\\mathrm{trans}_\\mathrm{undelivered} \\leq 150</var>[小数]</li>\n<li><font color=\"red\"> <var>500 \\leq \\alpha^\\mathrm{trans}_\\mathrm{canceled} \\leq 1500</var> </font> [小数]</li>\n<li><var>0.003 \\leq \\alpha^\\mathrm{ele} \\leq 0.015</var> [小数]</li>\n<li><font color=\"red\"> <var>0.05 \\leq  \\alpha^\\mathrm{ele}_\\mathrm{FE} \\leq 0.07</var></font> [小数]</li>\n<li><var>0.004 \\leq \\alpha^\\mathrm{ele}_\\mathrm{buy} \\leq 0.02</var> [小数]</li>\n<li><font color=\"red\"> <var>10000 \\leq \\alpha^\\mathrm{work} \\leq 300000</var></font></li>\n<li><var>20 \\leq \\Delta^\\mathrm{EV}_{\\mathrm{move}, i} \\leq 300</var></li>\n<li><font color=\"red\"><var>0.008 \\leq \\alpha^\\mathrm{env}_\\mathrm{fuel} \\leq 0.012</var></font> [小数]</li>\n<li><var>0.0005 \\leq \\alpha^\\mathrm{env}_\\mathrm{buy} \\leq 0.0025 </var> [小数]</li>\n<li><var>1000000 \\leq \\alpha^\\mathrm{acc} \\leq 8000000</var></li>\n<li><var>3000 \\leq T_\\mathrm{max} \\leq 10000</var></li>\n<li><var>2700 \\leq T_\\mathrm{last} \\leq 9000</var></li>\n<li><var>15 \\leq N_\\mathrm{div} \\leq 30</var></li>\n<li><var>2 \\leq N_\\mathrm{day} \\leq 16</var></li>\n<li><var>1 \\leq N_\\mathrm{acc} \\leq 8</var></li>\n<li><var>150 \\leq T_\\mathrm{grace} \\leq 700</var></li>\n<li><var>5000 \\leq V \\leq 20000</var></li>\n<li><var>5000 \\leq E \\leq 40000</var></li>\n<li><var>-60000 \\leq x_i \\leq 60000 (1 \\leq i \\leq V)</var></li>\n<li><var>-60000 \\leq y_i \\leq 60000 (1 \\leq i \\leq V)</var></li>\n<li><var>0 \\leq p_i \\leq 2000 (1 \\leq i \\leq V)</var></li>\n<li><var>1 \\leq A_i \\leq 5000 (1 \\leq i \\leq V)</var></li>\n<li><var>5 \\leq l_i \\leq 300 (1 \\leq i \\leq V)</var></li>\n<li><var>1 \\leq u_i \\leq V (1 \\leq i \\leq E)</var></li>\n<li><var>1 \\leq v_i \\leq V (1 \\leq i \\leq E)</var></li>\n<li><var>1 \\leq d_i \\leq 300 (1 \\leq i \\leq E)</var></li>\n<li><var>0 \\leq N_\\mathrm{demand} \\leq 12</var></li>\n<li><var>10 \\leq \\sigma_D^2 \\leq 30</var></li>\n<li><var>0 \\leq D^{\\rm predict}_i  \\leq 200 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>0 \\leq R^{\\rm predict}_i  \\leq 10 (1 \\leq i \\leq N_\\mathrm{div})</var> [小数]</li>\n<li><var>2 \\leq N_\\mathrm{PV} \\leq 3</var></li>\n<li><var>2 \\leq N_\\mathrm{FE} \\leq 4</var></li>\n<li><var>2 \\leq N_\\mathrm{RB} \\leq 3</var></li>\n<li><var>2 \\leq N_\\mathrm{EVC} \\leq 5</var></li>\n<li><var>3 \\leq N_V \\leq 4</var></li>\n<li><var>10 \\leq A^\\mathrm{PV} \\leq 15</var></li>\n<li><var>50 \\leq C^\\mathrm{PV}_{\\mathrm{init}} \\leq 120</var></li>\n<li><var>0 \\leq P^\\mathrm{FE}_\\mathrm{min} \\leq 140</var></li>\n<li><var>0 \\leq P^\\mathrm{FE}_\\mathrm{max} \\leq 500</var></li>\n<li><var>50 \\leq \\eta^\\mathrm{FE}_\\mathrm{min} \\leq 600</var></li>\n<li><var>35 \\leq \\eta^\\mathrm{FE}_\\mathrm{max} \\leq 400</var></li>\n<li><var>0 \\leq C^\\mathrm{FE}_\\mathrm{init} \\leq 4000</var></li>\n<li><var>130 \\leq C^\\mathrm{FE}_\\mathrm{fuel} \\leq 200</var></li>\n<li><var>14 \\leq P^\\mathrm{RB}_\\mathrm{charge} \\leq 36</var></li>\n<li><var>20 \\leq P^\\mathrm{RB}_\\mathrm{discharge} \\leq 55</var></li>\n<li><var>80 \\leq \\eta^\\mathrm{RB} \\leq 99</var></li>\n<li><var>8000 \\leq \\mathrm{Cap}^\\mathrm{RB} \\leq 100000</var></li>\n<li><var>250 \\leq C^\\mathrm{RB}_\\mathrm{init} \\leq 1000</var></li>\n<li><var>0 \\leq P^\\mathrm{EVC}_\\mathrm{in} \\leq 500</var></li>\n<li><var>0 \\leq P^\\mathrm{EVC}_\\mathrm{out} \\leq 500</var></li>\n<li><var>0 \\leq C^\\mathrm{EVC}_\\mathrm{init} \\leq 2000</var></li>\n<li><var>40000 \\leq \\mathrm{Cap}^V_\\mathrm{ele} \\leq 900000</var></li>\n<li><var>2 \\leq \\mathrm{Cap}^V_\\mathrm{pop} \\leq 50</var></li>\n<li><var>300 \\leq P^V_{\\mathrm{charge}} \\leq 1200</var></li>\n<li><var>300 \\leq P^V_{\\mathrm{discharge}} \\leq 1200</var></li>\n<li><var>1500 \\leq C^V_{\\mathrm{init}} \\leq 8000</var></li>\n<li><var>20 \\leq \\Delta^V_{\\mathrm{move}} \\leq 300</var></li>\n<li><var>0 \\leq o_i \\leq 1000 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>4 \\leq N_\\mathrm{shelter} \\leq 16</var></li>\n<li><var>1 \\leq x^\\mathrm{shelter}_i \\leq V (1 \\leq i \\leq N_\\mathrm{shelter})</var></li>\n<li><var>20 \\leq p^\\mathrm{shelter}_i \\leq 800 (1 \\leq i \\leq N_\\mathrm{shelter})</var></li>\n<li><var>0 \\leq D^\\mathrm{shelter}_i \\leq 12 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>0 \\leq N_\\mathrm{work} \\leq 16</var></li>\n<li><var>1 \\leq x \\leq V</var></li>\n<li><var>20 \\leq \\Delta^\\mathrm{work} \\leq 360</var></li>\n<li><var>50 \\leq I^\\mathrm{work}_\\mathrm{min} \\leq 333</var></li>\n<li><var>1400 \\leq D^\\mathrm{work} \\leq 6000</var></li>\n<li><var>43200 \\leq \\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele} \\leq 186000</var></li>\n<li><var>55 \\leq P^\\mathrm{work}_\\mathrm{charge} \\leq 450</var></li>\n<li><var>85 \\leq P^\\mathrm{work}_\\mathrm{discharge} \\leq 720</var></li>\n<li><var>80 \\leq \\eta^\\mathrm{work} \\leq 99</var></li>\n<li><var>0 \\leq A^{\\rm work}_{i} \\leq 1 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>D^\\mathrm{work} \\leq T_\\mathrm{max}\\sum_{i = 1}^{N_\\mathrm{div}}A^{\\rm work}_{i} / N_\\mathrm{div}</var></li>\n</ul>\n<h4>入出力形式2</h4>\n<p></p><ul>\n<li> <var>S_\\mathrm{trans}</var> [小数] </li>\n<li> <var>S_\\mathrm{ele}</var> [小数] </li>\n<li> <var>S_\\mathrm{env}</var> [小数] </li>\n<li> <var>1 \\leq x^\\mathrm{grid}_\\mathrm{pos} \\leq V</var> </li>\n<li> <var>0 \\leq \\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init} \\leq \\mathrm{Cap}^\\mathrm{RB} A^\\mathrm{grid}_\\mathrm{RB}</var> </li>\n<ul>\n<li> <var>\\mathrm{Cap}^\\mathrm{RB}</var> は導入したRBの蓄電池容量、<var>A^\\mathrm{grid}_\\mathrm{RB}</var>はRBの導入量である。 </li>\n</ul>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{PV} \\leq N_\\mathrm{PV}</var> </li>\n<li> <var>0 \\leq A^\\mathrm{grid}_\\mathrm{PV}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{FE} \\leq N_\\mathrm{FE}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{RB} \\leq N_\\mathrm{RB}</var> </li>\n<li> <var>0 \\leq A^\\mathrm{grid}_\\mathrm{RB}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC} \\leq N_\\mathrm{EVC}</var> </li>\n<li> <var>1 \\leq x^\\mathrm{EV}_\\mathrm{pos} \\leq V</var> </li>\n<li> <var>1 \\leq \\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init} \\leq \\mathrm{Cap}^V_\\mathrm{ele}</var> </li>\n<ul>\n<li> <var>\\mathrm{Cap}^V_\\mathrm{ele}</var> は導入したEVの蓄電池容量である。 </li>\n</ul>\n<li> <var>1 \\leq \\mathrm{type}_\\mathrm{EV} \\leq N_\\mathrm{V}</var> </li>\n</ul><p></p>\n<h4>入出力形式3</h4>\n<ul>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{grid}_i</var></li>\n<li><var>\\mathrm{pw}^\\mathrm{actual}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{excess}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{FE}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{buy}_i</var></li>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{EV}_i</var></li>\n<li><var>1 \\leq u_i \\leq V</var></li>\n<li><var>1 \\leq v_i \\leq V</var></li>\n<li><var>0 \\leq \\mathrm{dist}_i \\leq d</var>\nここで、<var>d</var>はEVが現在位置する辺の長さである。EVがちょうどいずれかの頂点の上に存在する場合、<var>d = 0</var> である。</li>\n<li><var>0 \\leq N^\\mathrm{order}_i \\leq N_\\mathrm{div}*1000</var></li>\n<li><var>1 \\leq o_{i, N^\\mathrm{order}_1} \\leq N^\\mathrm{order}</var></li>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{work}_i</var></li>\n<li><var>1 \\leq x^\\mathrm{work}_i \\leq V</var></li>\n<li><var>0 \\leq W^\\mathrm{work}_i</var></li>\n<li><var>0 \\leq w^\\mathrm{work}_i</var></li>\n<li><var>0 \\leq N_\\mathrm{order} \\leq 1000 * N_\\mathrm{div}</var></li>\n<li><var>1 \\leq \\mathrm{id}_i \\leq 1000 * N_\\mathrm{div}</var></li>\n<li><var>1 \\leq w_i \\leq V</var></li>\n<li><var>1 \\leq z_i \\leq V</var></li>\n<li><var>-2 \\leq \\mathrm{state}_i \\leq 2</var></li>\n<li><var>0 \\leq \\mathrm{time}_i \\leq T_\\mathrm{last}</var></li>\n</ul>\n<p><a id=\"サンプルコードB\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>サンプルコードB</h3>\n<p>問題Bのツールキット一式は<a href=\"https://img.atcoder.jp/hokudai-hitachi2021/toolkit_B.zip\">ここ</a>からダウンロードできます。このツールキットを用いて、手元の環境でジャッジの実行が可能です。また、ビギナー向けのサンプルコードも用意しています。</p>\n<ul>\n<li>テストケース</li>\n<li>ジャッジプログラム</li>\n<li>サンプルコード</li>\n</ul></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n    <p></p><details open=\"\"><summary>Contents</summary>\n    <ul>\n    <li><a href=\"#problem-summary\">Problem summary</a>\n    <ul>\n    <li><a href=\"#input-and-output-format-1\">Input and output format 1</a></li>\n    <li><a href=\"#input-and-output-format-2\">Input and output format 2</a></li>\n    <ul>\n    <li><a href=\"#mathrmgrid_info-details\"><var>\\mathrm{grid\\_info}</var> details</a></li>\n    <li><a href=\"#mathrmev_info-details\"><var>\\mathrm{EV\\_info}</var> details</a></li>\n    </ul>\n    <li><a href=\"#input-and-output-format-3\">Input and output format 3</a></li>\n    </ul>\n    </li>\n    <li><a href=\"#problem-details\">Problem details</a>\n    <ul>\n    <li><a href=\"#map-information\">Map information</a></li>\n    <li><a href=\"#asset-information\">Asset information</a></li>\n    <li><a href=\"#energy-demand\">Energy demand</a></li>\n    <li><a href=\"#energy-supply\">Energy supply</a></li>\n    <li><a href=\"#energy-balance-in-detail\">Energy balance in detail</a></li>\n    <li><a href=\"#work\">Work</a></li>\n    <li><a href=\"#transportation-request\">Transportation request</a></li>\n    <li><a href=\"#vehicles\">Vehicles</a></li>\n    <li><a href=\"#scoring\">Scoring</a></li>\n    <li><a href=\"#query-details\">Query details</a></li>\n    <li><a href=\"#Constraints-for-input-and-output\">Constraints for Input and Output</a></li>\n    </ul>\n    </li>\n    <li> <a href=\"#sample-code-B\">Sample Code B</a> </li>\n    </ul>\n    </details><p></p>\n    <p><a id=\"problem-summary\" class=\"anchor\"></a></p>\n    \n    <div class=\"part\">\n    <section>\n<h3>Problem summary</h3><p>A project to stably supply electricity from renewable sources to a region with distributed small power grids (nanogrids) has been launched aiming to achieve a low-carbon society. The supplied electricity will be used not only in the electricity demand areas, but also for transporting people and goods by electric vehicles (EVs).</p>\n<p>In this problem (Problem B), you will take on the role of an area designer of the project. You will design a layout of nanogrids which can provide stable energy supply and smooth transportation services. In addition to the area design, in Problem B, you will also manage an optimization of EV routing for transportation requests and work schedule (a daily operation). If the designed layout allows an operation with a low environmental load and energy can be supplied smoothly even during a wide-area power outage, additional points will be obtained.</p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/ProblemB_fig1_en.png\" style=\"width: 80%\">\n\n<figcaption>Fig.1 A flow of Problem B. Illustration shows overview and answer items Problem B.</figcaption>\n</div>\n\n<p><br></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/ProblemB_fig2_en.png\" style=\"width: 60%\">\n\n<figcaption>Fig.2 Example of a design with specified budget limit of 66 million yen. In addition to designing equipment installation in each nanogrid, position of nanogrids, initial position and initial storage amount of each EV are also designed and submitted elsewhere.</figcaption>\n</div>\n\n<p><br></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/ProblemB_fig3_en.png\" style=\"width: 60%\">\n\n<figcaption>Fig.3 Comparison between problem A and B.</figcaption>\n</div>\n\n<p><a id=\"input-and-output-format-1\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Input and output format 1</h3>\n<p>First, the contestants will get the information they need from the judges. The input/output format at that time is as follows.</p>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">Contestant</th>\n<th align=\"center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_1</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_1</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_2</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_2</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\vdots</var></td>\n<td align=\"center\"><var>\\vdots</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{query}_M</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\mathrm{output}_M</var></td>\n</tr>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"end\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n</tbody>\n</table>\n\n<ul>\n<li>Each time you output a <var>\\mathrm{query}</var>, the corresponding information is given from the standard input. The contestant needs to flush the standard output every time it outputs a <var>\\mathrm{query}</var>. In addition, it needs to read through all the inputs every time it outputs a <var>\\mathrm{query}</var> otherwise undefined behavior will occur.</li>\n<li><code>end</code> is required to terminate your query at the end of your output. The judge moves to the next operation by reading <code>end</code>. If <code>end</code> is not provided, undefined behavior will occur.</li>\n<li>An example of valid <var>\\mathrm{query}</var> is as follows. In case of invalid <var>\\mathrm{query}</var>, <code>WA</code> (wrong answer) is returned.\n<ul>\n<li> <code>budget</code> </li>\n<li> <code>temporal</code> </li>\n<li> <code>score</code> </li>\n<li> <code>graph</code> </li>\n<li> <code>demand</code> </li>\n<li> <code>demand [day] [id]</code> </li>\n<li> <code>radiation [day] [id]</code> </li>\n<li> <code>asset</code> </li>\n<li> <code>asset PV [id]</code> </li>\n<li> <code>asset FE [id]</code> </li>\n<li> <code>asset RB [id]</code> </li>\n<li> <code>asset EVC [id]</code> </li>\n<li> <code>asset vehicle [id]</code> </li>\n<li> <code>order [day]</code> </li>\n<li> <code>shelter</code> </li>\n<li> <code>work</code> </li>\n<li> <code>work [day] [id]</code> </li>\n<li> <code>end</code> </li>\n</ul></li>\n<li>The output information corresponding to each <var>\\mathrm{query}</var> is described in <a href=\"#query-details\">Query details</a>.</li>\n</ul>\n<hr>\n\n<p><a id=\"input-and-output-format-2\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Input and output format 2</h3>\n<p>After input and output format 1, the contestant will output the nanogrid and EV facility layout in the following format.</p>\n<p>First, the contestant will output the number of nanogrids to be installed, <var>N_\\mathrm {grid}</var>.</p>\n<pre><var>\\begin{aligned}N_\\mathrm{grid}\\end{aligned}</var>\n</pre>\n\n<p>Next, the information of each nanogrid is outputted in the following format.</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{grid\\_info}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{grid\\_info}_{N_\\mathrm{grid}} \\\\\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The information of each nanogrid is outputted as <var>\\mathrm{grid\\_info}</var> for <var>N_\\mathrm{grid}</var> lines. The details of <var>\\mathrm{grid\\_info}</var> will be described later.</li>\n<li>The electricity demand of nanogrids installed outside the preset electricity demand areas is always <var>0</var>.</li>\n<li>For each nanogrid, if the land area required for PV installation exceeds the area for which PV installation is possible at each vertex (<var>A_i</var> in <code>graph</code>), it is <code>WA</code>.</li>\n<li>If you try to install the nanogrid multiple times at the same vertex, the last installation will be effective.</li>\n<li><font color=\"red\">IDs are assigned to the nanogrid by using the following rule, and each nanogrid will be referred to by this ID thereafter. Note that this ID is different from the ID of the electricity demand area.<br>\nRule for assigning nanogrid ID: If there is a nanogrid installed in the power demand area, the IDs are assigned in the order of the power demand area ID. After that, IDs are assigned to the remaining nanogrids in the order of installation. If there is no nanogrids installed in the power demand area, IDs are assigned in the order of installation.</font></li>\n</ul>\n<p>Next, the contestant will output the number of EVs, <var>N_\\mathrm{EV}</var>.</p>\n<pre><var>\\begin{aligned}N_\\mathrm{EV}\\end{aligned}</var>\n</pre>\n\n<p>Next, the information of each EV is outputted in the following format.</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{EV\\_info}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{EV\\_info}_{N_\\mathrm{EV}}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The information of each EV is outputted as <var>\\mathrm{EV\\_info}</var> for <var>N_\\mathrm{EV}</var> lines. The details of <var>\\mathrm{EV\\_info}</var> will be described later.</li>\n<li>IDs are assigned to EVs in the order of installation, and each EV will be referred to by this ID thereafter.</li>\n</ul>\n<p>At the end, the contestant will output the following specified command format.</p>\n<pre><var>\\begin{aligned}\\mathrm{command} &amp; &amp; \\mathrm{day}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The first argument is a character string that specifies the execution form either <code>test</code> or <code>submit</code>. The valid strings are as follows.</li>\n<li><code>test</code>: Executes the test of the date specified by the second argument, <var>\\mathrm{day}</var>, with the specified nanogrid and EV layout that the contestant has outputted. In this case, the contestant then performs a daily operation via input and output format 3. In the end of the daily operation, the score of that day is returned to a standard input. For details, please refer to <a href=\"#input-and-output-format-3\">Input and output format 3</a>.</li>\n<li><code>submit</code>: Submits the specified nanogrid and EV layout as an answer. With this <code>submit</code> command, the <var>\\mathrm{day}</var> is ignored. In this case, the contestant then performs daily operations via input and output format 3. After the daily operations, the disaster response test gets started. For details, please refer to <a href=\"#input-and-output-format-3\">Input and output format 3</a>.</li>\n<li>The second argument specifies the date to run the test. The valid date ranges from day 1 to day <var>N_\\mathrm{day}</var>. Otherwise, it is <code>WA</code>.</li>\n</ul>\n<p><a id=\"mathrmgrid_info-details\" class=\"anchor\"></a></p>\n<h4><var>\\mathrm{grid\\_info}</var> details</h4>\n<h5>Input and output format</h5>\n<pre><var>\\begin{aligned}&amp; x^\\mathrm{grid}_\\mathrm{pos} &amp; &amp; \\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{PV} &amp; &amp; A^\\mathrm{grid}_\\mathrm{PV} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{FE} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{RB} &amp; &amp; A^\\mathrm{grid}_\\mathrm{RB} \\\\&amp; \\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC}\\end{aligned}</var>\n</pre>\n\n<h5>Details</h5>\n<ul>\n<li>In the first line, <var>x^\\mathrm{grid}_\\mathrm{pos}</var> and <var>\\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init}</var> represent the position and the initial storage amount of a nanogrid.</li>\n<li>The following 4 lines specify the type (PV, FE, RB and EVC) and amount of facilities to be installed at the nanogrid. Only one type of PV, FE, RB, and EVC product can be installed.</li>\n<li>The following line represents the configuration of PV equipment. <var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{PV}</var> represents the type of PV product and <var>A^\\mathrm{grid}_\\mathrm{PV}</var> represents the amount of the PV product to be installed in terms of power generation capacity.</li>\n<li>The following line represents the configuration of FE equipment. <var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{FE}</var> represents the type of FE product.</li>\n<li>The following line represents the configuration of RB equipment. <var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{RB}</var> represents the type of RB product and <var>A^\\mathrm{grid}_\\mathrm{RB}</var> represents the amount of the RB product to be installed.</li>\n<li>The following line represents the configuration of EVC equipment. <var>\\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC}</var> represents the type of EVC product.</li>\n<li>For PV installation, the following constraints must be met:\n<p><var>A^\\mathrm{PV} A^\\mathrm{grid}_\\mathrm{PV} \\leq A_{x^\\mathrm{grid}_\\mathrm{pos}}</var></p>\nwhere, <var>A^\\mathrm{PV}</var> is the required area per PV power generation capacity, <var>A^\\mathrm{grid}_\\mathrm{PV}</var> is amount of the PV product to be installed and <var>A_{x^\\mathrm{grid}_\\mathrm{pos}}</var> is the area where PV can be introduced at the vertex where the nanogrid is to be installed.</li>\n</ul>\n<p><a id=\"mathrmev_info-details\" class=\"anchor\"></a></p>\n<h4><var>\\mathrm{EV\\_info}</var> details</h4>\n<h5>Input and output format</h5>\n<pre><var>\\begin{aligned}&amp; x^\\mathrm{EV}_\\mathrm{pos} &amp; &amp; \\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init} &amp; &amp; \\mathrm{type}_\\mathrm{EV}\\end{aligned}</var>\n</pre>\n\n<h5>Details</h5>\n<ul>\n<li>At <var>t = 0</var>, EV position is set to <var>x^\\mathrm{EV}_\\mathrm{pos}</var>, initial EV charged amount is set to <var>\\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init}</var>, and the product type of EV is <var>\\mathrm{type}_\\mathrm{EV}</var>.</li>\n<li>The vertex <var>x^\\mathrm{EV}_\\mathrm{pos}</var> must be a vertex where a nanogrid is installed.</li>\n</ul>\n<hr>\n\n<p><a id=\"input-and-output-format-3\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input and Ouput format 3</h3>\n<p>After outputting the placement of the nanogrid and EV, the contestant will test the placement by controlling the EV, FE power generation, acceptance/rejection of transportation orders, and work equipment.</p>\n<p>At each time <var>t</var>, the contestant first receives the EV, nanogrid, and work machine status <var>\\mathrm{info}_t</var> at that time. The format of <var>\\mathrm{info}_t</var> is as follows.</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{Chg}^\\mathrm{grid}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{actual}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{excess}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{FE}_1 &amp; &amp; \\mathrm{pw}^\\mathrm{buy}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{grid}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{actual}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{excess}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{FE}_{N_\\mathrm{grid}} &amp; &amp; \\mathrm{pw}^\\mathrm{buy}_{N_\\mathrm{grid}} \\\\&amp; \\mathrm{Chg}^\\mathrm{EV}_1 &amp; &amp; u_1 &amp; &amp; v_1 &amp; &amp; \\mathrm{dist}_1 &amp; &amp; N^\\mathrm{order}_1 &amp; &amp; o_{i, 1} &amp; &amp; \\cdots &amp; &amp; o_{i, N^\\mathrm{order}_1} \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{EV}_{N_\\mathrm{EV}} &amp; &amp; u_{N_\\mathrm{EV}} &amp; &amp; v_{N_\\mathrm{EV}} &amp; &amp; \\mathrm{dist}_{N_\\mathrm{EV}} &amp; &amp; N^\\mathrm{order}_{N_\\mathrm{EV}} &amp; &amp; o_{i, {N_\\mathrm{EV}}} &amp; &amp; \\cdots &amp; &amp; o_{i, N^\\mathrm{order}_{N_\\mathrm{EV}}} \\\\&amp; \\mathrm{Chg}^\\mathrm{work}_1 &amp; &amp; x^\\mathrm{work}_1 &amp; &amp; W^\\mathrm{work}_1 &amp; &amp; w^\\mathrm{work}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{Chg}^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; x^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; W^\\mathrm{work}_{N_\\mathrm{work}} &amp; &amp; w^\\mathrm{work}_{N_\\mathrm{work}} \\\\&amp; N_\\mathrm{order} \\\\&amp; \\mathrm{id}_1 &amp; &amp; w_1 &amp; &amp; z_1 &amp; &amp; \\mathrm{state}_1 &amp; &amp; \\mathrm{time}_1 \\\\&amp; \\vdots \\\\&amp; \\mathrm{id}_{N_\\mathrm{order}} &amp; &amp; w_{N_\\mathrm{order}} &amp; &amp; z_{N_\\mathrm{order}} &amp; &amp; \\mathrm{state}_{N_\\mathrm{order}} &amp; &amp; \\mathrm{time}_{N_\\mathrm{order}} \\\\\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The first <var>N_\\mathrm{grid}</var> line provides information about the power supply and demand of the nanogrid. In line <var>i</var>, the amount of electricity stored in the nanogrid with ID <var>i</var> is given by <var>\\mathrm{Chg}^\\mathrm{grid}_i</var>, and the power balance at the previous time is given by <var>\\mathrm{pw}^\\mathrm{actual}_i</var>, <font color=\"red\">The amount of excess power generation</font> is given by <var>\\mathrm{pw}^\\mathrm{excess}_i</var>, fuel engine power generation amount is given by <var>\\mathrm{pw}^\\mathrm{FE}_i</var>, and the amount of power purchased from the grid is given by <var>\\mathrm{pw}^\\mathrm{buy}_i</var>. However when <var>t = 0</var> it is given by <var>\\mathrm{pw}^\\mathrm{actual}_i = \\mathrm{pw}^\\mathrm{excess}_i = \\mathrm{pw}^\\mathrm{FE}_i = \\mathrm{pw}^\\mathrm{buy}_i = 0</var>.</li>\n<li>The following <var>N_\\mathrm{EV}</var> line describes the the status of EV. The line <var>i</var> of the <var>N_\\mathrm{EV}</var> line represents the state of the EV whose ID is <var>i</var>. <var>\\mathrm{Chg}^\\mathrm{EV}_i</var> is the amount of electricity stored. The coordinates located in the graph <var>(u_i, v_i, \\mathrm{dist}_1)</var> represent order location, <var>N^\\mathrm{order}_i</var> is the orders in transit and <var>o_{i, 1}, \\cdots, o_{i, N^\\mathrm{order}_i}</var> reperesents the number of orders in transit.</li>\n<li>The following <var>N_\\mathrm{work}</var> line represents the status of the work order. The line <var>i</var> of the <font color=\"red\"><var>N_\\mathrm{work}</var></font> line represnts the status of work demand whose ID is <var>i</var>. <var>\\mathrm{Chg}^\\mathrm{work}_i</var> is the amount of electricity stored in the corresponding work machine, <var>x^\\mathrm{work}_i</var> is the work demand occuring at the vertex, <var>W^\\mathrm{work}_i</var> is the cumulative total amount of work performed so far and <var>w^\\mathrm{work}_i</var> represnts the current continued work time.</li>\n<li>The following line <var>1</var> gives the information of <var>N_\\mathrm{order}</var> which is the number of unprocessed transportation orders. Unprocessed means that the order has not been rejected or canceled and has not been shipped.</li>\n<li>The following <var>N_\\mathrm{order}</var> line give the information about the unprocessed transport orders. The line <var>i</var> of the <var>N_\\mathrm{order}</var> line gives the information about the number of orders that took place in <var>i</var> during the unprocessed orders, <var>\\mathrm{id}</var> is the ID, <var>w_i</var> is the departure point, <var>z_i</var> is the destination point, <var>\\mathrm{state}_i</var> is the status and <var>\\mathrm{time}_i</var> is the time interval. See <a href=\"#transportation-request\">Transportation Request</a> for details on the status.</li>\n</ul>\n<p>After receiving the <var>\\mathrm{info}_t</var>, the constestant can give an any number of commands. The command follows the following format.</p>\n<pre><var>\\begin{aligned}&amp; \\mathrm{group} &amp; &amp; \\mathrm{id} &amp; &amp; \\mathrm{command}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The <var>\\mathrm{group}</var> must be one of the following: <code>EV</code>、<code>FE</code>、<code>Machinery</code> or <code>Order</code>. If a character string other than these is issued as <var>\\mathrm{group}</var>, it is WA.</li>\n<li><code>EV</code> means EV, <code>FE</code> means the fuel engine generator installed in each nanogrid, <code>Machinery</code> means to operate the work machine in each work demand area, and <code>Order</code> indicates the reponse to the order which has been made.</li>\n<li><var>\\mathrm{id}</var> represents the target to actually operate or respond to in each group. <var>\\mathrm{group}</var> is the ID of <code>EV</code> if it is <code>EV</code>, <var>\\mathrm{group}</var> is the ID of nanogrid if it is <code>FE</code>, <var>\\mathrm{group}</var> is the ID of work demand areas if it is <code>Machinery</code>, If <var>\\mathrm{group}</var> is <code>Order</code> then specify the ID. If you specify an ID that is not valid for each group, it is <code>WA</code>.</li>\n<li><var>\\mathrm{command}</var> represents an operation or response to the target specified by <var>\\mathrm{group}</var> and <var>\\mathrm{id}</var>. For specific details of the <var>\\mathrm{command}</var> , refer to <a href=\"#vehicles\">Vehicles</a> when group is <code>EV</code>, <a href=\"#energy-supply\">Energy supply</a> when group is <code>FE</code>, <a href=\"#work\">Work</a> when group is <code>Machinery</code>, and <a href=\"#transportation-request\">Transportation request</a> when group is <code>Order</code>. If an invalid command is issued in each group then it becomes <code>WA</code>.</li>\n<li>Of the commands issued above, if the command is issued multiple times for the same <var>\\mathrm{group}</var> and <var>\\mathrm{id}</var>, the last issued command is used, If an invalid command is issued multiple times then it is <code>WA</code>.\nAfter issuing the command at time <var>t</var>, the Contestant outputs the following contents to notify the judge the end of command issue.</li>\n</ul>\n<pre><var>\\begin{aligned}\\mathrm{\"end\"}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>You can issue <code>end</code> directly as a string.</li>\n<li>Behavior is undefined if <code>end</code> is not issued.</li>\n</ul>\n<p>This completes the control at time <var>t</var>. The contestant completes the test for day 1 by performing the above operations <var>T_\\mathrm{max}</var> times. After that, in the case of command <code>test</code> (<a href=\"#input-and-output-format-2\">Input and output format 2</a>) is executed, the score of that day is returned as follows:\n</p><p><var>S_\\mathrm{trans}\\quad S_\\mathrm{ele}\\quad S_\\mathrm{env} \\quad S_\\mathrm{work}</var></p><p></p>\n<p>The contestant must read the returned score otherwise it is <code>WA</code>. It is noted that the execution time is set by the judge's CPU time.\nIn the case of command <code>submit</code> (<a href=\"#input-and-output-format-2\">Input and output format 2</a>) is executed, after the contestant completes <var>N_\\mathrm{day}</var> days of the above operations, a disaster response test will be conducted. The disaster response test gets started by randomly selecting a day from 1 to <var>N_\\mathrm{day}</var>.</p>\n<p><a id=\"problem-details\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Problem details</h3><p><a id=\"map-information\" class=\"anchor\"></a></p>\n</section>\n</div>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>Map information</h3>\n<p>Map information is given as a simple undirected graph with a set of vertices and a set of edges. The graph represents a road network on which the movement and charge/discharge of electric vehicles (EV) occur. Each vertex is placed on a two-dimensional plane, and the population and the installed capacity of solar power generation facilities are specified. The higher the population, the higher the probability of transportation requests occuring. In addition, either energy demand or work demand is set for some of the vertices.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"asset-information\" class=\"anchor\"></a>Asset information</h3>\n<p>One nanogrid consists of photovoltaics (PV), a private generator equipped with fuel engines (FE), a storage rechargeable battery (RB), and an EV charge/discharge device or EV charger (EVC). When installing the nanogrid, it is also necessary to specify the configuration for these facilities.</p>\n<p>The features of each facility are as follows:</p>\n<ul>\n<li>PV: The power generated by the PV is proportional to the amount of solar radiation which is given for each vertex at each time interval. Once a PV is installed, no additional cost is required. However, if you try to install more than the installed capacity of each vertex, it will be defined as <code>WA</code> (wrong answer). Therefore, the following constraints must be fulfilled for PV installation.\n<p><var>A^\\mathrm{PV} A^\\mathrm{grid}_\\mathrm{PV} \\leq A_i</var></p>\nwhere, <var>A^\\mathrm{PV}</var> is the required area per PV power generation capacity, which is the installation specification, <var>A^\\mathrm{grid}_\\mathrm{PV}</var> is amount of the PV product to be installed and <var>A_i</var> is the area for which PV installation is possible at the vertices where the nanogrid is to be installed.</li>\n<li>FE:  The power is generated by consuming fuel. <strong>The amount of power generated by FE is controlled by specifying the output for each step. The specified power must be greater than or equal to the minimum output, less than or equal to the maximum output, or 0. Otherwise, it is <code>WA</code> (wrong answer). For your information, efficiency of power generation by FE is maximum when it is operated at its maximum output power.</strong> Installation costs per output power are cheap and weather-independent power generation is possible. However, additional fuel costs are required for power generation.</li>\n<li>RB: The rechargeable batteries are charged when power excess occurs and are discharged when power shortage occurs. At the time of simulation, the initial storage amount at the beginning of the day can be specified arbitrarily.</li>\n<li>EVC: It connects PV, FE and  RB, and shares load among each other, it also inputs and outputs power between a nanogrid and external devices such as electric vehicles.</li>\n</ul>\n<p>If the amount of power generated by these facilities and the charge/discharge amount by EV are insufficient to power load and a power shortage occurs, then the power will be compensated by purchasing from an existing electric system (electricity from the grid).</p>\n<p>For selection of EVs, an EV catalog will be provided.For more details refer <a href=\"#asset-vehicle-info\">Asset vehicles information(asset vehicle [v_id])</a></p>\n<p>The initial costs of all above facilities and EVs are required. The initial cost (budget limit) can be obtained in the section titled \"Input and output format 1\". If the initial cost of your designed system exceeds the standard amount, the score will be penalized.</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"energy-demand\" class=\"anchor\"></a>Energy demand</h3>\n<p>Electricity demand is set for some of the vertices in the area. The location and the predicted energy demand can be obtained at the start of the test case.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"energy-supply\" class=\"anchor\"></a>Energy supply</h3>\n<p>The energy supply is preferentially covered by PV, and the difference between EV charge/discharge, work machine charge/discharge and energy demand is aggregated in RB. The FE operates when energy supply from PV is insufficient and power shortage occurs. If a power shortage exceeds the maximum output of the FE, the power will be covered by purchasing from a normal electric system (electricity from the grid).</p>\n<ul>\n<li><strong>Amount of PV power generation</strong>: The amount of PV power generation is given by the product of the amount of solar radiation and the installed PV capacity in the time interval. Please see details in <a href=\"#input-and-output-format-2\">Input and output format 2</a></li>\n<li><strong>Amount of FE power generation</strong>: <strong>The amount of power generated by FE is controlled by specifying the output for each step. The specified power must be greater than or equal to the minimum output, less than or equal to the maximum output, or 0. Otherwise, it is <code>WA</code> (wrong answer). For your information, efficiency of power generation by FE is maximum when it is operated at its maximum output power.</strong></li>\n<li><strong>RB charge amount</strong>: RB works to compensate for short-term energy supply and demand imbalances. At each time, the difference between the sum of the PV power generation amount, EV charge/discharge amount and <strong>work machine charge/discharge amount</strong>, and the power demand is aggregated into the RB storage amount. In other words, if the sum of the PV power generation amount and the charge amount from the EV to the nanogrid exceeds the sum of the power demand and the charge amount from the nanogrid to the EV, the RB storage amount increases, and vice versa. <strong>In case, if the energy supply is excessive, the amount of PV power generation will be suppressed. <font color=\"red\"><del>If the amount of PV power generation is 0 and energy supply is still excessive, it is <code>WA</code>.</del></font></strong></li>\n</ul>\n<p>To control the output of power generated by FE, the contestant needs to output the command below in <a href=\"#input-and-output-format-3\">Input and output format 3</a></p>\n<pre><var>\\begin{aligned}\\mathrm{\"FE\"} &amp; &amp; \\mathrm{id} &amp; &amp; d\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The <var>\\mathrm{id}</var> is a vertex number where a nanogrid is installed. The valid <var>\\mathrm{id}</var> are vertex numbers specified in \"Input and output format 2\" (<var>x^\\mathrm{grid}_\\mathrm{pos}</var>). If other values are specified, it is <code>WA</code>.</li>\n<li><var>d</var> is the amount of power generated by FE per step. Valid values must be integer values greater than or equal to the minimum output and less than or equal to the maximum output of the FE installed in the relevant nanogrid, or 0.</li>\n<li>If the output of power generated by FE is not controlled, FE will not generate any power.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"energy-balance-in-detail\" class=\"anchor\"></a>Energy balance in detail</h3>\n<p>The energy supply and energy demand for each nanogrid, electricity demand area, and work demand area can be summarized as follows.</p>\n<ul>\n<li> Step 1: Calculate temporary energy balance <var>\\Delta_\\mathrm{tmp}</var>.\n<p><var>\\Delta_\\mathrm{tmp, t} = \\Delta_\\mathrm{PV, t}^\\mathrm{actual} - \\Delta_\\mathrm{demand, t}^\\mathrm{actual} + \\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t} - \\Delta^\\mathrm{EV}_{\\mathrm{charge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{discharge}, t} - \\Delta^\\mathrm{work}_{\\mathrm{charge}, t} \\textcolor{red}{+ \\Delta^\\mathrm{FE}_{t}} </var></p>\nHere, each variable is as follows:\n<ul>\n<li> <var>\\Delta_\\mathrm{PV, t}^\\mathrm{actual}</var> : The amount of PV power generation at the relevant point at time <var>t</var>. PV power generation is always zero at points other than the nanogrid.</li>\n<li> <var>\\Delta_\\mathrm{demand, t}^\\mathrm{actual}</var> : The amount of energy demand at the relevant point at time <var>t</var>. The amount of energy demand is always 0 at points other than the electricity demand areas.</li>\n<li> <var>\\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t}</var> : The total EV discharge amount at the relevant point at time <var>t</var>.</li>\n<li> <var>\\Delta^\\mathrm{EV}_{\\mathrm{charge}, t}</var> : The total EV charge amount at the relevant point at time <var>t</var>.</li>\n<li> <var>\\Delta^\\mathrm{work}_{\\mathrm{discharge}, t}</var> : The total work machine discharge amount at the relevant point at time <var>t</var>.</li>\n<li> <var>\\Delta^\\mathrm{work}_{\\mathrm{charge}, t}</var> : The total work machine charge amount at the relevant point at time <var>t</var>.</li>\n<li> <font color=\"red\"><var>\\Delta^\\mathrm{FE}_{t}</var> :</font><font color=\"red\">The amount of FE power generation at the relevant point at time <var>t</var>.</font></li>\n<li> If the following constraints are not fulfilled, it will be <code>WA</code> at that point.\n<p><var>\n\\left\\{\n\\begin{aligned}\n&amp; \\Delta^\\mathrm{EV}_{\\mathrm{discharge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{discharge}, t} \\leq P^\\mathrm{EVC}_\\mathrm{in}  \\textcolor{red}{\\text{(}\\Delta^\\mathrm{FE}_{t} \\text{is deleted)}}  \\\\\n&amp; \\Delta^\\mathrm{EV}_{\\mathrm{charge}, t} + \\Delta^\\mathrm{work}_{\\mathrm{charge}, t} \\leq P^\\mathrm{EVC}_\\mathrm{out}\n\\end{aligned}\\right.\n</var></p>\n<ul>\n\n<li> Here, <var>P^\\mathrm{EVC}_\\mathrm{in}</var> and <var>P^\\mathrm{EVC}_\\mathrm{out}</var> refers to the value of EVC installed at the relevant point. At points without nanogrid installation, these values are always zero.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li> Step 2-a: Process when the amount of power generation is excessive. In case of,\n<var>\\Delta_\\mathrm{tmp, t} &gt; \\min\\{P^\\mathrm{RB}_{\\mathrm{charge}}, \\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}  - \\mathrm{Chg}^\\mathrm{grid}_t\\}</var> , it will be as follows:\n<var>\\Delta_\\mathrm{total, t} = \\min\\{P^\\mathrm{RB}_{\\mathrm{charge}}, \\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}  - \\mathrm{Chg}^\\mathrm{grid}_t\\}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = \\Delta_\\mathrm{tmp, t} - \\Delta_\\mathrm{total, t}, \\quad \\mathrm{pw}^\\mathrm{buy}_t = 0.</var>\nHere, each variable is as follows:\n<ul>\n<li> <var>P^\\mathrm{RB}_{\\mathrm{charge}}</var> : The installed RB value for the maximum battery charging speed at the relevant point. Battery charging speed is always zero at points other than the nanogrid.</li>\n<li> <var>\\mathrm{Cap}^\\mathrm{RB}_\\mathrm{total}</var> : The battery storage capacity at the relevant point, where battery storage capacity is the product of the capacity per unit of the installed RB value and the installed amount. Battery storage capacity is always zero at points other than the nanogrid.</li>\n<li> <var>\\mathrm{Chg}^\\mathrm{grid}_t</var> : The amount of battery charge at the relevant point at time <var>t</var>. Battery storage is always zero at points other than the nanogrid.</li>\n<li> <var>\\mathrm{pw}^\\mathrm{excess}_t</var> : The amount of excess power generation at the relevant point at time <var>t</var>. <font color=\"red\"><del>If <var>\\Delta_\\mathrm{PV, t}^\\mathrm{actual} &lt; \\mathrm{pw}^\\mathrm{excess}_t</var> then it is <code>WA</code>. This expresses that the response by suppressing PV output cannot catch up.</del></font></li>\n<li> <var>\\mathrm{pw}^\\mathrm{buy}_t</var> : The amount of power that needs to be purchased from the grid at the relevant point at time <var>t</var>. </li>\n</ul>\n</li>\n<li> Step 2-b: Process when the amount of power generation is insufficient.\n<var>\\Delta_\\mathrm{tmp, t} &lt; -\\min\\{P^\\mathrm{RB}_{\\mathrm{discharge}}, \\mathrm{Chg}^\\mathrm{grid}_t\\}</var>\nwith the above condition. It will be as follows:\n<br>\n<var>\\Delta_\\mathrm{total, t} = -\\min\\{P^\\mathrm{RB}_{\\mathrm{discharge}}, \\mathrm{Chg}^\\mathrm{grid}_t\\}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = 0, \\quad \\mathrm{pw}^\\mathrm{buy}_t = \\Delta_\\mathrm{total, t} - \\Delta_\\mathrm{tmp, t}.</var>\n<br>\nwhere,\n<br>\n<ul>\n<li> <var>P^\\mathrm{RB}_{\\mathrm{discharge}}</var> : The installed RB value for the maximum battery discharge rate at the relevant point. Battery discharge rate is always zero at points other than the nanogrid.</li>\n</ul>\n</li>\n<li> Step 2-c: Process when the amount of power generation is moderate.\nIf the conditions in Steps 2-a and 2-b are not fulfilled, do the following:\n<br>\n<var>\\Delta_\\mathrm{total, t} = \\Delta_\\mathrm{tmp, t}, \\quad \\mathrm{pw}^\\mathrm{excess}_t = 0, \\quad \\mathrm{pw}^\\mathrm{buy}_t = 0.</var>\n</li>\n<li> Step 3: Update the storage amount of a nanogrid\n<br>\nIn the case of <var>\\Delta_\\mathrm{total, t} &lt; 0 </var>,\n<br>\n<var>\\mathrm{Chg}^\\mathrm{grid}_{t + 1} = \\Delta_\\mathrm{total, t} + \\mathrm{Chg}^\\mathrm{grid}_t</var>\n<br>\nIn the case of <var>\\Delta_\\mathrm{total, t} \\geq 0 </var>,\n<br>\n<var>\\mathrm{Chg}^\\mathrm{grid}_{t + 1} = \\eta^\\mathrm{RB}\\Delta_\\mathrm{total, t} + \\mathrm{Chg}^\\mathrm{grid}_t</var>\n<br>\nwhere,\n<ul>\n<li> <var>\\eta^\\mathrm{RB}</var> : Battery charging efficiency at the relevant point. It is considered as '1' at points without nanogrid installed.</li>\n</ul>\n</li>\n</ul>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"work\" class=\"anchor\"></a>Work</h3>\n<p>There are points in the area that have work demand. The location of the work demand area and the predicted value of the work demand can be obtained at the start of the test case. Work demand is specified in the form of total work time and workable time zone within the day, and additional scores can be obtained by achieving it. Once the work is started, it needs to be continued for a certain period of time, and it is necessary to charge the power periodically in order to compensate the power consumed to work.\nIn order to control the work machine, it is necessary to issue a command as mentioned in <a href=\"#input-and-output-format-3\">input and output format 3</a>.</p>\n<pre><var>\\begin{aligned}\\mathrm{\"Machinery\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\left\\{ \\mathrm{\"break\"} \\mid \\mathrm{\"work\"} \\mid \\mathrm{\"charge\\_from\"}\\ d \\mid \\mathrm{\"charge\\_to\"}\\ d\\right\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The <var>\\mathrm{group}</var> must be specified as <code>Machinery</code>.</li>\n<li>The id must be greater than 1 and less than <var>N_\\mathrm{work}</var>.</li>\n<li>The valid commands and their contents are as follows\n<ul>\n<li> <code>break</code>: Do not work</li>\n<li> <code>work</code>: Start the work. Once you start working, you need to continue working for more than the specified number of steps in the specified working time, otherwise it is <code>WA</code>.</li>\n<li> <code>charge_from d</code>: Charge the work machine by <var>d</var>. At this time, only <var>\\Delta^\\mathrm{work}_{\\mathrm{charge}, t}</var> is added to <var>d</var>, but the increment of <var>\\mathrm{Chg}^\\mathrm{work}</var> is multiplied by <var>\\eta^\\mathrm{work}</var>.</li>\n<li> <code>charge_to d</code>: charge the work machine by <var>d</var>.</li>\n</ul></li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"transportation-request\" class=\"anchor\"></a>Transportation request</h3>\n<p>Based on a transportation request, an EV picks up the order at a starting point and transports it to a destination. Transportation requests occur online, and each request has the following internal states. Here, all variables are integers.</p>\n<ul>\n<li>IDs are assigned to all orders in the order in which they occur. The order of ID allocation for orders that occur at the same time is not specified.</li>\n<li>Order ID <var>\\mathrm{id}</var>: All orders are assigned with IDs in the order when they occur. The allocation of order ID for orders that occur at the same time is not specified.</li>\n<li>Order start position <var>p^\\mathrm{order}</var>: A position (a vertex) at which an order occur, in other words, a position that an order will be picked up.</li>\n<li>Order destination position <var>d^\\mathrm{order}</var>: A position (a vertex) at which an order will be delivered after it has been picked up. Upon arrival loading and unloading will be done automatically.</li>\n<li>Status <var>\\mathrm{state}</var>: The status of the transportation order. <var>0</var> indicates that it has not yet been picked up by any EV, and <var>1</var> indicates that it has beed picked up but has not yet arrived at the destination.</li>\n</ul>\n<p>The delivery request must be notified of acceptance or refusal within the <var>T_\\mathrm{grace}</var> step after it occurs. If not notified within the <var>T_\\mathrm{grace}</var> step, the order will be canceled and the delivery score will be penalized. In order to notify acceptance or rejection, it is necessary to issue a command of the following format as shown in <a href=\"#input-and-output-format-3\">Input and output format 3</a>.</p>\n<pre><var>\\begin{aligned}\\mathrm{\"Order\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\{ \\mathrm{\"accept\"} | \\mathrm{\"reject\"}\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li><var>\\mathrm{group}</var> must specify the order</li>\n<li>A valid <var>\\mathrm{id}</var> is the ID of the transport request whose <var>\\mathrm{state}</var> is <var>0</var> at the time when the command is issued. Refer to <a href=\"#input-and-output-format-3\">Input and output format 3</a> for the input related to the transportation request information.</li>\n<li>A valid <var>\\mathrm{command}</var> is either <code>accept</code> or <code>reject</code>. accept means accepting the transportation request, and reject means rejecting the transportation request.</li>\n<li>If you try to pick up an unaccepted transportation request, it will be <code>WA</code>.</li>\n</ul>\n<p>The internal <var>\\mathrm{state}</var> of the transportation request is as follows.</p>\n<ul>\n<li><var>\\mathrm{state} = -2</var>: The transportation request has been cancelled.</li>\n<li><var>\\mathrm{state} = -1</var>: The transportation request was rejected.</li>\n<li><var>\\mathrm{state} = 0</var>: The transportation request has occurred.</li>\n<li><var>\\mathrm{state} = 1</var>: The transportation request has been accepted.</li>\n<li><var>\\mathrm{state} = 2</var>: The transportation request is loaded on the EV.</li>\n<li><var>\\mathrm{state} = 3</var>: The transportation order arrived at the destination.</li>\n</ul>\n<p>From the above, the transportation order with <var>\\mathrm{state} = 0,1,2</var> is treated as unprocessed, and the state is constantly notified at every hour. Orders with\n<var>\\mathrm{state} = -2, -1</var> are notified only once during the next time when the order is in that state. For details please refer to <a href=\"#input-and-output-format-3\">Input and output format 3</a>.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"vehicles\" class=\"anchor\"></a>Vehicles</h3>\n<p>Contestant operates multiple EVs to adjust and transport power balance between nanogrids. Each vehicle has the following internal states.</p>\n<ul>\n<li>EV charged capacity  <var>\\mathrm{Chg}^\\mathrm{EV}(t)</var></li>\n<li>EV position  <var>(u^V, v^V, d^V)</var> :  an EV is on edge <var>(u^V, v^V)</var>, and the distance between its current position and vertex <var>u^V</var> is <var>d^V</var>.</li>\n</ul>\n<p>To operate EVs, the contestant needs to output the command below in <a href=\"#input-and-output-format-3\">Input and output format 3</a></p>\n<pre><var>\\begin{aligned}\\mathrm{\"EV\"} &amp; &amp; \\mathrm{id} &amp; &amp; \\left\\{ \\mathrm{\"stay\"} \\mid \\mathrm{\"move\"} w \\mid \\mathrm{\"pickup\"}\\ a \\mid \\mathrm{\"charge\\_from\\_grid\"}\\ d \\mid \\mathrm{\"charge\\_to\\_grid\"} d \\right\\}\\end{aligned}</var>\n</pre>\n\n<ul>\n<li>The <var>\\mathrm{group}</var> must be specified as <code>Machinery</code>.</li>\n<li>The valid id is greater than 1 and less than <var>N_\\mathrm{work}</var>.</li>\n<li>The valid commands and their contents are as follows\n<ul>\n<li> <code>stay</code>: Let the EV stay in the same place. In this case, the EV does not consume electricity. </li>\n<li> <code>move w</code>:  Let the EV move with a unit of distance forward to the vertex <code>w</code>. </li>\n<li> <code>pickup a</code>:  The EV picks up the order ID <code>a</code>. </li>\n<li> <code>charge_from_grid d</code>:  Charge the EV from nanogrid at the EV position by the amount <code>d</code>. </li>\n<li> <code>charge_to_grid d</code>:  Charge nanogrid at the EV position from the EV by the amount <code>d</code>. </li>\n</ul></li>\n<li>Total amount of charge/discharge according to the above two items is aggregated and evaluated as <var>\\Delta_\\mathrm{EV}</var> for each turn and each grid. For further information, please follow the link: <a href=\"#energy_balance_details\">Energy balance details</a></li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"scoring\" class=\"anchor\"></a>Scoring</h3>\n<p>The final score (<var>S</var>) is defined using the following equation:</p>\n<p><var>S = \\sum_{i = 1}^{N_\\mathrm{day}}w_{\\mathrm{day}, i}S_i  + w_\\mathrm{acc}S_\\mathrm{acc} - \\alpha_\\mathrm{cost}\\max(0, C_\\mathrm{total} - C_\\mathrm{init})</var></p>\n<p>where <var>S_i</var> is the score of day i, <var>w_{\\mathrm{day}, i}</var> is the weighting factor for each <var>S_i</var>, <var>S_\\mathrm{acc}</var> is the disaster response score, <var>C_\\mathrm{total}</var> is the cost of the entire installed facilities and <var>\\alpha_\\mathrm{cost}</var> is the coefficient for score conversion. The <var>S_i</var> is defined using the following equation:</p>\n<p><var>S_i = w_\\mathrm{trans}S_\\mathrm{trans} + w_\\mathrm{ele}S_\\mathrm{ele} + w_\\mathrm{env}S_\\mathrm{env} + w_\\mathrm{work}S_\\mathrm{work}</var></p>\n<p>where <var>S_\\mathrm{trans}</var>, <var>S_\\mathrm{ele}</var>, <var>S_\\mathrm{env}</var>, and <var>S_\\mathrm{work}</var> represent transport score, energy score, environmental score and work score, respectively. <var>w_\\mathrm{trans}</var>, <var>w_\\mathrm{ele}</var>, <var>w_\\mathrm{env}</var>, and <var>w_\\mathrm{work}</var> are weighting factors for each score. Each score is determined by a test with the parameters of the corresponding day. For further details of each score, see the description below.</p>\n<h4>Transportation score <var>S_\\mathrm{trans}</var></h4>\n<p>The transportation score <var>S_\\mathrm{trans}</var> is defined as</p>\n<p><var>S_\\mathrm{trans} = \\sum_{i \\in \\mathcal O^\\mathrm{trans}} \\max\\left(0, \\alpha^\\mathrm{trans}_\\mathrm{fee}\\mathrm{dist}_i - \\alpha^\\mathrm{trans}_\\mathrm{penalty}(T_{\\mathrm{wait}, i} - T_i)^2\\right) - \\alpha^\\mathrm{trans}_\\mathrm{undelivered}N_\\mathrm{undelivered} - \\alpha^\\mathrm{trans}_\\mathrm{canceled}N_\\mathrm{canceled}</var></p>\n<p>where<var>\\mathcal O^\\mathrm{trans}</var> is a set of order IDs completed by the end of the test case, and <var>T_\\mathrm{wait, i}</var> is the time difference between order generated time of order ID <var>i</var> and time that order ID <var>i</var> is picked up. <var>\\mathrm{dist}_i</var> is the shortest path length from order start position to order destination position of order ID <var>i</var>. <var>\\alpha^\\mathrm{trans}_\\mathrm{fee}</var> is the parameter corresponding to the fare income, <var>\\alpha^\\mathrm{trans}_\\mathrm{penalty}</var> is a penalty for delayed response in transportation requests, <var>N_\\mathrm{undelivered}</var> is the total number of orders that is not delivered by <var>T_\\mathrm{max}</var>,  and <var>N_\\mathrm{canceled}</var> is the total number of orders canceled without notice of acceptance or denial.</p>\n<h4>Energy score <var>S_\\mathrm{ele}</var></h4>\n<p>The energy score <var>S_\\mathrm{ele}</var> is defined as</p>\n<p><var>S_\\mathrm{ele} = \\alpha^\\mathrm{ele}C^\\mathrm{balance} - \\alpha^\\mathrm{ele}_\\mathrm{FE}\\sum_{t = 0}^{T_\\mathrm{max}}\\sum_{i = 1}^{N_\\mathrm{grid}}L^\\mathrm{FE}_{i, t} - \\alpha^\\mathrm{ele}_\\mathrm{buy}\\sum_{t = 0}^{T_\\mathrm{max}}\\sum_{i = 1}^{N_\\mathrm{grid}}L^\\mathrm{buy}_{i, t}</var></p>\n<p><var>C^\\mathrm{balance} = \\sum_{i = 1}^{N_\\mathrm{EV}} C^{\\mathrm{EV}_i}_{t = T_\\mathrm{max}} + \\sum_{i = 1}^{N_\\mathrm{grid}} C^{\\mathrm{grid}_i}_{t = T_\\mathrm{max}} - \\sum_{i = 1}^{N_\\mathrm{grid}} C^{\\mathrm{grid}_i}_{t = 0}  - \\sum_{i = 1}^{N_\\mathrm{EV}} C^{\\mathrm{EV}_i}_{t = 0} - \\sum_{i = 1}^{N_\\mathrm{EV}}\\Delta^\\mathrm{EV}_{\\mathrm{move}, i}\\mathrm{ret}_i</var></p>\n<p>Here, <var>C^\\mathrm{balance}</var> corresponds to the overall power balance, which is calculated as the sum of total amount of electricity stored in all EVs and all nanogrids at the time of <var>t = T_\\mathrm{max}</var> minus the sum of the total amount of initial electricity stored in all EVs and all nanogrids and the total amount of power required for the EVs to return to the initial EVs position. <var>L^\\mathrm{FE}_{i, t}</var> and <var>L^\\mathrm{buy}_{i, t}</var> are <font color=\"red\">the amount of fuel used for FE power generation </font>at nanogrid <var>i</var>, at time <var>t</var>, and the power purchased from the grid by nanogrid <var>i</var>, respectively. <var>\\alpha^\\mathrm{ele}</var>, <var>\\alpha^\\mathrm{ele}_\\mathrm{FE}</var> and <var>\\alpha^\\mathrm{ele}_\\mathrm{buy}</var> are coefficients for energy score conversion.</p>\n<p>If the nanogrid is not installed in the power demand area, all the power consumed in the power demand area where the nanogrid is not installed is treated as purchased from the grid.&lt;/</p>\n<h4>Environmental score <var>S_\\mathrm{env}</var></h4>\n<p>The environmental score <var>S_\\mathrm{env}</var> is defined as</p>\n<p><var>S_\\mathrm{env} =  - \\alpha^\\mathrm{env}_\\mathrm{fuel} \\sum_{t = 0}^{T_\\mathrm{max}} \\sum_{i = 1}^{N_\\mathrm{grid}} L^\\mathrm{FE}_{i, t} - \\alpha^\\mathrm{env}_\\mathrm{buy} \\sum_{t = 0}^{T_\\mathrm{max}} \\sum_{i = 1}^{N_\\mathrm{grid}} L^\\mathrm{buy}_{i, t}</var></p>\n<p>where <var>\\alpha^\\mathrm{env}_\\mathrm{fuel}</var> and <var>\\alpha^\\mathrm{env}_\\mathrm{grid}</var> are coefficients for environmental score conversion.</p>\n<h4>Disaster response score <var>S_\\mathrm{acc}</var></h4>\n<p>The disaster response score <var>S_\\mathrm{acc}</var> is defined as</p>\n<p><var>S_\\mathrm{acc} = \\alpha^\\mathrm{acc}\\mathrm{Day}</var></p>\n<p>Here <var>\\mathrm{Day}</var> is the number of continuous uninterruptible days for a disaster event with a maximum of <var>N_\\mathrm{acc}</var>. <var>\\alpha^\\mathrm{acc}</var> is a coefficient for disaster response score conversion. See below for details.</p>\n<details>\n\nThe disaster response score is calculated as follows.\n\n\n1. A day in the test case is randomly selected, and the test starts from the initial storage amount specified by the contestant.\n2.  A point of time in <var>\\{1, \\cdots , T^\\mathrm{max}\\}</var> is randomly selected, and defined as the disaster starting time <var>t_\\mathrm{acc}</var>. The amount of electricity stored at the time <var>t_\\mathrm{acc}</var> during the test executed in 1. is recorded.\n3. A new test starts. The initial storage amount is equal to the storage amount recorded in 2. After that, the test is continued as long as the uninterruptible operation is performed without receiving the power supply from the grid and within the range of the above-mentioned maximum number of continuous uninterruptible days <var>N_\\mathrm{acc}</var>. During this period, the final amount of electricity stored on the previous day is used as the initial amount of electricity stored on the subsequent days. The additional electricity demand areas will appear at the location of the evacuation centers. For details, refer to the evacuation center information (<code>shelter</code>) in [Input and output format 1](#input-and-output-format-1). Furthermore, no transport requests are generated during these tests.\n4. The above disaster response test will be completed in up to <var>N_\\mathrm{acc}</var> days.\n\n</details>\n\n<h4>Work score</h4>\n<p>The work score <var>S_\\mathrm{work}</var> is defined as</p>\n<p><var>S_\\mathrm{work} = \\alpha^\\mathrm{work}\\mathrm{Work}</var></p>\n<p>Here, <var>\\mathrm{Work}</var> is the number of work demand areas that have achieved work demand. <var>\\alpha^\\mathrm{work}</var> is a coefficient for score conversion.</p>\n<h4><font color=\"red\">Decision of final ranking</font></h4>\n<p><font color=\"red\">In the system test, 400 test cases that differ from those during the contest period, are used, and the final ranking is determined by the total score of all testcases. The code of each Contestant, that is subject to the system test, is \"the last submission code with AC status“. In addition, if there is a test case at which TLE or WA is obtained, the score for that test case will be 0 points. Please refer to the table below for a detailed breakdown of test cases. (Note that the generator will not be released.)</font></p>\n<div style=\"text-align: center\">\n\n<img src=\"https://img.atcoder.jp/hokudai-hitachi2021/sysstemtest_en2.png\" style=\"width: 80%\">\n\n</div>\n\n<p><font color=\"red\">(1)4 types from published toolkits + 2 types from unpublished data</font><br>\n<font color=\"red\">(2)A total of 4 types of solar radiation contains of 1 type of large amount, 1 type of small amount and 2 types of random amount of the radiation.\n</font><br>\n<font color=\"red\">(3)Expected sum of the number of transportation requests is one-to-one correspondence with map data.\n</font><br>\n<font color=\"red\">(4)Test cases where the execution time and memory consumption are larger than those used for ranking during the contest period are excluded.</font><br>\n<font color=\"red\">(5)Map data 6 types <var>\\times</var> solar radiation 4 types <var>\\times</var> budget 3 types <var>\\times</var> other parameters 4 types = 288 test cases</font><br>\n<font color=\"red\">(6)Select to include the cases where specific assets or conditions are advantageous in consideration of future technology and policy.<br><strong>(For example, a test case with large penalty (<var>\\alpha^\\mathrm{ele}_\\mathrm{buy}</var> and <var>\\alpha^\\mathrm{env}_\\mathrm{buy}</var>) for purchasing power from an existing grid. A test case with relatively small amount of either <var>w_\\mathrm{acc}, w_\\mathrm{trans}, w_\\mathrm{ele}, w_\\mathrm{env}</var> or <var>w_\\mathrm{work}</var>)</strong></font><br></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"query-details\" class=\"anchor\"></a>Query details</h3>\n<h4>Budget information (<code>budget</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">Contestant</th>\n<th align=\"center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"budget\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>C_\\mathrm{init}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li><var>C_\\mathrm{init}</var> is the total budget specified for each test case.</li>\n</ul>\n<h4>Time related information (<code>temporal</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th align=\"center\">Contestant</th>\n<th align=\"center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"temporal\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>T_\\mathrm{max} \\quad T_\\mathrm{last} \\quad N_\\mathrm{div} \\quad N_\\mathrm{day} \\quad N_\\mathrm{acc} \\quad T_\\mathrm{grace} </var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li><var>T_\\mathrm{max}</var> is a number of steps per day. <var>T_\\mathrm{last}</var> is the final time step in which transport requests can occur in a day.</li>\n<li><var>T_\\mathrm{max}</var> is evenly divided into <var>N_\\mathrm{div}</var> intervals. Solar radiation information, energy demand information in detail, and transportation request information are constant in each of these time intervals.</li>\n<li><var>N_\\mathrm{day}</var> shows how many days of data in a test case.</li>\n<li><var>N_\\mathrm{acc}</var> shows how many days of data in a test case that is used for disaster response score calculation.</li>\n<li><var>T_\\mathrm{grace}</var> is the grace period provided before the delivery order is canceled.</li>\n</ul>\n<h4>Score related information (<code>score</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"score\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; \\alpha_\\mathrm{cost} \\\\&amp; w_{\\mathrm{day}, 1} &amp; &amp; \\cdots &amp; &amp; w_{\\mathrm{day}, N_\\mathrm{day}} \\\\&amp; w_\\mathrm{trans} &amp; &amp; w_\\mathrm{ele} &amp; &amp; w_\\mathrm{env} &amp; &amp; w_\\mathrm{acc} &amp; &amp; w_\\mathrm{work} \\\\&amp; \\alpha^\\mathrm{trans}_\\mathrm{fee} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{penalty} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{undelivered} &amp; &amp; \\alpha^\\mathrm{trans}_\\mathrm{canceled} \\\\&amp; \\alpha^\\mathrm{ele} &amp; &amp; \\alpha^\\mathrm{ele}_\\mathrm{FE} &amp; &amp; \\alpha^\\mathrm{ele}_\\mathrm{buy} \\\\&amp; \\alpha^\\mathrm{env}_\\mathrm{fuel} &amp; &amp; \\alpha^\\mathrm{env}_\\mathrm{buy} &amp; &amp; \\textcolor{red}{\\text{(}\\alpha^\\mathrm{env}\\text{ is deleted.)}} \\\\&amp; \\alpha^\\mathrm{acc} \\\\&amp; \\alpha^\\mathrm{work} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>The coefficients used for score calculation are listed in 8 lines. See <a href=\"#scoring\">Scoring</a> for detailed formulas on how these coefficients are used.</li>\n</ul>\n<h4>Graph related information (<code>graph</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"graph\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; V &amp; &amp; E \\\\ &amp; x_1 &amp; &amp; y_1 &amp; &amp; p_1 &amp; &amp; A_1 &amp; &amp; l_1 \\\\ &amp; \\vdots \\\\ &amp; x_V &amp; &amp; y_V &amp; &amp; p_V &amp; &amp; A_V &amp; &amp; l_V \\\\ &amp; u_1 &amp; &amp; v_1 &amp; &amp; d_1 \\\\ &amp; \\vdots \\\\ &amp; u_E &amp; &amp; v_E &amp; &amp; d_E \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>In the 1st line, the number of vertices <var>V</var> and the number of edges <var>E</var> of the graph are provided.</li>\n<li>In the following <var>V</var> lines, information for each vertex is provided. The <var>i</var>-th line of the <var>V</var> lines shows coordinates <var>(x_i, y_i)</var> of vertex <var>i</var>, population <var>p_i</var>, acquirable land area <var>A_i</var> and cost per acquisition area <var>l_i</var>. The <var>i</var>-th line corresponds to the vertex number <var>i</var>.</li>\n<li>In the following <var>E</var> lines, information for each edge is provided. The <var>i</var>-th line of the <var>E</var> lines shows vertex <var>u_i</var>, vertex <var>v_i</var> and the distance <var>d_i</var> between the two vertices.</li>\n</ul>\n<h4>Energy demand information (<code>demand</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"demand\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>N_\\mathrm{demand}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li><var>N_\\mathrm{demand}</var> is the number of electricity demand areas.</li>\n</ul>\n<h4>Energy demand information in details <code>demand [day] [id]</code></h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"demand\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; x &amp; &amp; \\sigma_D^2 \\\\&amp; D^{\\rm predict}_1 &amp; &amp; \\cdots &amp; &amp; D^{\\rm predict}_{N_{\\rm div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>The information contains the predicted energy demand of a demand area specified by <code>i</code> on the day specified by <code>d</code>.</li>\n<li>In the 1st line, <var>x</var> is the vertex number of the vertex where the electricity demand area exists. <var>\\sigma_D^2</var> is the variance of the error of the predicted energy demand at each step. In brief, the error of the predicted energy demand at each step follows a normal distribution with an average of <var>0</var> and a variance of <var>\\sigma_D^2</var>.</li>\n<li>In the 2nd line, the predicted energy demand for each time interval is provided. The <var>i</var>-th column of the <var>N_{\\rm div}</var> columns is represented by <var>D^\\mathrm{predict}_i</var>, indicating the predicted energy demand at time interval <var>i</var>.</li>\n</ul>\n<h4>Solar radiation information (<code>radiation [day] [id]</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"radiation\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; R^{\\rm predict}_1 &amp; &amp; \\cdots &amp; &amp; R^{\\rm predict}_{N_{\\rm div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Returns the predicted amount of solar radiation at the vertex <code>i</code> on the day <code>d</code>.</li>\n<li><var>R^\\mathrm{predict}_i</var> represents predicted amount of solar radiation at time interval <var>i</var>. About accuracy of the predicted amount of solar radiation, The amount of cumulative daily radiation is generally accurate, but the accuracy at each step is not guaranteed.</li>\n</ul>\n<h4>Asset information <code>asset</code></h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{PV} \\\\&amp; N_\\mathrm{FE} \\\\&amp; N_\\mathrm{RB} \\\\&amp; N_\\mathrm{EVC} \\\\&amp; N_V \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>In the 1st line, <var>N_\\mathrm{PV}</var> is the number of pieces of PV equipments.</li>\n<li>In the following line, <var>N_\\mathrm{FE}</var> is the number of pieces of FE equipments.</li>\n<li>In the following line, <var>N_\\mathrm{RB}</var> is the number of storage rechargeable batteries.</li>\n<li>In the following line, <var>N_\\mathrm{EVC}</var> is the number of EVCs.</li>\n<li>In the following line, <var>N_V</var> is the number of vehicles.</li>\n</ul>\n<h4>Asset PV information <code>asset PV [pv_id]</code></h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ PV\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; A^\\mathrm{PV} &amp; &amp; C^\\mathrm{PV}_{\\mathrm{init}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of a product <code>i</code> of PV equipment. <var>A^\\mathrm{PV}</var> is power generation capacity per an area of a product and <var>C^\\mathrm{PV}_\\mathrm{init}</var> is the cost per unit of power generation capacity.</li>\n<li>A valid PV <code>i</code> is an integer ranging from 1 to <var>N_\\mathrm{PV}</var>.</li>\n</ul>\n<h4>Asset FE information (<code>asset FE [fe_id]</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ FE\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned} &amp; P^\\mathrm{FE}_\\mathrm{min} &amp; &amp; P^\\mathrm{FE}_\\mathrm{max} &amp; &amp; \\eta^\\mathrm{FE}_\\mathrm{min} &amp; &amp; \\eta^\\mathrm{FE}_\\mathrm{max} &amp; &amp; C^\\mathrm{FE}_\\mathrm{init} &amp; &amp; C^\\mathrm{FE}_\\mathrm{fuel} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of a product <code>i</code> of FE equipment. <var>P^\\mathrm{FE}_\\mathrm{min}</var> is the minimum output power on an operation, <var>P^\\mathrm{FE}_\\mathrm{max}</var> is the maximum output power, <var>\\eta^\\mathrm{FE}_\\mathrm{min}</var> is the fuel consumption rate when the FE is operating with the minimum output power, <var>\\eta^\\mathrm{FE}_\\mathrm{max}</var> is the fuel consumption rate when the FE is operating with the maximum output power (The fuel consumption rate at each time <var>\\eta^\\mathrm{FE}_t</var> depending on the output <var>t</var>, is derived by linear interpolation between <var>\\eta^\\mathrm{FE}_\\mathrm{min}</var> and <var>\\eta^\\mathrm{FE}_\\mathrm{max}</var>), <var>C^\\mathrm{FE}_\\mathrm{init}</var> is the initial for a FE equipment<font color=\"red\"><del>, <var>C^\\mathrm{FE}_\\mathrm{fuel}</var> is the fuel cost per unit of generating power</del></font>. <font color=\"red\">(The fuel consumption is calculated as <var>\\Delta^\\mathrm{FE}_{t} \\times ((\\Delta^\\mathrm{FE}_{t} - P^\\mathrm{FE}_\\mathrm{min}) \\times (\\eta^\\mathrm{FE}_\\mathrm{max} - \\eta^\\mathrm{FE}_\\mathrm{min}) / (P^\\mathrm{FE}_\\mathrm{max} - P^\\mathrm{FE}_\\mathrm{min}) + \\eta^\\mathrm{FE}_\\mathrm{min} ) / 1000 </var>. The 1/1000 is a coefficient for unit conversion.)</font></li>\n<li>A valid FE <code>i</code> is an integer ranging from 1 to <var>N_\\mathrm{FE}</var>.</li>\n<li>A product with <var>P^\\mathrm{FE}_\\mathrm{min} = P^\\mathrm{FE}_\\mathrm{max} = \\eta^\\mathrm{FE}_\\mathrm{min} = \\eta^\\mathrm{FE}_\\mathrm{max} = C^\\mathrm{FE}_\\mathrm{init} = C^\\mathrm{FE}_\\mathrm{fuel} = 0</var> is listed in the FE catalog. If you will not install a piece of FE equipment at a nanogrid, please select this product.</li>\n</ul>\n<h4>Asset RB information (<code>asset RB [rb_id]</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ RB\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned} &amp; P^\\mathrm{RB}_\\mathrm{charge} &amp; &amp; P^\\mathrm{RB}_\\mathrm{discharge} &amp; &amp; \\eta^\\mathrm{RB} &amp; &amp; \\mathrm{Cap}^\\mathrm{RB} &amp; &amp; C^\\mathrm{RB}_\\mathrm{init} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of a product <code>i</code> of a storage rechargeable battery. <var>P^\\mathrm{RB}_\\mathrm{charge}</var> is the maximum charging speed, <var>P^\\mathrm{RB}_\\mathrm{discharge}</var> is the maximum discharging speed, <var>\\eta^\\mathrm{RB}</var> is charging efficiency, <var>\\mathrm{Cap}^\\mathrm{RB}</var> is the battery capacity, and <var>C^\\mathrm{RB}_\\mathrm{init}</var> is the initial cost per unit of a battery.</li>\n<li>A valid RB <code>i</code> is an integer ranging from 1 to <var>N_\\mathrm{RB}</var>.</li>\n</ul>\n<p><a id=\"asset-EVC-info\" class=\"anchor\"></a></p>\n<h4>Asset EVC information <code>asset EVC [EVC_id]</code></h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ EVC\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; P^\\mathrm{EVC}_\\mathrm{in} &amp; &amp; P^\\mathrm{EVC}_\\mathrm{out} &amp; &amp; C^\\mathrm{EVC}_\\mathrm{init} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of a product <code>i</code> of the EVC. <var>P^\\mathrm{EVC}_{\\mathrm{in}}</var> is the maximum input power, <var>P^\\mathrm{EVC}_{\\mathrm{out}}</var> is the maximum output power, and <var>C^\\mathrm{EVC}_{\\mathrm{init}}</var> is the initial cost per unit of an EVC.</li>\n<li>A valid EVC <code>i</code> is an integer ranging from 1 to <var>N_\\mathrm{EVC}</var>.</li>\n<li>A product with <var>P^\\mathrm{EVC}_\\mathrm{in} = P^\\mathrm{EVC}_\\mathrm{out} = C^\\mathrm{EVC}_\\mathrm{init} = 0</var> is listed in the EVC catalog. If you will not install an EVC equipment at a nanogrid, please select this product. <strong>It is noted that without installing EVC, EV or work machine charging/discharging cannot be operated at the nanogrid.</strong></li>\n</ul>\n<p><a id=\"asset-vehicle-info\" class=\"anchor\"></a></p>\n<h4>Asset vehicles information (<code>asset vehicle [v_id]</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"asset\\ vehicle\"}\\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; \\mathrm{Cap}^V_\\mathrm{ele} &amp; &amp; \\mathrm{Cap}^V_\\mathrm{pop} \\\\&amp; P^V_{\\mathrm{charge}} &amp; &amp; P^V_{\\mathrm{discharge}} &amp; &amp; C^V_{\\mathrm{init}} &amp; &amp; \\Delta^V_{\\mathrm{move}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of a product <code>i</code> of the vehicles.</li>\n<li>In the 1st line, <var>\\mathrm{Cap}^V_{\\mathrm{ele}, i}</var> is an EV charged capacity, <var>\\mathrm{Cap}^V_{\\mathrm{pop}, i}</var> is order capacity.</li>\n<li>In the 2nd line, <var>P^V_\\mathrm{charge}</var> is the maximum charging speed, <var>P^V_{\\mathrm{discharge}}</var> is the maximum discharging speed, <var>C^V_{\\mathrm{init}, i}</var> is the cost per EV and <var>\\Delta^V_{\\mathrm{move}, i}</var> is amount of energy needed per unit of movement.</li>\n<li>A valid <code>i</code> for asset vehicles information is an integer ranging from 1 to <var>N_\\mathrm{V}</var>.</li>\n</ul>\n<h4>Transportation request information (<code>order [day]</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"order\"}\\quad d</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; o_1 &amp; &amp; \\cdots &amp; &amp; o_{N_\\mathrm{div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of the frequency of transportation requests on day <code>d</code>.</li>\n<li><var>o_i</var> is an expected value of transportation requests that occurs during the time interval <var>i</var>. See <a href=\"#transportation-request\">Transportation request</a> for details on the number of transportation requests. (Note: The transportation request information follows the Poisson distribution of the parameter <var>o_i</var>.)</li>\n</ul>\n<h4>Evacuation center information (<code>shelter</code>)</h4>\n<h5>Input and output format</h5>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"shelter\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{shelter} \\\\&amp; x^\\mathrm{shelter}_1 &amp; &amp; p^\\mathrm{shelter}_1 \\\\&amp; \\vdots \\\\&amp; x^\\mathrm{shelter}_{N_\\mathrm{shelter}} &amp; &amp; p^\\mathrm{shelter}_{N_\\mathrm{shelter}} \\\\&amp; D^\\mathrm{shelter}_1 &amp; &amp; \\cdots &amp; &amp; D^\\mathrm{shelter}_{N_\\mathrm{div}} \\\\\\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>Return information of shelter.</li>\n<li>In the 1st line, <var>N_\\mathrm{shelter}</var> is the number of shelters.</li>\n<li>In the following <var>N_\\mathrm{shelter}</var> lines, information of shelters' position and capacity are provided. <var>x_i</var> and <var>p_i</var> represent position of shelter <var>i</var> and its capacity, respectively.</li>\n<li>The following 1 line shows a standard power demand generated at shelters when a disaster occurs. <var>D^\\mathrm{shelter}_i</var> is the standard energy demand at time interval <var>i</var>. <var>D^\\mathrm{shelter}_{i, j}</var>, representing the standard energy demand at time interval <var>i</var> for each shelter, can be derived by using the following equation (round down the calculated number):</li>\n</ul>\n<pre><var>\\begin{aligned}D^\\mathrm{shelter}_{i, j} = p^\\mathrm{shelter}_j * D^\\mathrm{shelter}_i / 100\\end{aligned}</var>\n</pre>\n\n<p>-\nWhen calculating the disaster response score, if the electricity demand area and the shelter are located at the same vertex, the energy demand at the relevant vertex is the sum of the energy demand from both the electricity demand area and the shelter.</p>\n<h4>Work demand information (<code>work</code>)</h4>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"work\"}</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; N_\\mathrm{work} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li><var>N_\\mathrm{work}</var> is the number of work demand areas.</li>\n</ul>\n<h4>Work demand information in detail (<code>work [day] [id]</code>)</h4>\n<table class=\"table table-bordered\" style=\"table-layout: fixed;\">\n<thead>\n<tr>\n<th style=\"text-align:center\">Contestant</th>\n<th style=\"text-align:center\">Judge</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><var>\\mathrm{\"work\"}\\quad d \\quad i</var></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"><var>\\begin{aligned}&amp; x &amp; &amp; \\Delta^\\mathrm{work} &amp; &amp; I^\\mathrm{work}_\\mathrm{min} &amp; &amp; D^\\mathrm{work} \\\\&amp; \\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele} &amp; &amp; P^\\mathrm{work}_\\mathrm{charge} &amp; &amp; P^\\mathrm{work}_\\mathrm{discharge} &amp; &amp; \\eta^\\mathrm{work} \\\\&amp; A^{\\rm work}_1 &amp; &amp; \\cdots &amp; &amp; A^{\\rm work}_{N_{\\rm div}} \\end{aligned}</var></td>\n</tr>\n</tbody>\n</table>\n\n<h5>Details</h5>\n<ul>\n<li>[day] Returns the demand of the work in the work demand area specified by <code>i</code> on the day <code>d</code>.</li>\n<li><var>x</var> on the first line is the vertex number of the vertex where the work demand area exists, <var>\\Delta^\\mathrm{work}</var> is the amount of power required for one step work, <var>I^\\mathrm{work}_\\mathrm{min}</var> is the minimum number of continuous work steps, and <var>D^\\mathrm{work}</var> is the amount of work demand expressed by the number of steps.</li>\n<li>The first line gives information on the charging and discharging of the work machine.\n<var>\\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele}</var> is the maximum storrage capacity. <font color=\"red\"><var>P^\\mathrm{work}_\\mathrm{charge}</var></font> is the maximum charging speed,\n<font color=\"red\"><var>P^\\mathrm{work}_\\mathrm{discharge}</var></font> is the maximum discharge rate, and <var>\\eta^\\mathrm{work}</var> is the charge/discharge efficiency.</li>\n<li>The first line\nis the amount of work that can be done in the given time interval or for each interval time. For the given <var>N_{\\rm div}</var> numbers, the <var>i</var> number value <var>A^\\mathrm{work}_i</var> indicates the work availability in the given time interval <var>i</var>.</li>\n<li>Note that multiple work demands may be set at one vertex.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3><a id=\"Constraints-for-input-and-output\" class=\"anchor\"></a>Constraints for Input and Output</h3>\n<p>Of the following numbers, those described as <strong>float</strong> are given as floats, and the others are given as integers.</p>\n<h4>Input and output format 1</h4>\n<ul>\n<li><var>40 \\leq w_{\\mathrm{day}, i} \\leq 1000</var></li>\n<li><var>1000 \\leq \\alpha_\\mathrm{cost} \\leq 2000</var></li>\n<li><var>10000 \\leq C_\\mathrm{init} \\leq 800000</var></li>\n<li><var>0 \\leq w_\\mathrm{trans} \\leq 1</var> [float]</li>\n<li><var>0 \\leq w_\\mathrm{ele} \\leq 1</var> [float]</li>\n<li><var>0 \\leq w_\\mathrm{env} \\leq 1</var> [float]</li>\n<li><var>0 \\leq w_\\mathrm{acc} \\leq 1</var> [float]</li>\n<li><font color=\"red\"><var>0 \\leq w_\\mathrm{work} \\leq 1</var> </font>[float]</li>\n<li><var>15 \\leq \\alpha^\\mathrm{trans}_\\mathrm{fee} \\leq 20</var> [float]</li>\n<li><var>0.005 \\leq \\alpha^\\mathrm{trans}_\\mathrm{penalty} \\leq 0.2</var> [float]</li>\n<li><var>50 \\leq \\alpha^\\mathrm{trans}_\\mathrm{undelivered} \\leq 150</var>[float]</li>\n<li><font color=\"red\"> <var>500 \\leq \\alpha^\\mathrm{trans}_\\mathrm{canceled} \\leq 1500</var> </font> [float]</li>\n<li><var>0.003 \\leq \\alpha^\\mathrm{ele} \\leq 0.015</var> [float]</li>\n<li><font color=\"red\"> <var>0.05 \\leq  \\alpha^\\mathrm{ele}_\\mathrm{FE} \\leq 0.07</var></font> [float]</li>\n<li><var>0.004 \\leq \\alpha^\\mathrm{ele}_\\mathrm{buy} \\leq 0.02</var> [float]</li>\n<li><font color=\"red\"> <var>10000 \\leq \\alpha^\\mathrm{work} \\leq 300000</var></font></li>\n<li><var>20 \\leq \\Delta^\\mathrm{EV}_{\\mathrm{move}, i} \\leq 300</var></li>\n<li><font color=\"red\"><var>0.008 \\leq \\alpha^\\mathrm{env}_\\mathrm{fuel} \\leq 0.012</var></font> [float]</li>\n<li><var>0.0005 \\leq \\alpha^\\mathrm{env}_\\mathrm{buy} \\leq 0.0025 </var> [float]</li>\n<li><var>1000000 \\leq \\alpha^\\mathrm{acc} \\leq 8000000</var></li>\n<li><var>3000 \\leq T_\\mathrm{max} \\leq 10000</var></li>\n<li><var>2700 \\leq T_\\mathrm{last} \\leq 9000</var></li>\n<li><var>15 \\leq N_\\mathrm{div} \\leq 30</var></li>\n<li><var>2 \\leq N_\\mathrm{day} \\leq 16</var></li>\n<li><var>1 \\leq N_\\mathrm{acc} \\leq 8</var></li>\n<li><var>150 \\leq T_\\mathrm{grace} \\leq 700</var></li>\n<li><var>5000 \\leq V \\leq 20000</var></li>\n<li><var>5000 \\leq E \\leq 40000</var></li>\n<li><var>-60000 \\leq x_i \\leq 60000 (1 \\leq i \\leq V)</var></li>\n<li><var>-60000 \\leq y_i \\leq 60000 (1 \\leq i \\leq V)</var></li>\n<li><var>0 \\leq p_i \\leq 2000 (1 \\leq i \\leq V)</var></li>\n<li><var>1 \\leq A_i \\leq 5000 (1 \\leq i \\leq V)</var></li>\n<li><var>5 \\leq l_i \\leq 300 (1 \\leq i \\leq V)</var></li>\n<li><var>1 \\leq u_i \\leq V (1 \\leq i \\leq E)</var></li>\n<li><var>1 \\leq v_i \\leq V (1 \\leq i \\leq E)</var></li>\n<li><var>1 \\leq d_i \\leq 300 (1 \\leq i \\leq E)</var></li>\n<li><var>0 \\leq N_\\mathrm{demand} \\leq 12</var></li>\n<li><var>10 \\leq \\sigma_D^2 \\leq 30</var></li>\n<li><var>0 \\leq D^{\\rm predict}_i  \\leq 200 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>0 \\leq R^{\\rm predict}_i  \\leq 10 (1 \\leq i \\leq N_\\mathrm{div})</var> [float]</li>\n<li><var>2 \\leq N_\\mathrm{PV} \\leq 3</var></li>\n<li><var>2 \\leq N_\\mathrm{FE} \\leq 4</var></li>\n<li><var>2 \\leq N_\\mathrm{RB} \\leq 3</var></li>\n<li><var>2 \\leq N_\\mathrm{EVC} \\leq 5</var></li>\n<li><var>3 \\leq N_V \\leq 4</var></li>\n<li><var>10 \\leq A^\\mathrm{PV} \\leq 15</var></li>\n<li><var>50 \\leq C^\\mathrm{PV}_{\\mathrm{init}} \\leq 120</var></li>\n<li><var>0 \\leq P^\\mathrm{FE}_\\mathrm{min} \\leq 140</var></li>\n<li><var>0 \\leq P^\\mathrm{FE}_\\mathrm{max} \\leq 500</var></li>\n<li><var>50 \\leq \\eta^\\mathrm{FE}_\\mathrm{min} \\leq 600</var></li>\n<li><var>35 \\leq \\eta^\\mathrm{FE}_\\mathrm{max} \\leq 400</var></li>\n<li><var>0 \\leq C^\\mathrm{FE}_\\mathrm{init} \\leq 4000</var></li>\n<li><var>130 \\leq C^\\mathrm{FE}_\\mathrm{fuel} \\leq 200</var></li>\n<li><var>14 \\leq P^\\mathrm{RB}_\\mathrm{charge} \\leq 36</var></li>\n<li><var>20 \\leq P^\\mathrm{RB}_\\mathrm{discharge} \\leq 55</var></li>\n<li><var>80 \\leq \\eta^\\mathrm{RB} \\leq 99</var></li>\n<li><var>8000 \\leq \\mathrm{Cap}^\\mathrm{RB} \\leq 100000</var></li>\n<li><var>250 \\leq C^\\mathrm{RB}_\\mathrm{init} \\leq 1000</var></li>\n<li><var>0 \\leq P^\\mathrm{EVC}_\\mathrm{in} \\leq 500</var></li>\n<li><var>0 \\leq P^\\mathrm{EVC}_\\mathrm{out} \\leq 500</var></li>\n<li><var>0 \\leq C^\\mathrm{EVC}_\\mathrm{init} \\leq 2000</var></li>\n<li><var>40000 \\leq \\mathrm{Cap}^V_\\mathrm{ele} \\leq 900000</var></li>\n<li><var>2 \\leq \\mathrm{Cap}^V_\\mathrm{pop} \\leq 50</var></li>\n<li><var>300 \\leq P^V_{\\mathrm{charge}} \\leq 1200</var></li>\n<li><var>300 \\leq P^V_{\\mathrm{discharge}} \\leq 1200</var></li>\n<li><var>1500 \\leq C^V_{\\mathrm{init}} \\leq 8000</var></li>\n<li><var>20 \\leq \\Delta^V_{\\mathrm{move}} \\leq 300</var></li>\n<li><var>0 \\leq o_i \\leq 1000 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>4 \\leq N_\\mathrm{shelter} \\leq 16</var></li>\n<li><var>1 \\leq x^\\mathrm{shelter}_i \\leq V (1 \\leq i \\leq N_\\mathrm{shelter})</var></li>\n<li><var>20 \\leq p^\\mathrm{shelter}_i \\leq 800 (1 \\leq i \\leq N_\\mathrm{shelter})</var></li>\n<li><var>0 \\leq D^\\mathrm{shelter}_i \\leq 12 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>0 \\leq N_\\mathrm{work} \\leq 16</var></li>\n<li><var>1 \\leq x \\leq V</var></li>\n<li><var>20 \\leq \\Delta^\\mathrm{work} \\leq 360</var></li>\n<li><var>50 \\leq I^\\mathrm{work}_\\mathrm{min} \\leq 333</var></li>\n<li><var>1400 \\leq D^\\mathrm{work} \\leq 6000</var></li>\n<li><var>43200 \\leq \\mathrm{Cap}^\\mathrm{work}_\\mathrm{ele} \\leq 186000</var></li>\n<li><var>55 \\leq P^\\mathrm{work}_\\mathrm{charge} \\leq 450</var></li>\n<li><var>85 \\leq P^\\mathrm{work}_\\mathrm{discharge} \\leq 720</var></li>\n<li><var>80 \\leq \\eta^\\mathrm{work} \\leq 99</var></li>\n<li><var>0 \\leq A^{\\rm work}_{i} \\leq 1 (1 \\leq i \\leq N_\\mathrm{div})</var></li>\n<li><var>D^\\mathrm{work} \\leq T_\\mathrm{max}\\sum_{i = 1}^{N_\\mathrm{div}}A^{\\rm work}_{i} / N_\\mathrm{div}</var></li>\n</ul>\n<h4>Input and output format 2</h4>\n<p></p><ul>\n<li> <var>S_\\mathrm{trans}</var> [float] </li>\n<li> <var>S_\\mathrm{ele}</var> [float] </li>\n<li> <var>S_\\mathrm{env}</var> [float] </li>\n<li> <var>1 \\leq x^\\mathrm{grid}_\\mathrm{pos} \\leq V</var> </li>\n<li> <var>0 \\leq \\mathrm{Chg}^\\mathrm{grid}_\\mathrm{init} \\leq \\mathrm{Cap}^\\mathrm{RB} A^\\mathrm{grid}_\\mathrm{RB}</var> </li>\n<ul>\n<li> <var>\\mathrm{Cap}^\\mathrm{RB}</var> is the battery capacity of the installed RB and <var>A^\\mathrm{grid}_\\mathrm{RB}</var> represents amount of the RB product to be installed. </li>\n</ul>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{PV} \\leq N_\\mathrm{PV}</var> </li>\n<li> <var>0 \\leq A^\\mathrm{grid}_\\mathrm{PV}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{FE} \\leq N_\\mathrm{FE}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{RB} \\leq N_\\mathrm{RB}</var> </li>\n<li> <var>0 \\leq A^\\mathrm{grid}_\\mathrm{RB}</var> </li>\n<li> <var>1 \\leq \\mathrm{type}^\\mathrm{grid}_\\mathrm{EVC} \\leq N_\\mathrm{EVC}</var> </li>\n<li> <var>1 \\leq x^\\mathrm{EV}_\\mathrm{pos} \\leq V</var> </li>\n<li> <var>1 \\leq \\mathrm{Chg}^\\mathrm{EV}_\\mathrm{init} \\leq \\mathrm{Cap}^V_\\mathrm{ele}</var> </li>\n<ul>\n<li> <var>\\mathrm{Cap}^V_\\mathrm{ele}</var> is an installed EV battery storage capacity. </li>\n</ul>\n<li> <var>1 \\leq \\mathrm{type}_\\mathrm{EV} \\leq N_\\mathrm{V}</var> </li>\n</ul><p></p>\n<h4>Input and output format 3</h4>\n<ul>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{grid}_i</var></li>\n<li><var>\\mathrm{pw}^\\mathrm{actual}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{excess}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{FE}_i</var></li>\n<li><var>0 \\leq \\mathrm{pw}^\\mathrm{buy}_i</var></li>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{EV}_i</var></li>\n<li><var>1 \\leq u_i \\leq V</var></li>\n<li><var>1 \\leq v_i \\leq V</var></li>\n<li><var>0 \\leq \\mathrm{dist}_i \\leq d</var>\nHere, <var>d</var> is the length of the side where the EV is currently located. If the EV is just above one of the vertices, then <var>d = 0</var>.</li>\n<li><var>0 \\leq N^\\mathrm{order}_i \\leq N_\\mathrm{div}*1000</var></li>\n<li><var>1 \\leq o_{i, N^\\mathrm{order}_1} \\leq N^\\mathrm{order}</var></li>\n<li><var>0 \\leq \\mathrm{Chg}^\\mathrm{work}_i</var></li>\n<li><var>1 \\leq x^\\mathrm{work}_i \\leq V</var></li>\n<li><var>0 \\leq W^\\mathrm{work}_i</var></li>\n<li><var>0 \\leq w^\\mathrm{work}_i</var></li>\n<li><var>0 \\leq N_\\mathrm{order} \\leq 1000 * N_\\mathrm{div}</var></li>\n<li><var>1 \\leq \\mathrm{id}_i \\leq 1000 * N_\\mathrm{div}</var></li>\n<li><var>1 \\leq w_i \\leq V</var></li>\n<li><var>1 \\leq z_i \\leq V</var></li>\n<li><var>-2 \\leq \\mathrm{state}_i \\leq 2</var></li>\n<li><var>0 \\leq \\mathrm{time}_i \\leq T_\\mathrm{last}</var></li>\n</ul>\n<p><a id=\"sample-code-B\" class=\"anchor\"></a></p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Code B</h3>\n<p>A software toolkit for scoring and testing on a local contestant environment is provided through the following <a href=\"https://img.atcoder.jp/hokudai-hitachi2021/toolkit_B.zip\">link</a>. Sample code for beginners is also available.</p>\n<ul>\n<li>Test case</li>\n<li>Judge program</li>\n<li>Sample code</li>\n</ul></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/hokudai-hitachi2021/tasks/hokudai_hitachi2021_b"}