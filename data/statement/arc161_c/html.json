{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>500</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>N</var> 頂点の木が与えられます．\n頂点には <var>1</var> から <var>N</var> までの番号が付いており，<var>i</var> 番目の辺は頂点 <var>A_i</var> と頂点 <var>B_i</var> を結んでいます．\nまた，すべての頂点について，<b>接続する辺の本数は奇数</b>です．</p>\n<p>与えられた木の各頂点を黒 ( <code>B</code> ) か白 ( <code>W</code> ) のいずれかの色で塗ります．\nこのとき，「各頂点の色（ <code>B</code> または <code>W</code> ）を頂点の番号順に並べて得られる文字列」を<b>色の列</b>と呼びます．</p>\n<p>色の列 <var>S</var> が与えられます．\nすべての頂点に色が塗られた状態で以下の操作を <var>1</var> 回行った結果，色の列が <var>S</var> となることがあり得るかどうかを判定し，あり得るなら操作を行う前の色の列として適切なものを <var>1</var> つ求めてください．</p>\n<p><b>操作:</b> 各頂点 <var>k = 1, 2, \\dots, N</var> に対して，辺で結ばれた頂点の色のうち過半数を占めるものを <var>C_k</var> とする．\nすべての頂点について同時に，頂点 <var>k</var> の色を <var>C_k</var> に塗り替える．</p>\n<p><var>T</var> 個のテストケースが与えられるので，それぞれについて答えてください．</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>T \\geq 1</var></li>\n<li><var>N \\geq 2</var></li>\n<li><var>1</var> つの入力に含まれるテストケースについて，<var>N</var> の総和は <var>2 \\times 10^5</var> 以下である．</li>\n<li><var>1 \\leq A_i &lt; B_i \\leq N \\ \\ (1 \\leq i \\leq N - 1)</var></li>\n<li>与えられる辺 <var>(A_i, B_i) \\ (1 \\leq i \\leq N - 1)</var> は木をなす．</li>\n<li>各頂点 <var>k \\ (1 \\leq k \\leq N)</var> は <var>A_i, B_i \\ (1 \\leq i \\leq N - 1)</var> として<b>合計奇数回</b>現れる．</li>\n<li><var>S</var> は <code>B</code>, <code>W</code> からなる長さ <var>N</var> の文字列である．</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる．</p>\n<pre><var>T</var>\n<var>\\mathrm{case}_1</var>\n<var>\\mathrm{case}_2</var>\n<var>\\vdots</var>\n<var>\\mathrm{case}_T</var>\n</pre>\n<p>各テストケース <var>\\mathrm{case}_i \\ (1 \\leq i \\leq T)</var> は以下の形式である．</p>\n<pre><var>N</var>\n<var>A_1</var> <var>B_1</var>\n<var>A_2</var> <var>B_2</var>\n<var>\\vdots</var>\n<var>A_{N-1}</var> <var>B_{N-1}</var>\n<var>S</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p><var>T</var> 行出力せよ． \n<var>i</var> 行目には，<var>i</var> 番目のテストケースについて，操作の結果として色の列が <var>S</var> となることがあり得るなら操作を行う前の色の列として適切なものを，あり得ないなら <code>-1</code> を出力せよ．\n操作を行う前の色の列として適切なものが複数存在する場合，そのような色の列のうちどれを出力しても正答と見なされる．</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>2\n4\n1 2\n1 3\n1 4\nBWWW\n4\n1 2\n1 3\n1 4\nBBWW\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>WBBW\n-1\n</pre>\n<p><var>1</var> つ目のテストケースについて，操作を行う前の色の列が <code>WBBW</code> であったとします．\nこのとき，</p>\n<ul>\n<li>頂点 <var>1</var> について，辺で結ばれた頂点 <var>2, 3, 4</var> の色はそれぞれ <code>B</code>, <code>B</code>, <code>W</code> であり，過半数を占めるのは <var>C_1 = {}</var><code>B</code>，</li>\n<li>頂点 <var>2</var> について，辺で結ばれた頂点 <var>1</var> の色は <code>W</code> であり，過半数を占めるのは <var>C_2 = {}</var><code>W</code>，</li>\n<li>頂点 <var>3</var> について，辺で結ばれた頂点 <var>1</var> の色は <code>W</code> であり，過半数を占めるのは <var>C_3 = {}</var><code>W</code>，</li>\n<li>頂点 <var>4</var> について，辺で結ばれた頂点 <var>1</var> の色は <code>W</code> であり，過半数を占めるのは <var>C_4 = {}</var><code>W</code> となります．</li>\n</ul>\n<p>したがって，操作後の色の列は <code>BWWW</code> となり，条件を満たします．\n同様に，操作前の色の列が <code>WBBB</code>, <code>WBWB</code>, <code>WWBB</code> であった場合にも，操作後の色の列は <code>BWWW</code> となり，これらのうちどれを出力しても正答と見なされます。</p>\n<p><var>2</var> つ目のテストケースについて，入力された木において操作を行った結果，色の列が <code>BBWW</code> となることはあり得ません．</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>500</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>You are given a tree with <var>N</var> vertices.\nThe vertices are labeled from <var>1</var> to <var>N</var>, and the <var>i</var>-th edge connects vertex <var>A_i</var> and vertex <var>B_i</var>.\nMoreover, for every vertex, the <b>number of incident edges is odd</b>.</p>\n<p>You will color each vertex of the given tree either black ( <code>B</code> ) or white ( <code>W</code> ).\nHere, the string obtained by arranging the colors ( <code>B</code> or <code>W</code> ) of the vertices in the order of vertex labels is called a <b>color sequence</b>.</p>\n<p>You are given a color sequence <var>S</var>.\nDetermine whether the color sequence <var>S</var> can result from performing the following operation once when all vertices are colored, and if it can, find one possible color sequence before the operation.</p>\n<p><b>Operation:</b> For each vertex <var>k = 1, 2, \\dots, N</var>, let <var>C_k</var> be the color that occupies the majority (more than half) of the colors of the vertices connected to <var>k</var> by an edge.\nFor every vertex <var>k</var>, change its color to <var>C_k</var> simultaneously.</p>\n<p>There are <var>T</var> test cases to solve.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>T \\geq 1</var></li>\n<li><var>N \\geq 2</var></li>\n<li>The sum of <var>N</var> over the test cases in each input file is at most <var>2 \\times 10^5</var>.</li>\n<li><var>1 \\leq A_i &lt; B_i \\leq N \\ \\ (1 \\leq i \\leq N - 1)</var></li>\n<li>The given edges <var>(A_i, B_i) \\ (1 \\leq i \\leq N - 1)</var> form a tree.</li>\n<li>Each vertex <var>k \\ (1 \\leq k \\leq N)</var> appears an <b>odd number of times in total</b> as <var>A_i, B_i \\ (1 \\leq i \\leq N - 1)</var>.</li>\n<li><var>S</var> is a string of length <var>N</var> consisting of <code>B</code> and <code>W</code>.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>T</var>\n<var>\\mathrm{case}_1</var>\n<var>\\mathrm{case}_2</var>\n<var>\\vdots</var>\n<var>\\mathrm{case}_T</var>\n</pre>\n<p>Each test case <var>\\mathrm{case}_i \\ (1 \\leq i \\leq T)</var> is in the following format:</p>\n<pre><var>N</var>\n<var>A_1</var> <var>B_1</var>\n<var>A_2</var> <var>B_2</var>\n<var>\\vdots</var>\n<var>A_{N-1}</var> <var>B_{N-1}</var>\n<var>S</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print <var>T</var> lines.\nFor the <var>i</var>-th line, if the color sequence <var>S</var> can result from performing the operation in the <var>i</var>-th test case, print one possible color sequence before the operation; otherwise, print <code>-1</code>.\nIf there are multiple possible color sequences before the operation, any of them will be considered correct.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>2\n4\n1 2\n1 3\n1 4\nBWWW\n4\n1 2\n1 3\n1 4\nBBWW\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>WBBW\n-1\n</pre>\n<p>For the first test case, suppose the color sequence before the operation was <code>WBBW</code>.\nIn this case,</p>\n<ul>\n<li>for vertex <var>1</var>, the colors of the connected vertices <var>2, 3, 4</var> are <code>B</code>, <code>B</code>, <code>W</code>, respectively, with <var>C_1 = {}</var><code>B</code> occupying the majority;</li>\n<li>for vertex <var>2</var>, the color of the connected vertex <var>1</var> is <code>W</code>, with <var>C_2 = {}</var><code>W</code> occupying the majority;</li>\n<li>for vertex <var>3</var>, the color of the connected vertex <var>1</var> is <code>W</code>, with <var>C_3 = {}</var><code>W</code> occupying the majority;</li>\n<li>for vertex <var>4</var>, the color of the connected vertex <var>1</var> is <code>W</code>, with <var>C_4 = {}</var><code>W</code> occupying the majority.</li>\n</ul>\n<p>Therefore, the color sequence after the operation is <code>BWWW</code>, satisfying the condition.\nSimilarly, if the color sequence before the operation was <code>WBBB</code>, <code>WBWB</code>, or <code>WWBB</code>, the color sequence after the operation would be <code>BWWW</code>, and any of these are considered correct.</p>\n<p>For the second test case, the color sequence <code>BBWW</code> cannot result from the operation on the given tree.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/arc161/tasks/arc161_c"}