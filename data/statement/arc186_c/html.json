{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>900</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>球橋さんと箱木さんはボールと箱を使ったゲームをします。</p>\n<p>最初、球橋さんは <var>M</var> 種類のボールをそれぞれ <var>10^{100}</var> 個ずつ持っていて、 箱木さんは <var>10^{100}</var> 円持っています。\nまた、<var>N</var> 個の箱があり、<var>i</var> 番目の箱の容量は <var>V_i</var> で、値段は <var>P_i</var> 円です。ゲーム中、箱木さんはいつでも好きな箱を買うことができます。</p>\n<p>このゲームでは、ゲームが終わるまで以下の操作を繰り返します。</p>\n<ol>\n<li>球橋さんはボールを <var>1</var> つ選び、箱木さんに渡す。</li>\n<li>箱木さんは渡されたボールを受け取るか、受け取らずにゲームを終えるかを選ぶ。</li>\n<li>ボールを受け取った場合、箱木さんは購入済みの箱を <var>1</var> つ選び、受け取ったボールを入れる。</li>\n<li>ボールを入れた箱が以下の条件を満たしている場合、箱木さんは <var>1</var> 円をもらう。そうでない場合、ゲームを終える。<ul>\n<li>箱の中のボールの個数は、その箱の容量以下である。</li>\n<li>箱の中のボールの種類は、すべて同じである。</li>\n</ul>\n</li>\n</ol>\n<p>球橋さんは、ゲーム終了時の箱木さんの所持金がなるべく少なくなるための最適な行動をし、反対に、箱木さんはなるべく多くなるための最適な行動をします。\nゲームを通して、箱木さんの所持金はいくら増えますか？</p>\n<p>ただし、両者ともにすべての情報が公開されているとします。特に、球橋さんは、それぞれの箱について、容量と値段、どの種類のボールがいくつ入っているかを見ることができます。\nまた、箱木さんの初期の所持金は十分多く、お金が足りなくて箱が買えなくなることはないことに注意してください。</p>\n<p><var>1</var> つの入力ファイルにつき、<var>T</var> 個のテストケースを解いてください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>1\\le T,N,M\\le 3\\times 10^5</var></li>\n<li><var>1\\le V_i,P_i \\le 10^9</var></li>\n<li><var>T</var> 個のテストケースに対する <var>N</var> の総和は <var>3\\times 10^5</var> 以下</li>\n<li>入力はすべて整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。ここで <var>\\mathrm{case}_i</var> は <var>i</var> 番目のテストケースを意味する。</p>\n<pre><var>T</var>\n<var>\\mathrm{case}_1</var>\n<var>\\mathrm{case}_2</var>\n<var>\\vdots</var>\n<var>\\mathrm{case}_T</var>\n</pre>\n<p>各テストケースは以下の形式で与えられる。</p>\n<pre><var>N</var> <var>M</var>\n<var>V_1</var> <var>P_1</var>\n<var>V_2</var> <var>P_2</var>\n<var>\\vdots</var>\n<var>V_N</var> <var>P_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>両者が最適に行動したときの、箱木さんの最終的な所持金と最初の所持金の差を出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>3\n3 2\n1 1000000000\n3 1\n3 1\n1 300000\n1000000000 1\n10 4\n22 5\n26 45\n72 21\n47 39\n97 2\n75 35\n82 24\n17 46\n32 22\n28 67\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>2\n0\n28\n</pre>\n<p>最初のテストケースでは <var>2</var> 種類のボールと <var>3</var> つの箱を使います。\n<var>2</var> 種類のボールをそれぞれ白のボールと黒のボールと呼び、<var>i</var> 種類目の箱を箱 <var>i</var> と呼ぶことにします。\nこのテストケースについて、所持金が <var>2</var> 円増えるゲームの進み方の例を示します。</p>\n<ol>\n<li>球橋さんが白のボールを選び、渡す。</li>\n<li>箱木さんはボールを受け取り、箱 <var>2</var> を <var>1</var> 円で買って白のボールを入れる。<ul>\n<li>箱 <var>2</var> には白のボールが <var>1</var> 個入っている。これは条件を満たしているため、箱木さんは <var>1</var> 円をもらう。</li>\n</ul>\n</li>\n<li>球橋さんが白のボールを選び、渡す。</li>\n<li>箱木さんはボールを受け取り、箱 <var>2</var> に白のボールを入れる。<ul>\n<li>箱 <var>2</var> には白のボールが <var>2</var> 個入っている。これは条件を満たしているため、箱木さんは <var>1</var> 円をもらう。</li>\n</ul>\n</li>\n<li>球橋さんが黒のボールを選び、渡す。</li>\n<li>箱木さんはボールを受け取り、箱 <var>3</var> を <var>1</var> 円で買って黒のボールを入れる。<ul>\n<li>箱 <var>3</var> には黒のボールが <var>1</var> 個入っている。これは条件を満たしているため、箱木さんは <var>1</var> 円をもらう。</li>\n</ul>\n</li>\n<li>球橋さんが白のボールを選び、渡す。</li>\n<li>箱木さんはボールを受け取り、箱 <var>2</var> に白のボールを入れる。<ul>\n<li>箱 <var>2</var> には白のボールが <var>3</var> 個入っている。これは条件を満たしているため、箱木さんは <var>1</var> 円をもらう。</li>\n</ul>\n</li>\n<li>球橋さんが白のボールを選び、渡す。</li>\n<li>箱木さんは受け取らずにゲームを終えることを選ぶ。</li>\n</ol>\n<p>最終的に、箱 <var>2</var> には白のボールが <var>3</var> 個、箱 <var>3</var> には黒のボールが <var>1</var> 個入っています。\n合計で <var>2</var> 円使って <var>4</var> 円もらったので、所持金は <var>2</var> 円増えました。</p>\n<p><var>2</var> つめのテストケースでは、球橋さんは、箱木さんにお金を稼がせないような行動ができます。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>900</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>Mr. Ball and Mr. Box will play a game with balls and boxes.</p>\n<p>Initially, Mr. Ball has <var>10^{100}</var> balls of each of <var>M</var> different types, and Mr. Box has <var>10^{100}</var> yen.\nThere are <var>N</var> boxes, where the <var>i</var>-th box has capacity <var>V_i</var> and costs <var>P_i</var> yen. During the game, Mr. Box can buy any box at any time.</p>\n<p>In this game, the following operations are repeated until the game ends:</p>\n<ol>\n<li>Mr. Ball chooses one ball and gives it to Mr. Box.</li>\n<li>Mr. Box either accepts the ball or ends the game without accepting it.</li>\n<li>If Mr. Box accepts the ball, he chooses one of his purchased boxes and puts the ball in it.</li>\n<li>If the box with the ball satisfies the following conditions, Mr. Box receives <var>1</var> yen. Otherwise, the game ends.<ul>\n<li>The number of balls in the box does not exceed its capacity.</li>\n<li>All balls in the box are of the same type.</li>\n</ul>\n</li>\n</ol>\n<p>Mr. Ball will play optimally to minimize Mr. Box's final money, while Mr. Box will play optimally to maximize it.\nHow much will Mr. Box's money increase throughout the game?</p>\n<p>Here, both players have access to all information. In particular, Mr. Ball can see the capacity, price, and contents (type and number of balls) of each box.\nAlso, note that Mr. Box's initial money is large enough that he will never run out of money to buy boxes.</p>\n<p>Solve <var>T</var> test cases for each input file.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>1\\le T,N,M\\le 3\\times 10^5</var></li>\n<li><var>1\\le V_i,P_i \\le 10^9</var></li>\n<li>The sum of <var>N</var> over the <var>T</var> test cases is at most <var>3\\times 10^5</var>.</li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format, where <var>\\mathrm{case}_i</var> represents the <var>i</var>-th test case:</p>\n<pre><var>T</var>\n<var>\\mathrm{case}_1</var>\n<var>\\mathrm{case}_2</var>\n<var>\\vdots</var>\n<var>\\mathrm{case}_T</var>\n</pre>\n<p>Each test case is given in the following format:</p>\n<pre><var>N</var> <var>M</var>\n<var>V_1</var> <var>P_1</var>\n<var>V_2</var> <var>P_2</var>\n<var>\\vdots</var>\n<var>V_N</var> <var>P_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the difference between Mr. Box's final and initial money when both players play optimally.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>3\n3 2\n1 1000000000\n3 1\n3 1\n1 300000\n1000000000 1\n10 4\n22 5\n26 45\n72 21\n47 39\n97 2\n75 35\n82 24\n17 46\n32 22\n28 67\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>2\n0\n28\n</pre>\n<p>In the first test case, there are two types of balls and three boxes.\nLet us call the two types of balls white and black balls, and call the <var>i</var>-th box box <var>i</var>.\nHere is an example of how the game could proceed where the money increases by <var>2</var> yen.</p>\n<ol>\n<li>Mr. Ball chooses and gives a white ball.</li>\n<li>Mr. Box accepts the ball, buys box <var>2</var> for <var>1</var> yen, and puts the white ball in it.<ul>\n<li>Box <var>2</var> contains <var>1</var> white ball. This satisfies the conditions, so Mr. Box receives <var>1</var> yen.</li>\n</ul>\n</li>\n<li>Mr. Ball chooses and gives a white ball.</li>\n<li>Mr. Box accepts the ball and puts it in box <var>2</var>.<ul>\n<li>Box <var>2</var> contains <var>2</var> white balls. This satisfies the conditions, so Mr. Box receives <var>1</var> yen.</li>\n</ul>\n</li>\n<li>Mr. Ball chooses and gives a black ball.</li>\n<li>Mr. Box accepts the ball, buys box <var>3</var> for <var>1</var> yen, and puts the black ball in it.<ul>\n<li>Box <var>3</var> contains <var>1</var> black ball. This satisfies the conditions, so Mr. Box receives <var>1</var> yen.</li>\n</ul>\n</li>\n<li>Mr. Ball chooses and gives a white ball.</li>\n<li>Mr. Box accepts the ball and puts it in box <var>2</var>.<ul>\n<li>Box <var>2</var> contains <var>3</var> white balls. This satisfies the conditions, so Mr. Box receives <var>1</var> yen.</li>\n</ul>\n</li>\n<li>Mr. Ball chooses and gives a white ball.</li>\n<li>Mr. Box chooses to end the game without accepting it.</li>\n</ol>\n<p>Finally, box <var>2</var> contains <var>3</var> white balls and box <var>3</var> contains <var>1</var> black ball.\nMr. Box spent <var>2</var> yen and received <var>4</var> yen, so his money increased by <var>2</var> yen.</p>\n<p>In the second test case, Mr. Ball can play in a way that prevents Mr. Box from earning any money.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/arc186/tasks/arc186_c"}