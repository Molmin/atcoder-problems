{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>1600</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><em>平衡ネットワーク</em> とは、左から右へと延びる <var>N</var> 本のケーブルと、それぞれ <var>2</var> 本のケーブルを繋ぐ <var>M</var> 個の <em>平衡器</em> からなる抽象機械です。\nケーブルには上から順に <var>1</var> から <var>N</var> までの番号が、平衡器には左から順に <var>1</var> から <var>M</var> までの番号がついています。平衡器 <var>i</var> はケーブル <var>x_i, y_i</var> (<var>x_i &lt; y_i</var>) を繋ぎます。</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic1-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic1-small-2acea94b.png\">\n</div>\n\n<p>各平衡器は <i>上</i> または <i>下</i> のいずれかの状態に設定します。</p>\n<p><var>1</var> 枚のコインが、いずれかのケーブルに沿ってどの平衡器よりも左に位置する点から右へと流れ始めるとします。\nこれから、このコインはすべての平衡器のもとをちょうど一度ずつ通過します。\nコインが平衡器 <var>i</var> の位置に来たとき、次のことが起こります。</p>\n<ul>\n<li>コインがケーブル <var>x_i</var> に沿って流れており、かつ平衡器 <var>i</var> の状態が下であるなら、コインはケーブル <var>y_i</var> に移ってから再び右へと流れる。</li>\n<li>コインがケーブル <var>y_i</var> に沿って流れており、かつ平衡器 <var>i</var> の状態が上であるなら、コインはケーブル <var>x_i</var> に移ってから再び右へと流れる。</li>\n<li>上記のいずれでもないなら、コインが別のケーブルに移ることはない。</li>\n</ul>\n<p>平衡ネットワークの状態とは、すべての平衡器の状態を表す長さ <var>M</var> の文字列です。\nこの文字列の <var>i</var> 文字目は、平衡器 <var>i</var> の状態が上なら <code>^</code>、下なら <code>v</code> です。</p>\n<p>平衡ネットワークの状態が <em>均一的</em> であるとは、あるケーブル <var>w</var> が存在して、コインがどのケーブルから流れ始めたとしてもケーブル <var>w</var> に行き着き、これに沿って永遠に流れることをいいます。それ以外の場合、平衡ネットワークの状態は <em>非均一的</em> であるといわれます。</p>\n<p>整数 <var>T</var> (<var>1 \\le T \\le 2</var>) が与えられます。次の問いに答えてください。</p>\n<ul>\n<li><var>T = 1</var> の場合は、このネットワークの均一的な状態をいずれかひとつ求めるか、そのような状態が存在しないことを検出せよ。</li>\n<li><var>T = 2</var> の場合は、このネットワークの非均一的な状態をいずれかひとつ求めるか、そのような状態が存在しないことを検出せよ。</li>\n</ul>\n<p>なお、いずれか <var>1</var> 種類の問いにのみ正しく答えると部分点が得られます。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>2 \\leq N \\leq 50000</var></li>\n<li><var>1 \\leq M \\leq 100000</var></li>\n<li><var>1 \\leq T \\leq 2</var></li>\n<li><var>1 \\leq x_i &lt; y_i \\leq N</var></li>\n<li>入力中のすべての値は整数である。</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>部分点</h3><ul>\n<li><var>T = 1</var> であるようなテストケースすべてに正解すると、<var>800</var> 点が与えられる。</li>\n<li><var>T = 2</var> であるようなテストケースすべてに正解すると、<var>800</var> 点が与えられる。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var> <var>M</var> <var>T</var>\n<var>x_1</var> <var>y_1</var>\n<var>x_2</var> <var>y_2</var>\n<var>:</var>\n<var>x_M</var> <var>y_M</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p><var>T = 1</var> の場合は与えられたネットワークの均一的な状態をいずれかひとつ出力し、<var>T = 2</var> の場合は非均一的な状態をいずれかひとつ出力せよ。ただし、そのような状態が存在しないなら <code>-1</code> と出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>4 5 1\n1 3\n2 4\n1 2\n3 4\n2 3\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>^^^^^\n</pre>\n\n<p>どのケーブルから流れ始めてもコインはケーブル <var>1</var> に行き着くため、この状態は均一的です。</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic2-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic2-small-2acea94b.png\">\n</div>\n\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>4 5 2\n1 3\n2 4\n1 2\n3 4\n2 3\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>v^^^^\n</pre>\n\n<p>流れ始めるケーブル次第で、コインはケーブル <var>1</var> にもケーブル <var>2</var> にも行き着くことがあるため、この状態は非均一的です。</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic3final-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic3final-small-2acea94b.png\">\n</div>\n\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>3 1 1\n1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>-1\n</pre>\n\n<p>均一的な状態が存在しません。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 4</h3><pre>2 1 2\n1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 4</h3><pre>-1\n</pre>\n\n<p>非均一的な状態が存在しません。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>1600</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>A <i>balancing network</i> is an abstract device built up of <var>N</var> wires, thought of as running from left to right,\nand <var>M</var> <i>balancers</i> that connect pairs of wires. The wires are numbered from <var>1</var> to <var>N</var> from top to bottom,\nand the balancers are numbered from <var>1</var> to <var>M</var> from left to right.\nBalancer <var>i</var> connects wires <var>x_i</var> and <var>y_i</var> (<var>x_i &lt; y_i</var>).</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic1-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic1-small-2acea94b.png\">\n</div>\n\n<p>Each balancer must be in one of two states: <i>up</i> or <i>down</i>.</p>\n<p>Consider a token that starts moving to the right along some wire at a point to the left of all balancers.\nDuring the process, the token passes through each balancer exactly once.\nWhenever the token encounters balancer <var>i</var>, the following happens:</p>\n<ul>\n<li>If the token is moving along wire <var>x_i</var> and balancer <var>i</var> is in the down state, the token moves down to wire <var>y_i</var> and continues moving to the right.</li>\n<li>If the token is moving along wire <var>y_i</var> and balancer <var>i</var> is in the up state, the token moves up to wire <var>x_i</var> and continues moving to the right.</li>\n<li>Otherwise, the token doesn't change the wire it's moving along.</li>\n</ul>\n<p>Let a state of the balancing network be a string of length <var>M</var>, describing the states of all balancers.\nThe <var>i</var>-th character is <code>^</code> if balancer <var>i</var> is in the up state, and <code>v</code> if balancer <var>i</var> is in the down state.</p>\n<p>A state of the balancing network is called <i>uniforming</i> if a wire <var>w</var> exists such that, regardless of the starting wire,\nthe token will always end up at wire <var>w</var> and run to infinity along it. Any other state is called <i>non-uniforming</i>.</p>\n<p>You are given an integer <var>T</var> (<var>1 \\le T \\le 2</var>). Answer the following question:</p>\n<ul>\n<li>If <var>T = 1</var>, find any uniforming state of the network or determine that it doesn't exist.</li>\n<li>If <var>T = 2</var>, find any non-uniforming state of the network or determine that it doesn't exist.</li>\n</ul>\n<p>Note that if you answer just one kind of questions correctly, you can get partial score.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>2 \\leq N \\leq 50000</var></li>\n<li><var>1 \\leq M \\leq 100000</var></li>\n<li><var>1 \\leq T \\leq 2</var></li>\n<li><var>1 \\leq x_i &lt; y_i \\leq N</var></li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Partial Score</h3><ul>\n<li><var>800</var> points will be awarded for passing the testset satisfying <var>T = 1</var>.</li>\n<li><var>800</var> points will be awarded for passing the testset satisfying <var>T = 2</var>.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>M</var> <var>T</var>\n<var>x_1</var> <var>y_1</var>\n<var>x_2</var> <var>y_2</var>\n<var>:</var>\n<var>x_M</var> <var>y_M</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print any uniforming state of the given network if <var>T = 1</var>, or any non-uniforming state if <var>T = 2</var>. If the required state doesn't exist, output <code>-1</code>.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>4 5 1\n1 3\n2 4\n1 2\n3 4\n2 3\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>^^^^^\n</pre>\n\n<p>This state is uniforming: regardless of the starting wire, the token ends up at wire <var>1</var>.</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic2-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic2-small-2acea94b.png\">\n</div>\n\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>4 5 2\n1 3\n2 4\n1 2\n3 4\n2 3\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>v^^^^\n</pre>\n\n<p>This state is non-uniforming: depending on the starting wire, the token might end up at wire <var>1</var> or wire <var>2</var>.</p>\n<div style=\"text-align: center;\">\n<img alt=\"pic3final-small-2acea94b.png\" src=\"https://img.atcoder.jp/agc041/pic3final-small-2acea94b.png\">\n</div>\n\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>3 1 1\n1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>-1\n</pre>\n\n<p>A uniforming state doesn't exist.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 4</h3><pre>2 1 2\n1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 4</h3><pre>-1\n</pre>\n\n<p>A non-uniforming state doesn't exist.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/agc041/tasks/agc041_e"}