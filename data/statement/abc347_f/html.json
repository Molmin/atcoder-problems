{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>525</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>N\\times N</var> のマス目があり、上から <var>i</var> 行目、左から <var>j</var> 列目 <var>(1\\leq i,j\\leq N)</var> のマスには整数 <var>A _ {i,j}</var> が書かれています。</p>\n<p>整数 <var>M</var> が与えられます。\n<var>M\\times M</var> のマス目を重ならないように <var>3</var> つ選ぶときの、選んだマス目に書かれている整数の総和としてありえる最大値を求めてください。</p>\n<details><summary>問題の厳密な定義</summary>\n整数の <var>6</var> つ組 <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)</var> が次の <var>3</var> つの条件を満たしているとき、<strong>良い <var>6</var> つ組</strong>ということにします。\n\n<ul>\n<li><var>1\\leq i _ k\\leq N-M+1\\ (k=1,2,3)</var></li>\n<li><var>1\\leq j _ k\\leq N-M+1\\ (k=1,2,3)</var></li>\n<li><var>k\\neq l\\ (k,l\\in\\lbrace1,2,3\\rbrace)</var> ならば、<var>\\lbrace(i,j)\\mid i _ k\\leq i\\lt i _ k+M\\wedge j _ k\\leq j\\lt j _ k+M\\rbrace</var> と <var>\\lbrace(i,j)\\mid i _ l\\leq i\\lt i _ l+M\\wedge j _ l\\leq j\\lt j _ l+M\\rbrace</var> に共通部分はない</li>\n</ul>\n\n良い <var>6</var> つ組 <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)</var> に対する値 <var>\\displaystyle \\sum _ {k=1} ^ 3\\sum _ {i=i _ k} ^ {i _ k+M-1}\\sum _ {j=j _ k} ^ {j _ k+M-1}A _ {i,j}</var> の最大値を求めてください。\n\nこの問題の制約のもとで良い <var>6</var> つ組が存在することが示せます。\n</details>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>2\\leq N\\leq 1000</var></li>\n<li><var>1\\leq M\\leq N/2</var></li>\n<li><var>0\\leq A _ {i,j}\\leq10 ^ 9</var></li>\n<li>入力はすべて整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var> <var>M</var>\n<var>A _ {1,1}</var> <var>A _ {1,2}</var> <var>\\ldots</var> <var>A _ {1,N}</var>\n<var>A _ {2,1}</var> <var>A _ {2,2}</var> <var>\\ldots</var> <var>A _ {2,N}</var>\n <var>\\vdots</var>  <var>\\ \\vdots</var>  <var>\\ddots</var>  <var>\\vdots</var>\n<var>A _ {N,1}</var> <var>A _ {N,2}</var> <var>\\ldots</var> <var>A _ {N,N}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>7 3\n3 1 4 1 5 9 2\n6 5 3 5 8 9 7\n9 3 2 3 8 4 6\n2 6 4 3 3 8 3\n2 7 9 5 0 2 8\n8 4 1 9 7 1 6\n9 3 9 9 3 7 5\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>154\n</pre>\n<p>与えられたグリッドから、以下の図のように <var>3\\times3</var> のマス目を <var>3</var> つ選ぶと（これは <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)=(1,5,2,1,5,2)</var> とすることに対応します）、選んだマス目に書かれている数の合計は <var>154</var> となります。</p>\n<p><img src=\"https://img.atcoder.jp/abc347/f24ee82455befb7c9af500437f79cde8.png\" class=\"img-responsive center-block\" style=\"max-width: 80%\"></p>\n<p>問題文の条件を満たす選び方であって選んだマス目に書かれている数の合計が <var>155</var> 以上であるものは存在しないため、<var>154</var> を出力してください。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>7 1\n3 1 4 1 5 9 2\n6 5 3 5 8 9 7\n9 3 2 3 8 4 6\n2 6 4 3 3 8 3\n2 7 9 5 0 2 8\n8 4 1 9 7 1 6\n9 3 9 9 3 7 5\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>27\n</pre>\n<p>以下のように選ぶのが最適です。</p>\n<p><img src=\"https://img.atcoder.jp/abc347/d380b6de908ba5259451d798e7851be3.png\" class=\"img-responsive center-block\" style=\"max-width: 80%\"></p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>16 4\n74 16 58 32 97 52 43 51 40 58 13 24 65 11 63 29\n98 75 40 77 15 50 83 85 35 46 38 37 56 38 63 55\n95 42 10 70 53 40 25 10 70 32 33 19 52 79 74 58\n33 91 53 11 65 63 78 77 81 46 81 63 11 82 55 62\n39 95 92 69 77 89 14 84 53 78 71 81 66 39 96 29\n74 26 60 55 89 35 32 64 17 26 74 92 84 33 59 82\n23 69 10 95 94 14 58 58 97 95 62 58 72 55 71 43\n93 77 27 87 74 72 91 37 53 80 51 71 37 35 97 46\n81 88 26 79 78 30 53 68 83 28 59 28 74 55 20 86\n93 13 25 19 53 53 17 24 69 14 67 81 10 19 69 90\n88 83 62 92 22 31 27 34 67 48 42 32 68 14 96 87\n44 69 25 48 68 42 53 82 44 42 96 31 13 56 68 83\n63 87 24 75 16 70 63 99 95 10 63 26 56 12 77 49\n94 83 69 95 48 41 40 97 45 61 26 38 83 91 44 31\n43 69 54 64 20 60 17 15 62 25 58 50 59 63 88 70\n72 95 21 28 41 14 77 22 64 78 33 55 67 51 78 40\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>3295\n</pre>\n<p>以下のように選ぶのが最適です。</p>\n<p><img src=\"https://img.atcoder.jp/abc347/592c9536ace6712dd7532131b8da15be.png\" class=\"img-responsive center-block\" style=\"max-width: 100%\"></p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score: <var>525</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is an <var>N\\times N</var> grid, and the cell at the <var>i</var>-th row from the top and the <var>j</var>-th column from the left <var>(1\\leq i,j\\leq N)</var> contains the integer <var>A _ {i,j}</var>.</p>\n<p>You are given an integer <var>M</var>. When choosing three non-overlapping <var>M\\times M</var> grids, find the maximum possible sum of the integers written in the chosen grids.</p>\n<details><summary>Formal definition of the problem</summary>\nA <var>6</var>-tuple of integers <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)</var> is called a <strong>good <var>6</var>-tuple</strong> when it satisfies the following three conditions:\n\n<ul>\n<li><var>1\\leq i _ k\\leq N-M+1\\ (k=1,2,3)</var></li>\n<li><var>1\\leq j _ k\\leq N-M+1\\ (k=1,2,3)</var></li>\n<li>If <var>k\\neq l\\ (k,l\\in\\lbrace1,2,3\\rbrace)</var>, the sets <var>\\lbrace(i,j)\\mid i _ k\\leq i\\lt i _ k+M\\wedge j _ k\\leq j\\lt j _ k+M\\rbrace</var> and <var>\\lbrace(i,j)\\mid i _ l\\leq i\\lt i _ l+M\\wedge j _ l\\leq j\\lt j _ l+M\\rbrace</var> do not intersect.</li>\n</ul>\n\nFind the maximum value of <var>\\displaystyle \\sum _ {k=1} ^ 3\\sum _ {i=i _ k} ^ {i _ k+M-1}\\sum _ {j=j _ k} ^ {j _ k+M-1}A _ {i,j}</var> for a good <var>6</var>-tuple <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)</var>.\n\nIt can be shown that a good <var>6</var>-tuple exists under the constraints of this problem.\n</details>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>2\\leq N\\leq 1000</var></li>\n<li><var>1\\leq M\\leq N/2</var></li>\n<li><var>0\\leq A _ {i,j}\\leq10 ^ 9</var></li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>M</var>\n<var>A _ {1,1}</var> <var>A _ {1,2}</var> <var>\\ldots</var> <var>A _ {1,N}</var>\n<var>A _ {2,1}</var> <var>A _ {2,2}</var> <var>\\ldots</var> <var>A _ {2,N}</var>\n <var>\\vdots</var>  <var>\\ \\vdots</var>  <var>\\ddots</var>  <var>\\vdots</var>\n<var>A _ {N,1}</var> <var>A _ {N,2}</var> <var>\\ldots</var> <var>A _ {N,N}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>7 3\n3 1 4 1 5 9 2\n6 5 3 5 8 9 7\n9 3 2 3 8 4 6\n2 6 4 3 3 8 3\n2 7 9 5 0 2 8\n8 4 1 9 7 1 6\n9 3 9 9 3 7 5\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>154\n</pre>\n<p>From the given grid, if we choose three <var>3\\times3</var> grids as shown in the figure below (this corresponds to setting <var>(i _ 1,j _ 1,i _ 2,j _ 2,i _ 3,j _ 3)=(1,5,2,1,5,2)</var>), the sum of the numbers written in the chosen grids will be <var>154</var>.</p>\n<p><img src=\"https://img.atcoder.jp/abc347/f24ee82455befb7c9af500437f79cde8.png\" class=\"img-responsive center-block\" style=\"max-width: 80%\"></p>\n<p>There is no way to make the sum <var>155</var> or greater while satisfying the conditions in the problem statement, so print <var>154</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>7 1\n3 1 4 1 5 9 2\n6 5 3 5 8 9 7\n9 3 2 3 8 4 6\n2 6 4 3 3 8 3\n2 7 9 5 0 2 8\n8 4 1 9 7 1 6\n9 3 9 9 3 7 5\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>27\n</pre>\n<p>The following choice is optimal.</p>\n<p><img src=\"https://img.atcoder.jp/abc347/d380b6de908ba5259451d798e7851be3.png\" class=\"img-responsive center-block\" style=\"max-width: 80%\"></p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>16 4\n74 16 58 32 97 52 43 51 40 58 13 24 65 11 63 29\n98 75 40 77 15 50 83 85 35 46 38 37 56 38 63 55\n95 42 10 70 53 40 25 10 70 32 33 19 52 79 74 58\n33 91 53 11 65 63 78 77 81 46 81 63 11 82 55 62\n39 95 92 69 77 89 14 84 53 78 71 81 66 39 96 29\n74 26 60 55 89 35 32 64 17 26 74 92 84 33 59 82\n23 69 10 95 94 14 58 58 97 95 62 58 72 55 71 43\n93 77 27 87 74 72 91 37 53 80 51 71 37 35 97 46\n81 88 26 79 78 30 53 68 83 28 59 28 74 55 20 86\n93 13 25 19 53 53 17 24 69 14 67 81 10 19 69 90\n88 83 62 92 22 31 27 34 67 48 42 32 68 14 96 87\n44 69 25 48 68 42 53 82 44 42 96 31 13 56 68 83\n63 87 24 75 16 70 63 99 95 10 63 26 56 12 77 49\n94 83 69 95 48 41 40 97 45 61 26 38 83 91 44 31\n43 69 54 64 20 60 17 15 62 25 58 50 59 63 88 70\n72 95 21 28 41 14 77 22 64 78 33 55 67 51 78 40\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>3295\n</pre>\n<p>The following choice is optimal.</p>\n<p><img src=\"https://img.atcoder.jp/abc347/592c9536ace6712dd7532131b8da15be.png\" class=\"img-responsive center-block\" style=\"max-width: 100%\"></p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc347/tasks/abc347_f"}