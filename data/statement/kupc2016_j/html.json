{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>300</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3>\n<p>\n  もうすぐみかんの誕生日である。あろまはグラフが好きなみかんのために今年も無向グラフをプレゼントすることにした。\n</p>\n<p>\n  あろまは <var>n</var> 頂点 <var>n</var> 辺からなる連結な無向グラフを購入した。このグラフの頂点には <var>1, 2, ..., n</var> の番号がついており、各 <var>i</var><var>(1 \\leq i \\leq n)</var> について頂点 <var>i</var> と頂点 <var>a_i</var> の間に辺がある。あろまは既製品を贈るだけでは芸がないと考え <var>k</var> 色で色を塗ることに決め、手始めに色の塗り方が何通りあるかを数えることにした。<strong>ただし、頂点番号を並び替えて一致する色の塗り方は同一であるとし、重複して数えないものとする。</strong>購入したグラフの頂点に <var>k</var> 色で塗る塗り方の個数を <var>10^9 + 7</var> で割った余りを求めよ。\n</p>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n\n<h3>制約</h3>\n<ul>\n  <li> <var>1 \\leq n \\leq 10^5</var> </li>\n  <li> <var>1 \\leq k \\leq 10^5</var> </li>\n  <li> <var>1 \\leq a_i \\leq n</var> <var>(1 \\leq i \\leq n)</var> </li>\n  <li> グラフは連結である。 </li>\n  <li> グラフに自己辺や多重辺は存在しない。 </li>\n</ul>\n\n</section>\n</div>\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n\n<section>\n<h3>入力</h3>\n<p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>n</var> <var>k</var>\n<var>a_1</var>\n:\n<var>a_n</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3>\n<p>\n  グラフの頂点を <var>k</var> 色で塗る塗り方の個数を <var>10^9 + 7</var> で割った余りを一行で出力せよ。\n</p>\n\n</section>\n</div>\n</div>\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>入力例1</h3>\n<pre>4 2\n2\n3\n1\n1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例1</h3>\n<pre>12\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入力例2</h3>\n<pre>4 4\n2\n3\n4\n1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例2</h3>\n<pre>55\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入力例3</h3>\n<pre>10 5\n2\n3\n4\n1\n1\n1\n2\n3\n3\n4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例3</h3>\n<pre>926250\n</pre>\n</section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>300</var> points</p>\n\n<div class=\"part\">\n<section>\n\n<h3>Problem Statement</h3>\n<p>\nMikan's birthday is coming soon. Since Mikan likes graphs very much, Aroma decided to give her a undirected graph this year too. \n</p>\n<p>\nAroma bought a connected undirected graph, which consists of <var>n</var> vertices and <var>n</var> edges. \nThe vertices are numbered from 1 to n and for each <var>i</var><var>(1 \\leq i \\leq n)</var>, vertex <var>i</var> and vartex <var>a_i</var> are connected with an undirected edge. \nAroma thinks it is not interesting only to give the ready-made graph and decided to paint it. \nCount the number of ways to paint the vertices of the purchased graph in <var>k</var> colors modulo <var>10^9 + 7</var>. \n<strong>Two ways are considered to be the same if the graph painted in one way can be identical to the graph painted in the other way by permutating the numbers of the vertices. </strong>\n</p>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n    \n<h3>Constraints</h3>\n<ul>\n  <li> <var>1 \\leq n \\leq 10^5</var> </li>\n  <li> <var>1 \\leq k \\leq 10^5</var> </li>\n  <li> <var>1 \\leq a_i \\leq n</var> <var>(1 \\leq i \\leq n)</var> </li>\n  <li> The given graph is connected</li>\n  <li> The given graph contains no self-loops or multiple edges.\n</li></ul>\n\n</section>\n</div>\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n\n<section>\n<h3>Input</h3>\n<p>Each data set is given in the following format from the standard input.</p>\n<pre><var>n</var> <var>k</var>\n<var>a_1</var>\n:\n<var>a_n</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3>\n<p>Output the number of ways to paint the vertices of the given graph in k colors modulo <var>10^9 + 7</var> in one line. </p>\n\n</section>\n</div>\n</div>\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3>\n<pre>4 2\n2\n3\n1\n1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3>\n<pre>12\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3>\n<pre>4 4\n2\n3\n4\n1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3>\n<pre>55\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3>\n<pre>10 5\n2\n3\n4\n1\n1\n1\n2\n3\n3\n4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3>\n<pre>926250\n</pre>\n</section>\n</div>\n\n</span>"},"endpoint":"https://atcoder.jp/contests/kupc2016/tasks/kupc2016_j"}