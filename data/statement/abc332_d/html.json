{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>425</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>H</var> 行 <var>W</var> 列の <var>2</var> つのグリッド A, B が与えられます。</p>\n<p><var>1 \\leq i \\leq H</var> と <var>1 \\leq j \\leq W</var> を満たす各整数の組 <var>(i, j)</var> について、\n<var>i</var> 行目 <var>j</var> 列目にあるマスをマス <var>(i, j)</var> と呼ぶとき、\nグリッド A の マス <var>(i, j)</var> には整数 <var>A_{i, j}</var> が、\nグリッド B の マス <var>(i, j)</var> には整数 <var>B_{i, j}</var> がそれぞれ書かれています。</p>\n<p>あなたは「下記の <var>2</var> つのうちのどちらか <var>1</var> つを行う」という操作を好きな回数（ <var>0</var> 回でもよい）だけ繰り返します。</p>\n<ul>\n<li><var>1 \\leq i \\leq H-1</var> を満たす整数 <var>i</var> を選び、グリッド A の <var>i</var> 行目と <var>(i+1)</var> 行目を入れ替える。</li>\n<li><var>1 \\leq i \\leq W-1</var> を満たす整数 <var>i</var> を選び、グリッド A の <var>i</var> 列目と <var>(i+1)</var> 列目を入れ替える。</li>\n</ul>\n<p>上記の操作の繰り返しによって、グリッド A をグリッド B に一致させることが可能かどうかを判定してください。\nさらに、一致させることが可能な場合は、そのために行う操作回数の最小値を出力してください。</p>\n<p>ここで、グリッド A とグリッド B が一致しているとは、\n<var>1 \\leq i \\leq H</var> と <var>1 \\leq j \\leq W</var> を満たす全ての整数の組 <var>(i, j)</var> について、\nグリッド A の マス <var>(i, j)</var> とグリッド B の マス <var>(i, j)</var> に書かれた整数が等しいこととします。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li>入力される値は全て整数</li>\n<li><var>2 \\leq H, W \\leq 5</var></li>\n<li><var>1 \\leq A_{i, j}, B_{i, j} \\leq 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>H</var> <var>W</var>\n<var>A_{1, 1}</var> <var>A_{1, 2}</var> <var>\\cdots</var> <var>A_{1, W}</var>\n<var>A_{2, 1}</var> <var>A_{2, 2}</var> <var>\\cdots</var> <var>A_{2, W}</var>\n<var>\\vdots</var>\n<var>A_{H, 1}</var> <var>A_{H, 2}</var> <var>\\cdots</var> <var>A_{H, W}</var>\n<var>B_{1, 1}</var> <var>B_{1, 2}</var> <var>\\cdots</var> <var>B_{1, W}</var>\n<var>B_{2, 1}</var> <var>B_{2, 2}</var> <var>\\cdots</var> <var>B_{2, W}</var>\n<var>\\vdots</var>\n<var>B_{H, 1}</var> <var>B_{H, 2}</var> <var>\\cdots</var> <var>B_{H, W}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>グリッド A をグリッド B に一致させることが不可能な場合は <code>-1</code> を、\n可能な場合はグリッド A をグリッド B に一致させるために行う操作回数の最小値を出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>4 5\n1 2 3 4 5\n6 7 8 9 10\n11 12 13 14 15\n16 17 18 19 20\n1 3 2 5 4\n11 13 12 15 14\n6 8 7 10 9\n16 18 17 20 19\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>3\n</pre>\n<p>初期状態のグリッド A の <var>4</var> 列目と <var>5</var> 列目を入れ替えると、グリッド A は下記の通りになります。</p>\n<pre>1 2 3 5 4\n6 7 8 10 9\n11 12 13 15 14\n16 17 18 20 19\n</pre>\n<p>続けて、グリッド A の <var>2</var> 行目と <var>3</var> 行目を入れ替えると、グリッド A は下記の通りになります。</p>\n<pre>1 2 3 5 4\n11 12 13 15 14\n6 7 8 10 9\n16 17 18 20 19\n</pre>\n<p>最後に、グリッド A の <var>2</var> 列目と <var>3</var> 列目を入れ替えると、グリッド A は下記の通りになり、グリッド B に一致します。</p>\n<pre>1 3 2 5 4\n11 13 12 15 14\n6 8 7 10 9\n16 18 17 20 19\n</pre>\n<p>上に述べた <var>3</var> 回の操作でグリッド A をグリッド B に一致させることができ、\nこれより少ない回数の操作でグリッド A をグリッド B に一致させることはできないため、\n<var>3</var> を出力します。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>2 2\n1 1\n1 1\n1 1\n1 1000000000\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>-1\n</pre>\n<p>問題文中の操作をどのように行ってもグリッド A をグリッド B に一致させることは不可能であるため <code>-1</code> を出力します。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>3 3\n8 1 6\n3 5 7\n4 9 2\n8 1 6\n3 5 7\n4 9 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>0\n</pre>\n<p>グリッド A ははじめからグリッド B に一致しています。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 4</h3><pre>5 5\n710511029 136397527 763027379 644706927 447672230\n979861204 57882493 442931589 951053644 152300688\n43971370 126515475 962139996 541282303 834022578\n312523039 506696497 664922712 414720753 304621362\n325269832 191410838 286751784 732741849 806602693\n806602693 732741849 286751784 191410838 325269832\n304621362 414720753 664922712 506696497 312523039\n834022578 541282303 962139996 126515475 43971370\n152300688 951053644 442931589 57882493 979861204\n447672230 644706927 763027379 136397527 710511029\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 4</h3><pre>20\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>425</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>You are given two grids, A and B, each with <var>H</var> rows and <var>W</var> columns.</p>\n<p>For each pair of integers <var>(i, j)</var> satisfying <var>1 \\leq i \\leq H</var> and <var>1 \\leq j \\leq W</var>, let <var>(i, j)</var> denote the cell in the <var>i</var>-th row and <var>j</var>-th column. In grid A, cell <var>(i, j)</var> contains the integer <var>A_{i, j}</var>. In grid B, cell <var>(i, j)</var> contains the integer <var>B_{i, j}</var>.</p>\n<p>You will repeat the following operation any number of times, possibly zero. In each operation, you perform one of the following:</p>\n<ul>\n<li>Choose an integer <var>i</var> satisfying <var>1 \\leq i \\leq H-1</var> and swap the <var>i</var>-th and <var>(i+1)</var>-th rows in grid A.</li>\n<li>Choose an integer <var>i</var> satisfying <var>1 \\leq i \\leq W-1</var> and swap the <var>i</var>-th and <var>(i+1)</var>-th columns in grid A.</li>\n</ul>\n<p>Determine whether it is possible to make grid A identical to grid B by repeating the above operation. If it is possible, print the minimum number of operations required to do so.</p>\n<p>Here, grid A is identical to grid B if and only if, for all pairs of integers <var>(i, j)</var> satisfying <var>1 \\leq i \\leq H</var> and <var>1 \\leq j \\leq W</var>, the integer written in cell <var>(i, j)</var> of grid A is equal to the integer written in cell <var>(i, j)</var> of grid B.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li>All input values are integers.</li>\n<li><var>2 \\leq H, W \\leq 5</var></li>\n<li><var>1 \\leq A_{i, j}, B_{i, j} \\leq 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>H</var> <var>W</var>\n<var>A_{1, 1}</var> <var>A_{1, 2}</var> <var>\\cdots</var> <var>A_{1, W}</var>\n<var>A_{2, 1}</var> <var>A_{2, 2}</var> <var>\\cdots</var> <var>A_{2, W}</var>\n<var>\\vdots</var>\n<var>A_{H, 1}</var> <var>A_{H, 2}</var> <var>\\cdots</var> <var>A_{H, W}</var>\n<var>B_{1, 1}</var> <var>B_{1, 2}</var> <var>\\cdots</var> <var>B_{1, W}</var>\n<var>B_{2, 1}</var> <var>B_{2, 2}</var> <var>\\cdots</var> <var>B_{2, W}</var>\n<var>\\vdots</var>\n<var>B_{H, 1}</var> <var>B_{H, 2}</var> <var>\\cdots</var> <var>B_{H, W}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>If it is impossible to make grid A identical to grid B, output <code>-1</code>. Otherwise, print the minimum number of operations required to make grid A identical to grid B.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>4 5\n1 2 3 4 5\n6 7 8 9 10\n11 12 13 14 15\n16 17 18 19 20\n1 3 2 5 4\n11 13 12 15 14\n6 8 7 10 9\n16 18 17 20 19\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>3\n</pre>\n<p>Swapping the fourth and fifth columns of the initial grid A yields the following grid:</p>\n<pre>1 2 3 5 4\n6 7 8 10 9\n11 12 13 15 14\n16 17 18 20 19\n</pre>\n<p>Then, swapping the second and third rows yields the following grid:</p>\n<pre>1 2 3 5 4\n11 12 13 15 14\n6 7 8 10 9\n16 17 18 20 19\n</pre>\n<p>Finally, swapping the second and third columns yields the following grid, which is identical to grid B:</p>\n<pre>1 3 2 5 4\n11 13 12 15 14\n6 8 7 10 9\n16 18 17 20 19\n</pre>\n<p>You can make grid A identical to grid B with the three operations above and cannot do so with fewer operations, so print <var>3</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>2 2\n1 1\n1 1\n1 1\n1 1000000000\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>-1\n</pre>\n<p>There is no way to perform the operation to make grid A match grid B, so print <code>-1</code>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>3 3\n8 1 6\n3 5 7\n4 9 2\n8 1 6\n3 5 7\n4 9 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>0\n</pre>\n<p>Grid A is already identical to grid B at the beginning.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 4</h3><pre>5 5\n710511029 136397527 763027379 644706927 447672230\n979861204 57882493 442931589 951053644 152300688\n43971370 126515475 962139996 541282303 834022578\n312523039 506696497 664922712 414720753 304621362\n325269832 191410838 286751784 732741849 806602693\n806602693 732741849 286751784 191410838 325269832\n304621362 414720753 664922712 506696497 312523039\n834022578 541282303 962139996 126515475 43971370\n152300688 951053644 442931589 57882493 979861204\n447672230 644706927 763027379 136397527 710511029\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 4</h3><pre>20\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc332/tasks/abc332_d"}