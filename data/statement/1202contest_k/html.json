{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>100</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>DEGwer さんは平面上の <var>[-W, W] \\times [-H, H]</var> の土地を所有しており，ここで農業を営んでいます．\n鳥獣被害に悩まされた DEGwer さんは，土地に侵入した動物を焼き払うビームを張り巡らせることにしました．\n具体的には，土地内の格子点に <var>+</var> か <var>-</var> のいずれかの符号が付いた柱を立て，<b>符号の異なる柱同士</b>を結ぶ線分としてビームを張ります．\nただし，ビーム同士が柱の無い点で交わると，ビームの持つエネルギーが共鳴して大変なことが起こるため，ビーム同士は柱の無い点を共有しないようにしなければなりません．</p>\n<p>DEGwer さんは，柱を立てる <var>N</var> 個の格子点 <var>(X_i, Y_i) \\ (i = 1, 2, \\dots, N)</var> を既に決めています．\nその中には土地の四隅すべてが含まれ，さらに柱を立てるどの <var>3</var> 点も同一直線上には存在しません．\n各柱の符号とビームを張る柱のペアを適切に定めて，張るビームの数を最大にしてください．</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>1 \\le W \\le 10^9</var></li>\n<li><var>1 \\le H \\le 10^9</var></li>\n<li><var>4 \\le N \\le 10^5</var></li>\n<li><var>-W \\le X_i \\le W \\ \\ (1 \\leq i \\leq N)</var></li>\n<li><var>-H \\le Y_i \\le H \\ \\ (1 \\leq i \\leq N)</var></li>\n<li><var>(X_i, Y_i) \\neq (X_j, Y_j) \\ \\ (i \\neq j)</var></li>\n<li><var>(X_i, Y_i) = (\\pm W, \\pm H)</var>（複号任意）であるような <var>i</var> が存在する．</li>\n<li><var>i \\neq j \\neq k \\neq i</var> のとき，<var>(X_i, Y_i), (X_j, Y_j), (X_k, Y_k)</var> は同一直線上にない．</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる．</p>\n<pre><var>W \\ H</var>\n<var>N</var>\n<var>X_1 \\ Y_1</var>\n<var>X_2 \\ Y_2</var>\n<var>\\vdots</var>\n<var>X_N \\ Y_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>ビームの数を最大にする方法を以下の形式で出力せよ．</p>\n<pre><var>S</var>\n<var>M</var>\n<var>P_1 \\ Q_1</var>\n<var>P_2 \\ Q_2</var>\n<var>\\vdots</var>\n<var>P_M \\ Q_M</var>\n</pre>\n<ul>\n<li><var>S</var> は <code>+</code>, <code>-</code> からなる長さ <var>N</var> の文字列であり，その <var>i</var> 文字目 <var>S_i</var> は <var>(X_i, Y_i)</var> に立てる柱 <var>i</var> の符号を表す．</li>\n<li><var>M</var> はビームの最大本数を表す整数である．</li>\n<li>各 <var>i = 1, 2, \\dots, M</var> について，<var>(P_i, Q_i)</var> は「柱 <var>P_i</var> と柱 <var>Q_i</var> の間にビームを張る」ことを表し，<var>S_{P_i} \\neq S_{Q_i}</var> が成り立つ必要がある．</li>\n<li><var>i \\neq j</var> のとき，<var>(X_{P_i}, Y_{P_i})</var> と <var>(X_{Q_i}, Y_{Q_i})</var> を結ぶ線分と <var>(X_{P_j}, Y_{P_j})</var> と <var>(X_{Q_j}, Y_{Q_j})</var> を結ぶ線分は，それぞれの端点を除いて共有点をもたない．</li>\n</ul>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>1 1\n4\n1 1\n-1 1\n-1 -1\n1 -1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>+-+-\n4\n1 2\n2 3\n3 4\n4 1\n</pre>\n<p>DEGwer さんの所有する土地は <var>[-1, 1] \\times [-1, 1]</var> であり，その四隅のみに柱を立てます．\n柱に（反）時計回りに交互に異なる符号を割り当てることで，隣り合う柱同士の間すべてにビームを張ることができ，これが最大です．</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>1 2\n5\n1 2\n-1 2\n0 1\n-1 -2\n1 -2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>+-++-\n6\n1 2\n2 4\n4 5\n5 1\n2 3\n3 5\n</pre>\n<p>DEGwer さんの所有する土地は <var>[-1, 1] \\times [-2, 2]</var> であり，その四隅と格子点 <var>(0, 1)</var> に柱を立てます．\n四隅の柱に（反）時計回りに交互に異なる符号を割り当て，<var>(0, 1)</var> の柱に任意の符号を割り当てることで，出力例のように <var>6</var> 本のビームを張ることができます．\nまた，<var>7</var> 本以上のビームを張れないことが証明できるので，これが最大であり答えの一例となります．</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>100</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>DEGwer owns a rectangular land <var>[-W, W] \\times [-H, H]</var> in the plane, and he is engaged in farming there.\nHe is suffering from damage caused by birds and beasts, and he has decided to stretch beams that burn out creatures invading his land.\nSpecifically, he will construct pillars having a sign, either <var>+</var> or <var>-</var>, on integer grid points in his land, and then stretch a beam as a segment between <b>two pillars having different signs</b>.\nHowever, if two beams share a point without a pillar, then something horrible happens because of resonance of beam energy, and hence he has to let any two beams not share a point without a pillar.</p>\n<p>DEGwer has decided <var>N</var> integer grid points <var>(X_i, Y_i) \\ (i = 1, 2, \\dots, N)</var> on which he will construct the pillars.\nThese grid points include the four corners of his land, and any three among these grid points are not on a single line.\nYour mission is to maximize the number of stretched beams by determining the sign of each pillar and between which pillars beams are stretched.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>1 \\le W \\le 10^9</var></li>\n<li><var>1 \\le H \\le 10^9</var></li>\n<li><var>4 \\le N \\le 10^5</var></li>\n<li><var>-W \\le X_i \\le W \\ \\ (1 \\leq i \\leq N)</var></li>\n<li><var>-H \\le Y_i \\le H \\ \\ (1 \\leq i \\leq N)</var></li>\n<li><var>(X_i, Y_i) \\neq (X_j, Y_j) \\ \\ (i \\neq j)</var></li>\n<li>There exists an index <var>i</var> such that <var>(X_i, Y_i) = (\\pm W, \\pm H)</var> (for any pair of signs).</li>\n<li>When <var>i \\neq j \\neq k \\neq i,</var> the three grid points <var>(X_i, Y_i),</var> <var>(X_j, Y_j),</var> and <var>(X_k, Y_k)</var> are not on a single line.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>W \\ H</var>\n<var>N</var>\n<var>X_1 \\ Y_1</var>\n<var>X_2 \\ Y_2</var>\n<var>\\vdots</var>\n<var>X_N \\ Y_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print a way to maximize the number of stretched beams in the following format:</p>\n<pre><var>S</var>\n<var>M</var>\n<var>P_1 \\ Q_1</var>\n<var>P_2 \\ Q_2</var>\n<var>\\vdots</var>\n<var>P_M \\ Q_M</var>\n</pre>\n<ul>\n<li><var>S</var> is a string of length <var>N</var> consisting of <code>+</code> and <code>-</code>, whose <var>i</var>-th character <var>S_i</var> represents the sign of the pillar <var>i</var> constructed on <var>(X_i, Y_i)</var>.</li>\n<li><var>M</var> is the maximum number of stretched beams.</li>\n<li>For <var>i = 1, 2, \\dots, M,</var> the pair <var>(P_i, Q_i)</var> means to stretch a beam between the pillar <var>P_i</var> and the pillar <var>Q_i,</var> where <var>S_{P_i} \\neq S_{Q_i}</var> necessarily holds.</li>\n<li>When <var>i \\neq j,</var> the two segments between <var>(X_{P_i}, Y_{P_i})</var> and <var>(X_{Q_i}, Y_{Q_i})</var> and between <var>(X_{P_j}, Y_{P_j})</var> and <var>(X_{Q_j}, Y_{Q_j})</var> do not share any point except for their common end points.</li>\n</ul>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>1 1\n4\n1 1\n-1 1\n-1 -1\n1 -1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>+-+-\n4\n1 2\n2 3\n3 4\n4 1\n</pre>\n<p>DEGwer's land is <var>[-1, 1] \\times [-1, 1]</var>, and he will construct four pillars on the four corners.\nIf you assign alternating signs to the corner pillars in (counter)clockwise direction, you can stretch a beam between any adjacent pillars, and this is maximum.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>1 2\n5\n1 2\n-1 2\n0 1\n-1 -2\n1 -2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>+-++-\n6\n1 2\n2 4\n4 5\n5 1\n2 3\n3 5\n</pre>\n<p>DEGwer's land is <var>[-1, 1] \\times [-2, 2]</var>, and he will construct five pillars on the grid point <var>(0, 1)</var> in addition to the four corners.\nIf you assign alternating signs to the corner pillars in (counter)clockwise direction and an arbitrary sign to the pillar on <var>(0, 1)</var>, you can stretch six beams in total as Sample Output 2.\nIt can be proved that seven beams cannot be stretched, so this is an example of a solution.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/degwer2023/tasks/1202contest_k"}