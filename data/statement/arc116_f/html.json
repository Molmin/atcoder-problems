{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>800</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>K</var> 個の数列が与えられます。\n<var>i</var> 個目の数列 <var>A_i</var> の長さは <var>N_i</var> です。</p>\n<p>これらを使って高橋君と青木君がゲームをします。\n全ての数列が長さ <var>1</var> になるまで、高橋君と青木君が交互に以下の操作を行います。</p>\n<ul>\n<li>長さが <var>2</var> 以上の数列を <var>1</var> つ選び、その最初の要素或いは最後の要素を削除する。</li>\n</ul>\n<p>高橋君が先に操作を行います。最後に残る <var>K</var> 個の要素の総和を、高橋君は最大化したいと、青木君は最小化したいと考えています。</p>\n<p>両者最適に行動するとき、最後に残る <var>K</var> 個の要素の総和を答えてください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li>入力は全て整数</li>\n<li><var> 1 \\leq K \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq N_i</var></li>\n<li><var>\\sum_i N_i \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq A_{i, j} \\leq 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>K</var>\n<var>N_1</var> <var>A_{1, 1}</var> <var>A_{1, 2}</var> <var>\\cdots</var> <var>A_{1, N_1}</var>\n<var>N_2</var> <var>A_{2, 1}</var> <var>A_{2, 2}</var> <var>\\cdots</var> <var>A_{2, N_2}</var>\n<var>\\vdots</var>\n<var>N_K</var> <var>A_{K, 1}</var> <var>A_{K, 2}</var> <var>\\cdots</var> <var>A_{K, N_K}</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>2\n3 1 2 3\n2 1 10\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>12\n</pre>\n\n<p>ゲームの進行の一例を示します。</p>\n<ul>\n<li>高橋君が <var>A_2</var> の最初の要素を削除する。現在の数列の状態は、 <var>A_1 = \\left(1, 2, 3\\right), A_2 = \\left(10\\right)</var> である。</li>\n<li>青木君が <var>A_1</var> の最後の要素を削除する。現在の数列の状態は、 <var>A_1 = \\left(1, 2\\right), A_2 = \\left(10\\right)</var> である。</li>\n<li>高橋君が <var>A_1</var> の最初の要素を削除する。現在の数列の状態は、 <var>A_1 = \\left(2\\right), A_2 = \\left(10\\right)</var> である。全ての数列の長さが <var>1</var> となった為、ゲームが終了する。</li>\n</ul>\n<p>このとき、最後に残る <var>K</var> 個の要素の総和は <var>12</var> です。尚、このゲームの進行が両者にとって最適な行動であるとは限りません。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>8\n1 2\n2 1 2\n3 1 2 1\n4 1 1 1 2\n5 1 1 2 2 1\n6 2 2 2 2 1 1\n7 1 2 1 1 2 2 2\n8 2 2 2 1 1 1 1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>12\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>800</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>We have <var>K</var> sequences.\nThe <var>i</var>-th sequence <var>A_i</var> has the length of <var>N_i</var>.</p>\n<p>Takahashi and Aoki will play a game using these.\nThey will alternately do the following operation until the length of every sequence becomes <var>1</var>:</p>\n<ul>\n<li>Choose a sequence of length at least <var>2</var>, and delete its first or last element.</li>\n</ul>\n<p>Takahashi goes first. Takahashi wants to maximize the sum of the <var>K</var> elements remaining in the end, while Aoki wants to minimize it.</p>\n<p>Find the sum of the <var>K</var> elements remaining in the end when both players play optimally.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li>All values in input are integers.</li>\n<li><var> 1 \\leq K \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq N_i</var></li>\n<li><var>\\sum_i N_i \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq A_{i, j} \\leq 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>\n<pre><var>K</var>\n<var>N_1</var> <var>A_{1, 1}</var> <var>A_{1, 2}</var> <var>\\cdots</var> <var>A_{1, N_1}</var>\n<var>N_2</var> <var>A_{2, 1}</var> <var>A_{2, 2}</var> <var>\\cdots</var> <var>A_{2, N_2}</var>\n<var>\\vdots</var>\n<var>N_K</var> <var>A_{K, 1}</var> <var>A_{K, 2}</var> <var>\\cdots</var> <var>A_{K, N_K}</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>2\n3 1 2 3\n2 1 10\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>12\n</pre>\n\n<p>Here is one possible progression of the game:</p>\n<ul>\n<li>Takahashi deletes the first element of <var>A_2</var>. Now we have <var>A_1 = \\left(1, 2, 3\\right), A_2 = \\left(10\\right)</var>.</li>\n<li>Aoki deletes the last element of <var>A_1</var>. Now we have <var>A_1 = \\left(1, 2\\right), A_2 = \\left(10\\right)</var>.</li>\n<li>Takahashi deletes the first element of <var>A_1</var>. Now we have <var>A_1 = \\left(2\\right), A_2 = \\left(10\\right)</var>. The length of every sequence has become <var>1</var>, so the game ends.</li>\n</ul>\n<p>In this case, the sum of the <var>K</var> elements remaining in the end is <var>12</var>. Note that the players may have made suboptimal moves here.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>8\n1 2\n2 1 2\n3 1 2 1\n4 1 1 1 2\n5 1 1 2 2 1\n6 2 2 2 2 1 1\n7 1 2 1 1 2 2 2\n8 2 2 2 1 1 1 1 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>12\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/arc116/tasks/arc116_f"}