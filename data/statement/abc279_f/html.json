{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>500</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>N</var> 個の箱 <var>1,2,\\dots,N</var> と、 <var>10^{100}</var> 個のボール <var>1,2,\\dots,10^{100}</var> があります。\n最初、箱 <var>i</var> にはボール <var>i</var> のみが入っています。</p>\n<p>ここに以下の操作が合計 <var>Q</var> 回行われるので、処理してください。</p>\n<p>操作にはタイプ <var>1,2,3</var> の <var>3</var> 種類があります。</p>\n<p>タイプ <var>1</var> : 箱 <var>X</var> に箱 <var>Y</var> の中身を全て入れる。 この操作では <var>X \\neq Y</var> が保証される。</p>\n<pre>1 <var>X</var> <var>Y</var>\n</pre>\n<p>タイプ <var>2</var> : 現在いずれかの箱に入っているボールの数の合計を <var>k</var> とすると、箱 <var>X</var> にボール <var>k+1</var> を入れる。</p>\n<pre>2 <var>X</var>\n</pre>\n<p>タイプ <var>3</var> : ボール <var>X</var> が入っている箱の番号を答える。</p>\n<pre>3 <var>X</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li>入力は全て整数</li>\n<li><var>2 \\le N \\le 3 \\times 10^5</var></li>\n<li><var>1 \\le Q \\le 3 \\times 10^5</var></li>\n<li>タイプ <var>1</var> の操作について、 <var>1 \\le X,Y \\le N</var> かつ <var>X \\neq Y</var></li>\n<li>タイプ <var>2</var> の操作について、 <var>1 \\le X \\le N</var></li>\n<li>タイプ <var>3</var> の操作について、その時点でボール <var>X</var> がいずれかの箱に入っている</li>\n<li>タイプ <var>3</var> の操作が少なくとも <var>1</var> つ与えられる</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。<br>\n但し、 <var>op_i</var> は <var>i</var> 回目の操作を表す。</p>\n<pre><var>N</var> <var>Q</var>\n<var>op_1</var>\n<var>op_2</var>\n<var>\\vdots</var>\n<var>op_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>各タイプ <var>3</var> の操作に対して、答えを <var>1</var> 行に <var>1</var> つ、整数として出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>5 10\n3 5\n1 1 4\n2 1\n2 4\n3 7\n1 3 1\n3 4\n1 1 4\n3 7\n3 6\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>5\n4\n3\n1\n3\n</pre>\n<p>この入力は <var>10</var> 個の操作を含みます。</p>\n<ul>\n<li><var>1</var> 回目の操作はタイプ <var>3</var> です。ボール <var>5</var> は箱 <var>5</var> に入っています。</li>\n<li><var>2</var> 回目の操作はタイプ <var>1</var> です。箱 <var>1</var> に箱 <var>4</var> の中身を全て入れます。<ul>\n<li>箱 <var>1</var> の中身はボール <var>1,4</var> 、箱 <var>4</var> の中身は空になります。</li>\n</ul>\n</li>\n<li><var>3</var> 回目の操作はタイプ <var>2</var> です。箱 <var>1</var> にボール <var>6</var> を入れます。</li>\n<li><var>4</var> 回目の操作はタイプ <var>2</var> です。箱 <var>4</var> にボール <var>7</var> を入れます。</li>\n<li><var>5</var> 回目の操作はタイプ <var>3</var> です。ボール <var>7</var> は箱 <var>4</var> に入っています。</li>\n<li><var>6</var> 回目の操作はタイプ <var>1</var> です。箱 <var>3</var> に箱 <var>1</var> の中身を全て入れます。<ul>\n<li>箱 <var>3</var> の中身はボール <var>1,3,4,6</var> 、箱 <var>1</var> の中身は空になります。</li>\n</ul>\n</li>\n<li><var>7</var> 回目の操作はタイプ <var>3</var> です。ボール <var>4</var> は箱 <var>3</var> に入っています。</li>\n<li><var>8</var> 回目の操作はタイプ <var>1</var> です。箱 <var>1</var> に箱 <var>4</var> の中身を全て入れます。<ul>\n<li>箱 <var>1</var> の中身はボール <var>7</var> 、箱 <var>4</var> の中身は空になります。</li>\n</ul>\n</li>\n<li><var>9</var> 回目の操作はタイプ <var>3</var> です。ボール <var>7</var> は箱 <var>1</var> に入っています。</li>\n<li><var>10</var> 回目の操作はタイプ <var>3</var> です。ボール <var>6</var> は箱 <var>3</var> に入っています。</li>\n</ul></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>500</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There are <var>N</var> boxes numbered <var>1,2,\\ldots,N</var>, and <var>10^{100}</var> balls numbered <var>1,2,\\dots,10^{100}</var>.\nInitially, box <var>i</var> contains just ball <var>i</var>.</p>\n<p>Process a total of <var>Q</var> operations that will be performed.</p>\n<p>There are three types of operations: <var>1</var>, <var>2</var>, and <var>3</var>.</p>\n<p>Type <var>1</var>: Put all contents of box <var>Y</var> into box <var>X</var>. It is guaranteed that <var>X \\neq Y</var>.</p>\n<pre>1 <var>X</var> <var>Y</var>\n</pre>\n<p>Type <var>2</var>: Put ball <var>k+1</var> into box <var>X</var>, where <var>k</var> is the current total number of balls contained in the boxes.</p>\n<pre>2 <var>X</var>\n</pre>\n<p>Type <var>3</var>: Report the number of the box that contains ball <var>X</var>.</p>\n<pre>3 <var>X</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li>All values in the input are integers.</li>\n<li><var>2 \\le N \\le 3 \\times 10^5</var></li>\n<li><var>1 \\le Q \\le 3 \\times 10^5</var></li>\n<li>For each type-<var>1</var> operation, <var>1 \\le X,Y \\le N</var> and <var>X \\neq Y</var>.</li>\n<li>For each type-<var>2</var> operation, <var>1 \\le X \\le N</var>.</li>\n<li>For each type-<var>3</var> operation, ball <var>X</var> is contained in some box at that point.</li>\n<li>There is at least one type-<var>3</var> operation.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format.<br>\nHere, <var>op_i</var> represents the <var>i</var>-th operation.</p>\n<pre><var>N</var> <var>Q</var>\n<var>op_1</var>\n<var>op_2</var>\n<var>\\vdots</var>\n<var>op_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>For each type-<var>3</var> operation, print a line containing the response as an integer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>5 10\n3 5\n1 1 4\n2 1\n2 4\n3 7\n1 3 1\n3 4\n1 1 4\n3 7\n3 6\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>5\n4\n3\n1\n3\n</pre>\n<p>This input contains ten operations.</p>\n<ul>\n<li>The first operation is of type <var>3</var>. Ball <var>5</var> is in box <var>5</var>.</li>\n<li>The second operation is of type <var>1</var>. Put all contents of box <var>4</var> into box <var>1</var>.<ul>\n<li>Box <var>1</var> now contains balls <var>1</var> and <var>4</var>, and box <var>4</var> is now empty.</li>\n</ul>\n</li>\n<li>The third operation is of type <var>2</var>. Put ball <var>6</var> into box <var>1</var>.</li>\n<li>The fourth operation is of type <var>2</var>. Put ball <var>7</var> into box <var>4</var>.</li>\n<li>The fifth operation is of type <var>3</var>. Ball <var>7</var> is in box <var>4</var>.</li>\n<li>The sixth operation is of type <var>1</var>. Put all contents of box <var>1</var> into box <var>3</var>.<ul>\n<li>Box <var>3</var> now contains balls <var>1</var>, <var>3</var>, <var>4</var>, and <var>6</var>, and box <var>1</var> is now empty.</li>\n</ul>\n</li>\n<li>The seventh operation is of type <var>3</var>. Ball <var>4</var> is in box <var>3</var>.</li>\n<li>The eighth operation is of type <var>1</var>. Put all contents of box <var>4</var> into box <var>1</var>.<ul>\n<li>Box <var>1</var> now contains ball <var>7</var>, and box <var>4</var> is now empty.</li>\n</ul>\n</li>\n<li>The ninth operation is of type <var>3</var>. Ball <var>7</var> is in box <var>1</var>.</li>\n<li>The tenth operation is of type <var>3</var>. Ball <var>6</var> is in box <var>3</var>.</li>\n</ul></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc279/tasks/abc279_f"}