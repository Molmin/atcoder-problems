{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>500</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>1</var> から <var>N</var> までの番号が振られた <var>N</var> 個の都市と、それらの間を運行する <var>M</var> 本のバスがあります。<var>i\\ (1 \\leq i \\leq M)</var> 本目のバスは時刻 <var>S_i+0.5</var> に都市 <var>A_i</var> を出発し、時刻 <var>T_i+0.5</var> に都市 <var>B_i</var> に到着します。</p>\n<p>さて、これら <var>N</var> 個の都市の間を高橋くんが移動します。高橋くんは、時刻 <var>t</var> に都市 <var>p</var> にいるとき、以下のように行動します。</p>\n<ol>\n<li>時刻 <var>t</var> 以降（時刻 <var>t</var> ちょうどを含む）に都市 <var>p</var> を出発するバスが存在するなら、そのようなバスのうち最も出発時刻が早いものに乗り、他の都市に移動する。</li>\n<li>そのようなバスが存在しないなら、何もせず都市 <var>p</var> に居続ける。</li>\n</ol>\n<p>高橋くんは上記の行動を 2. の状態になるまで繰り返します。<var>M</var> 本のバスの出発時刻は互いに異なることが保証されるため、高橋くんが乗るバスは常に一意に定まります。また、バスの乗り換えにかかる時間は無視することができます。</p>\n<p>それでは本題に入りましょう。<var>Q</var> 個のクエリに答えてください。<var>i\\ (1 \\leq i \\leq Q)</var> 個目のクエリの内容は以下の通りです。</p>\n<ul>\n<li>高橋くんが時刻 <var>X_i</var> に都市 <var>Y_i</var> から行動を開始するとき、時刻 <var>Z_i</var> にはどの都市にいるか、あるいはどのバスに乗っているか。</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>2 \\leq N \\leq 10^5</var></li>\n<li><var>1 \\leq M \\leq 10^5</var></li>\n<li><var>1 \\leq Q \\leq 10^5</var></li>\n<li><var>1 \\leq A_i,B_i \\leq N\\ (1 \\leq i \\leq M)</var></li>\n<li><var>A_i \\neq B_i\\ (1 \\leq i \\leq M)</var></li>\n<li><var>1 \\leq S_i \\lt T_i \\leq 10^9\\ (1 \\leq i \\leq M)</var></li>\n<li><var>S_i \\neq S_j\\ (i \\neq j)</var></li>\n<li><var>1 \\leq X_i \\lt Z_i \\leq 10^9\\ (1 \\leq i \\leq Q)</var></li>\n<li><var>1 \\leq Y_i \\leq N\\ (1 \\leq i \\leq Q)</var></li>\n<li>入力は全て整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var> <var>M</var> <var>Q</var>\n<var>A_1</var> <var>B_1</var> <var>S_1</var> <var>T_1</var>\n<var>A_2</var> <var>B_2</var> <var>S_2</var> <var>T_2</var>\n<var>\\hspace{1.8cm}\\vdots</var>\n<var>A_M</var> <var>B_M</var> <var>S_M</var> <var>T_M</var>\n<var>X_1</var> <var>Y_1</var> <var>Z_1</var>\n<var>X_2</var> <var>Y_2</var> <var>Z_2</var>\n<var>\\hspace{1.2cm}\\vdots</var>\n<var>X_Q</var> <var>Y_Q</var> <var>Z_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p><var>Q</var> 行に渡って出力せよ。<var>i</var> 行目には、 <var>i</var> 個目のクエリに対する答えを以下の指示にしたがって出力すること。</p>\n<ul>\n<li>高橋くんが時刻 <var>Z_i</var> にいずれかのバスに乗っているならば、そのバスの始点、終点となる都市の番号をこの順に空白区切りで出力する。</li>\n<li>そうでない、すなわち高橋くんが時刻 <var>Z_i</var> にいずれかの都市にいるならば、その都市の番号を出力する。</li>\n</ul>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>3 2 3\n1 2 1 3\n2 3 3 5\n1 1 5\n2 2 3\n1 3 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>2 3\n2\n3\n</pre>\n<p><var>1</var> つ目のクエリにおいて、高橋くんは以下の通りに動きます。</p>\n<ol>\n<li>はじめ、都市 <var>1</var> に時刻 <var>1</var> にいる。</li>\n<li>時刻 <var>1.5</var> に都市 <var>1</var> を出発するバスに乗り、時刻 <var>3.5</var> に都市 <var>2</var> に到着する。</li>\n<li>時刻 <var>3.5</var> に都市 <var>2</var> を出発するバスに乗り、時刻 <var>5.5</var> に都市 <var>3</var> に到着する。</li>\n<li>時刻 <var>5.5</var> 以降に都市 <var>3</var> を出発するバスは存在しないため、都市 <var>3</var> に（永遠に）居続ける。</li>\n</ol>\n<p>時刻 <var>5</var> において、高橋くんは都市 <var>2</var> を出発して都市 <var>3</var> に到着するバスに乗っています。そのため、「出力」の項に書かれている通り、<var>2</var>, <var>3</var> を空白区切りで出力します。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>8 10 10\n4 3 329982133 872113932\n6 8 101082040 756263297\n4 7 515073851 793074419\n8 7 899017043 941751547\n5 7 295510441 597348810\n7 2 688716395 890599546\n6 1 414221915 748470452\n6 4 810915860 904512496\n3 1 497469654 973509612\n4 1 307142272 872178157\n374358788 4 509276232\n243448834 6 585993193\n156350864 4 682491610\n131643541 8 836902943\n152874385 6 495945159\n382276121 1 481368090\n552433623 2 884584430\n580376205 2 639442239\n108790644 7 879874292\n883275610 1 994982498\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>4\n6 1\n4 1\n8\n6 1\n1\n2\n2\n7 2\n1\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>500</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There are <var>N</var> cities numbered <var>1</var> through <var>N</var>, and <var>M</var> buses that go between these cities. The <var>i</var>-th bus <var>(1 \\leq i \\leq M)</var> departs from City <var>A_i</var> at time <var>S_i+0.5</var> and arrive at City <var>B_i</var> at time <var>T_i+0.5</var>.</p>\n<p>Takahashi will travel between these <var>N</var> cities. When he is in City <var>p</var> at time <var>t</var>, he will do the following.</p>\n<ol>\n<li>If there is a bus that departs from City <var>p</var> not earlier than time <var>t</var>, take the bus that departs the earliest among those buses to get to another city.</li>\n<li>If there is no such bus, do nothing and stay in City <var>p</var>.</li>\n</ol>\n<p>Takahashi repeats doing the above until there is no bus to take. It is guaranteed that all <var>M</var> buses depart at different times, so the bus to take is always uniquely determined. Additionally, the time needed to change buses is negligible.</p>\n<p>Here is your task: process <var>Q</var> queries, the <var>i</var>-th <var>(1 \\leq i \\leq Q)</var> of which is as follows.</p>\n<ul>\n<li>If Takahashi begins his travel in City <var>Y_i</var> at time <var>X_i</var>, in which city or on which bus will he be at time <var>Z_i</var>?</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>2 \\leq N \\leq 10^5</var></li>\n<li><var>1 \\leq M \\leq 10^5</var></li>\n<li><var>1 \\leq Q \\leq 10^5</var></li>\n<li><var>1 \\leq A_i,B_i \\leq N\\ (1 \\leq i \\leq M)</var></li>\n<li><var>A_i \\neq B_i\\ (1 \\leq i \\leq M)</var></li>\n<li><var>1 \\leq S_i \\lt T_i \\leq 10^9\\ (1 \\leq i \\leq M)</var></li>\n<li><var>S_i \\neq S_j\\ (i \\neq j)</var></li>\n<li><var>1 \\leq X_i \\lt Z_i \\leq 10^9\\ (1 \\leq i \\leq Q)</var></li>\n<li><var>1 \\leq Y_i \\leq N\\ (1 \\leq i \\leq Q)</var></li>\n<li>All values in input are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>M</var> <var>Q</var>\n<var>A_1</var> <var>B_1</var> <var>S_1</var> <var>T_1</var>\n<var>A_2</var> <var>B_2</var> <var>S_2</var> <var>T_2</var>\n<var>\\hspace{1.8cm}\\vdots</var>\n<var>A_M</var> <var>B_M</var> <var>S_M</var> <var>T_M</var>\n<var>X_1</var> <var>Y_1</var> <var>Z_1</var>\n<var>X_2</var> <var>Y_2</var> <var>Z_2</var>\n<var>\\hspace{1.2cm}\\vdots</var>\n<var>X_Q</var> <var>Y_Q</var> <var>Z_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print <var>Q</var> lines. The <var>i</var>-th line should contain the response to the <var>i</var>-th query as follows.</p>\n<ul>\n<li>If Takashi is on some bus at time <var>Z_i</var>, print two integers representing the city from which the bus departs and the city at which the bus arrives, in this order, with a space between them.</li>\n<li>Otherwise, that is, if Takahashi is in some city at time <var>Z_i</var>, print an integer representing that city.</li>\n</ul>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>3 2 3\n1 2 1 3\n2 3 3 5\n1 1 5\n2 2 3\n1 3 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>2 3\n2\n3\n</pre>\n<p>In the first query, Takahashi will travel as follows.</p>\n<ol>\n<li>Start in City <var>1</var> at time <var>1</var>.</li>\n<li>Take the bus that departs from City <var>1</var> at time <var>1.5</var> and arrives at City <var>2</var> at time <var>3.5</var>.</li>\n<li>Take the bus that departs from City <var>2</var> at time <var>3.5</var> and arrives at City <var>3</var> at time <var>5.5</var>.</li>\n<li>Since no bus departs from City <var>3</var> at time <var>5.5</var> or later, stay in City <var>3</var> (forever).</li>\n</ol>\n<p>At time <var>5</var>, he will be on the bus that departs from City <var>2</var> and arrives at City <var>3</var>. Thus, as specified in the Output section, we should print <var>2</var> and <var>3</var> with a space between them.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>8 10 10\n4 3 329982133 872113932\n6 8 101082040 756263297\n4 7 515073851 793074419\n8 7 899017043 941751547\n5 7 295510441 597348810\n7 2 688716395 890599546\n6 1 414221915 748470452\n6 4 810915860 904512496\n3 1 497469654 973509612\n4 1 307142272 872178157\n374358788 4 509276232\n243448834 6 585993193\n156350864 4 682491610\n131643541 8 836902943\n152874385 6 495945159\n382276121 1 481368090\n552433623 2 884584430\n580376205 2 639442239\n108790644 7 879874292\n883275610 1 994982498\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>4\n6 1\n4 1\n8\n6 1\n1\n2\n2\n7 2\n1\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc212/tasks/abc212_f"}