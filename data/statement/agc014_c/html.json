{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>700</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>高橋君は建物の中に閉じ込められてしまいました。</p>\n<p>この建物は <var>H</var> 行 <var>W</var> 列に並んだ <var>H×W</var> 個の部屋からなり、上から <var>i</var> 行目、左から <var>j</var> 列目の部屋は <var>(i,j)</var> で表され、その部屋の状態は <var>A_{i,j}</var> で表されています。\n<var>A_{i,j}=</var> <code>#</code> の場合は、この部屋は閉じられており、<var>A_{i,j}=</var> <code>.</code> の場合は、この部屋には自由に出入りできます。\nそして、 <var>A_{i,j}=</var> <code>S</code> となる部屋が高橋君の今いる部屋です。ただし、高橋君が今いる部屋も自由に出入りできる部屋です。</p>\n<p>また、<var>1</var> 行目、<var>1</var> 列目、<var>H</var> 行目、<var>W</var> 列目のいずれかに含まれる部屋は建物の外につながっており、\nそれ以外の各部屋 <var>(i,j)</var> は <var>4</var> つの部屋 <var>(i-1,j)</var> <var>,</var> <var>(i+1,j)</var> <var>,</var> <var>(i,j-1)</var> <var>,</var> <var>(i,j+1)</var> と隣接しています。</p>\n<p>高橋君はこの建物から脱出するために魔法を使うことにしました。一回の魔法で高橋君は以下の操作ができます。</p>\n<ul>\n<li>高橋君は今いる部屋から隣り合う部屋に移動することを <var>K</var> 回まで繰り返す。ただし、閉じられている部屋には移動することはできない。</li>\n<li>その後、閉じられている部屋を <var>K</var> 個まで選び、それらを開いた状態にする。それらの部屋は以降自由に出入りできるようになる。</li>\n</ul>\n<p>ただし、これらの操作では、全く動かなかったり、閉じられている部屋があっても開かなかったりしてもよいです。</p>\n<p>高橋君の目標は建物の外につながっている部屋のいずれかにたどり着くことです。そのために必要な魔法の回数の最小値を求めてください。</p>\n<p>ただし、はじめに高橋君がいる部屋は建物の外とはつながっていないことが保証されています。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>3 ≦ H ≦ 800</var></li>\n<li><var>3 ≦ W ≦ 800</var></li>\n<li><var>1 ≦ K ≦ H×W</var></li>\n<li><var>A_{i,j}</var> は <code>#</code> , <code>.</code> , <code>S</code> のいずれかである。</li>\n<li><var>A_{i,j}=</var> <code>S</code> となる <var>(i,j)</var> は一意に存在し、<var>2 ≦ i ≦ H-1 , 2 ≦ j ≦ W-1</var> を満たす。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>H</var> <var>W</var> <var>K</var>\n<var>A_{1,1}A_{1,2}</var>...<var>A_{1,W}</var>\n:\n<var>A_{H,1}A_{H,2}</var>...<var>A_{H,W}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>高橋君が必要な魔法の回数の最小値を出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>3 3 3\n#.#\n#S.\n###\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>1\n</pre>\n\n<p>高橋君は最初の魔法で部屋 <var>(1,2)</var> に移動することができるので、<var>1</var> 回の魔法で十分です。</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>3 3 3\n###\n#S#\n###\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>2\n</pre>\n\n<p>高橋君は最初の魔法では移動することができないですが、部屋 <var>(1,2)</var> を <var>1</var> 回目の魔法で開けることができます。\nそして、次の魔法で部屋 <var>(1,2)</var> に移動することで、<var>2</var> 回の魔法で目標を達成できます。</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>7 7 2\n#######\n#######\n##...##\n###S###\n##.#.##\n###.###\n#######\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>2\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>700</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>Takahashi is locked within a building.</p>\n<p>This building consists of <var>H×W</var> rooms, arranged in <var>H</var> rows and <var>W</var> columns.\nWe will denote the room at the <var>i</var>-th row and <var>j</var>-th column as <var>(i,j)</var>. The state of this room is represented by a character <var>A_{i,j}</var>. If <var>A_{i,j}=</var> <code>#</code>, the room is locked and cannot be entered; if <var>A_{i,j}=</var> <code>.</code>, the room is not locked and can be freely entered.\nTakahashi is currently at the room where <var>A_{i,j}=</var> <code>S</code>, which can also be freely entered.</p>\n<p>Each room in the <var>1</var>-st row, <var>1</var>-st column, <var>H</var>-th row or <var>W</var>-th column, has an exit.\nEach of the other rooms <var>(i,j)</var> is connected to four rooms: <var>(i-1,j)</var>, <var>(i+1,j)</var>, <var>(i,j-1)</var> and <var>(i,j+1)</var>.</p>\n<p>Takahashi will use his magic to get out of the building. In one cast, he can do the following:</p>\n<ul>\n<li>Move to an adjacent room at most <var>K</var> times, possibly zero. Here, locked rooms cannot be entered.</li>\n<li>Then, select and unlock at most <var>K</var> locked rooms, possibly zero. Those rooms will remain unlocked from then on.</li>\n</ul>\n<p>His objective is to reach a room with an exit. Find the minimum necessary number of casts to do so.</p>\n<p>It is guaranteed that Takahashi is initially at a room without an exit.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>3 ≤ H ≤ 800</var></li>\n<li><var>3 ≤ W ≤ 800</var></li>\n<li><var>1 ≤ K ≤ H×W</var></li>\n<li>Each <var>A_{i,j}</var> is <code>#</code> , <code>.</code>  or <code>S</code>.</li>\n<li>There uniquely exists <var>(i,j)</var> such that <var>A_{i,j}=</var> <code>S</code>, and it satisfies <var>2 ≤ i ≤ H-1</var> and <var>2 ≤ j ≤ W-1</var>.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>Input is given from Standard Input in the following format:</p>\n<pre><var>H</var> <var>W</var> <var>K</var>\n<var>A_{1,1}A_{1,2}</var>...<var>A_{1,W}</var>\n:\n<var>A_{H,1}A_{H,2}</var>...<var>A_{H,W}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the minimum necessary number of casts.</p>\n</section>\n</div>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>3 3 3\n#.#\n#S.\n###\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>1\n</pre>\n\n<p>Takahashi can move to room <var>(1,2)</var> in one cast.</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>3 3 3\n###\n#S#\n###\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>2\n</pre>\n\n<p>Takahashi cannot move in the first cast, but can unlock room <var>(1,2)</var>.\nThen, he can move to room <var>(1,2)</var> in the next cast, achieving the objective in two casts.</p>\n</section>\n</div>\n\n<hr>\n\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>7 7 2\n#######\n#######\n##...##\n###S###\n##.#.##\n###.###\n#######\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>2\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/agc014/tasks/agc014_c"}