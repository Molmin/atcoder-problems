{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>600</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>東西南北方向に <var>H\\times W</var> 個の区画に区切られた街があり、各区画にはちょうど <var>1</var> つのビルが立っています。<br>\n具体的には北から <var>i</var> 番目 <var>(1\\leq i\\leq H)</var> かつ西から <var>j</var> 番目 <var>(1\\leq j\\leq W)</var> の区画（以下、区画 <var>(i,j)</var> とよぶ）には <var>F_{i,j}</var> 階建てのビルがあります。</p>\n<p>高橋君には <var>2</var> 種類の移動方法があり、区画 <var>(i,j)</var> のビルの <var>X</var> 階 <var>(1\\leq X\\leq F_{i,j})</var> にいるとき、そこから次のような移動が可能です。</p>\n<ul>\n<li>同じビルの中の <var>1</var> つ上の階または <var>1</var> つ下の階へ <strong>階段</strong> を使って移動する。ただし、<var>1</var> 階から <var>1</var> つ下の階への移動および、<var>F_{i,j}</var> 階から <var>1</var> つ上の階への移動はできない。</li>\n<li>東西南北に隣接する区画にあるビルのうち、 <var>X</var> 階建て以上であるものを <var>1</var> つを選び、そのビルの <var>X</var> 階へ <strong>（上空）通路</strong> を使って移動する。</li>\n</ul>\n<p>ただし、区画 <var>(i,j)</var> と区画 <var>(i',j')</var> が東西南北に隣接するとは、<var>\\lvert i-i'\\rvert+\\lvert j-j'\\rvert=1</var> であることをさします。</p>\n<p><var>Q</var> 個の質問が与えられるので、それぞれの質問に答えてください。<var>i</var> 個目 <var>(1\\leq i\\leq Q)</var> の質問は次のようなものです。</p>\n<blockquote>\n<p>区画 <var>(A_i,B_i)</var> にあるビルの <var>Y_i</var> 階から、区画 <var>(C_i,D_i)</var> にあるビルの <var>Z_i</var> 階へ高橋君が移動する時に、\n<strong>階段</strong> を使う回数としてあり得る最小の値を求めよ。<br>\nここで、階段を使う回数は <var>1</var> つ上の階または <var>1</var> つ下の階へ移動するたびにカウントされ、同じビルの中でも重複してカウントされるものとする。\n(例えば、あるビルを <var>1</var> 階から <var>6</var> 階まで移動したとき、<var>5</var> 回階段を使用したと数える。)<br>\nまた、通路の使用回数を最小とする必要はないことに注意せよ。</p>\n</blockquote>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>1\\leq H \\leq 500</var></li>\n<li><var>1\\leq W \\leq 500</var></li>\n<li><var>1\\leq F_{i,j} \\leq 10^6</var></li>\n<li><var>1\\leq Q\\leq 2\\times 10^5</var></li>\n<li><var>1\\leq A_i,C_i\\leq H</var></li>\n<li><var>1\\leq B_i,D_i\\leq W</var></li>\n<li><var>1\\leq Y_i\\leq F_{A_i,B_i}</var></li>\n<li><var>1\\leq Z_i\\leq F_{C_i,D_i}</var></li>\n<li><var>(A_i,B_i,Y_i)\\neq (C_i,D_i,Z_i)</var></li>\n<li>入力はすべて整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>H</var> <var>W</var>\n<var>F_{1,1}</var> <var>F_{1,2}</var> <var>\\ldots</var> <var>F_{1,W}</var>\n<var>F_{2,1}</var> <var>F_{2,2}</var> <var>\\ldots</var> <var>F_{2,W}</var>\n<var>\\vdots</var>\n<var>F_{H,1}</var> <var>F_{H,2}</var> <var>\\ldots</var> <var>F_{H,W}</var>\n<var>Q</var>\n<var>A_1</var> <var>B_1</var> <var>Y_1</var> <var>C_1</var> <var>D_1</var> <var>Z_1</var>\n<var>A_2</var> <var>B_2</var> <var>Y_2</var> <var>C_2</var> <var>D_2</var> <var>Z_2</var>\n<var>\\vdots</var>\n<var>A_Q</var> <var>B_Q</var> <var>Y_Q</var> <var>C_Q</var> <var>D_Q</var> <var>Z_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p><var>Q</var> 行出力せよ。<var>i</var> 行目には <var>i</var> 番目の質問に対する答えを整数で出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>3 3\n12 10 6\n1 1 3\n8 6 7\n2\n1 1 10 3 1 6\n1 1 6 1 2 4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>10\n2\n</pre>\n<p><var>1</var> 番目の質問について、例えば以下のように移動すると階段を合計で <var>10</var> 回使用して、\n区画 <var>(1,1)</var> のビルの <var>10</var> 階から区画 <var>(3,1)</var> のビルの <var>6</var> 階へ移動することができます。</p>\n<ul>\n<li>通路を使って、区画 <var>(1,1)</var> のビルの <var>10</var> 階から区画 <var>(1,2)</var> のビルの <var>10</var> 階へ移動する。</li>\n<li>階段を <var>4</var> 回使って、区画 <var>(1,2)</var> のビルの <var>10</var> 階から <var>6</var> 階へ移動する。</li>\n<li>通路を使って、区画 <var>(1,2)</var> のビルの <var>6</var> 階から区画 <var>(1,3)</var> のビルの <var>6</var> 階へ移動する。</li>\n<li>階段を <var>3</var> 回使って、区画 <var>(1,3)</var> のビルの <var>6</var> 階から <var>3</var> 階へ移動する。</li>\n<li>通路を使って、区画 <var>(1,3)</var> のビルの <var>3</var> 階から区画 <var>(2,3)</var> のビルの <var>3</var> 階へ移動する。</li>\n<li>通路を使って、区画 <var>(2,3)</var> のビルの <var>3</var> 階から区画 <var>(3,3)</var> のビルの <var>3</var> 階へ移動する。</li>\n<li>階段を <var>3</var> 回使って、区画 <var>(3,3)</var> のビルの <var>3</var> 階から <var>6</var> 階へ移動する。</li>\n<li>通路を使って、区画 <var>(3,3)</var> のビルの <var>6</var> 階から区画 <var>(3,2)</var> のビルの <var>6</var> 階へ移動する。</li>\n<li>通路を使って、区画 <var>(3,2)</var> のビルの <var>6</var> 階から区画 <var>(3,1)</var> のビルの <var>6</var> 階へ移動する。</li>\n</ul>\n<p>階段の使用回数が <var>9</var> 回以下となるように、区画 <var>(1,1)</var> のビルの <var>10</var> 階から区画 <var>(3,1)</var> のビルの <var>6</var> 階へ移動することはできないため、<var>10</var> を出力します。</p>\n<p><var>2</var> 番目の質問については、区画 <var>(1,2)</var> のビルへ通路を用いて移動した後に、階段を <var>2</var> 回用いて <var>6</var> 階から <var>4</var> 階へ下りると、階段を <var>2</var> 回使用することで、区画 <var>(1,1)</var> のビルの <var>6</var> 階から区画 <var>(1,2)</var> のビルの <var>4</var> 階へ移動することができます。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>600</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is a city divided into <var>H \\times W</var> blocks in the north-south-east-west directions, and there is exactly one building in each block.<br>\nSpecifically, in the block at the <var>i</var>-th row from the north <var>(1\\leq i\\leq H)</var> and the <var>j</var>-th column from the west <var>(1\\leq j\\leq W)</var> (hereafter referred to as block <var>(i,j)</var>), there is a building of <var>F_{i,j}</var> floors.</p>\n<p>Takahashi has two ways of moving. If he is on the <var>X</var>-th floor <var>(1\\leq X\\leq F_{i,j})</var> of the building in block <var>(i,j)</var>, he can:</p>\n<ul>\n<li>Move up or down one floor within the same building using <strong>stairs</strong>. If <var>X=1</var>, he cannot move down; if <var>X=F_{i,j}</var>, he cannot move up.</li>\n<li>Choose a building with at least <var>X</var> floors in a cardinally adjacent block, and move to the <var>X</var>-th floor of that building using a <strong>(sky) walkway</strong>.</li>\n</ul>\n<p>Here, two blocks <var>(i,j)</var> and <var>(i',j')</var> are cardinally adjacent if and only if <var>\\lvert i - i'\\rvert + \\lvert j - j'\\rvert = 1</var>.</p>\n<p>You are given <var>Q</var> queries to be answered. The <var>i</var>-th query <var>(1\\leq i\\leq Q)</var> is the following.</p>\n<blockquote>\n<p>Find the minimum possible number of times that Takahashi uses <strong>stairs</strong> to move from the <var>Y_i</var>-th floor of the building in block <var>(A_i,B_i)</var> to the <var>Z_i</var>-th floor of the building in block <var>(C_i,D_i)</var>.<br>\nThe count of times using stairs is incremented each time he moves up or down one floor, possibly multiple times within the same building. (For example, moving from the 1st floor to the 6th floor of a building counts as <var>5</var> uses of stairs.)<br>\nNote that he does not have to minimize the number of times he uses walkways.</p>\n</blockquote>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>1\\leq H \\leq 500</var></li>\n<li><var>1\\leq W \\leq 500</var></li>\n<li><var>1\\leq F_{i,j} \\leq 10^6</var></li>\n<li><var>1\\leq Q\\leq 2\\times 10^5</var></li>\n<li><var>1\\leq A_i,C_i\\leq H</var></li>\n<li><var>1\\leq B_i,D_i\\leq W</var></li>\n<li><var>1\\leq Y_i\\leq F_{A_i,B_i}</var></li>\n<li><var>1\\leq Z_i\\leq F_{C_i,D_i}</var></li>\n<li><var>(A_i,B_i,Y_i)\\neq (C_i,D_i,Z_i)</var></li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>H</var> <var>W</var>\n<var>F_{1,1}</var> <var>F_{1,2}</var> <var>\\ldots</var> <var>F_{1,W}</var>\n<var>F_{2,1}</var> <var>F_{2,2}</var> <var>\\ldots</var> <var>F_{2,W}</var>\n<var>\\vdots</var>\n<var>F_{H,1}</var> <var>F_{H,2}</var> <var>\\ldots</var> <var>F_{H,W}</var>\n<var>Q</var>\n<var>A_1</var> <var>B_1</var> <var>Y_1</var> <var>C_1</var> <var>D_1</var> <var>Z_1</var>\n<var>A_2</var> <var>B_2</var> <var>Y_2</var> <var>C_2</var> <var>D_2</var> <var>Z_2</var>\n<var>\\vdots</var>\n<var>A_Q</var> <var>B_Q</var> <var>Y_Q</var> <var>C_Q</var> <var>D_Q</var> <var>Z_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print <var>Q</var> lines. The <var>i</var>-th line should contain the answer to the <var>i</var>-th query as an integer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>3 3\n12 10 6\n1 1 3\n8 6 7\n2\n1 1 10 3 1 6\n1 1 6 1 2 4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>10\n2\n</pre>\n<p>For the first query, for example, it is possible to move from the 10th floor of the building in block <var>(1,1)</var> to the 6th floor of the building in block <var>(3,1)</var> by using stairs a total of <var>10</var> times, in the following manner:</p>\n<ul>\n<li>Move from the 10th floor of the building in block <var>(1,1)</var> to the 10th floor of the building in block <var>(1,2)</var> via a walkway.</li>\n<li>Use stairs <var>4</var> times to go from the 10th floor down to the 6th floor of the building in block <var>(1,2)</var>.</li>\n<li>Move from the 6th floor of the building in block <var>(1,2)</var> to the 6th floor of the building in block <var>(1,3)</var> via a walkway.</li>\n<li>Use stairs <var>3</var> times to go from the 6th floor down to the 3rd floor of the building in block <var>(1,3)</var>.</li>\n<li>Move from the 3rd floor of the building in block <var>(1,3)</var> to the 3rd floor of the building in block <var>(2,3)</var> via a walkway.</li>\n<li>Move from the 3rd floor of the building in block <var>(2,3)</var> to the 3rd floor of the building in block <var>(3,3)</var> via a walkway.</li>\n<li>Use stairs <var>3</var> times to go from the 3rd floor up to the 6th floor of the building in block <var>(3,3)</var>.</li>\n<li>Move from the 6th floor of the building in block <var>(3,3)</var> to the 6th floor of the building in block <var>(3,2)</var> via a walkway.</li>\n<li>Move from the 6th floor of the building in block <var>(3,2)</var> to the 6th floor of the building in block <var>(3,1)</var> via a walkway.</li>\n</ul>\n<p>It is impossible to make this journey using at most <var>9</var> uses of stairs, so we output <var>10</var>.</p>\n<p>For the second query, if you first use a walkway to go to the building in block <var>(1,2)</var>, and then use the stairs twice to go from the 6th floor down to the 4th floor, it is possible to move from the 6th floor of the building in block <var>(1,1)</var> to the 4th floor of the building in block <var>(1,2)</var> by using the stairs twice.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc394/tasks/abc394_g"}