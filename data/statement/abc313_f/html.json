{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>625</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>1</var> から <var>N</var> までの番号が付けられた <var>N</var> 枚のカードがあります。\nカードのそれぞれの面には整数が書かれており、カード <var>i</var> の表には <var>A_i</var> が、裏には <var>B_i</var> が書かれています。\n最初、全てのカードは表を向いています。</p>\n<p>今ここに <var>M</var> 台のマシーンがあり、<var>1</var> から <var>M</var> までの番号が付けられています。\nマシーン <var>j</var> は（相異なるとは限らない）<var>2</var> つの <var>1</var> 以上 <var>N</var> 以下の整数 <var>X_j,Y_j</var> を持っており、マシーン <var>j</var> が起動されると、\n<var>\\frac{1}{2}</var> の確率でカード <var>X_j</var> を、残りの <var>\\frac{1}{2}</var> の確率でカード <var>Y_j</var> を裏返します。\nこの確率は各起動ごとに独立です。</p>\n<p>すぬけくんは今から以下の操作を順に行います。</p>\n<ol>\n<li><var>1</var> 以上 <var>M</var> 以下の整数からなる集合 <var>S</var> を選ぶ。</li>\n<li><var>S</var> に含まれる番号のマシーンを、番号が小さい順に <var>1</var> 度ずつ起動する。</li>\n</ol>\n<p>すぬけくんがうまく <var>S</var> を選んだとき、「すべての操作が終了した後に各カードが向いている面に書かれた整数の合計」の期待値が最大でいくつになるか求めてください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>1\\leq N \\leq 40</var></li>\n<li><var>1\\leq M \\leq 10^5</var></li>\n<li><var>1\\leq A_i,B_i \\leq 10^4</var></li>\n<li><var>1\\leq X_j,Y_j \\leq N</var></li>\n<li>入力は全て整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var> <var>M</var>\n<var>A_1</var> <var>B_1</var>\n<var>\\vdots</var>\n<var>A_N</var> <var>B_N</var>\n<var>X_1</var> <var>Y_1</var>\n<var>\\vdots</var>\n<var>X_M</var> <var>Y_M</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力せよ。\n出力は、真の値との絶対誤差または相対誤差が <var>10^{-6}</var> 以下のとき正解と判定される。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>3 1\n3 10\n10 6\n5 2\n1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>19.500000\n</pre>\n<p><var>S</var> として空集合を選んだ場合、どのマシーンも起動されないので、「すべての操作が終了した後に各カードが向いている面に書かれた整数の合計」の期待値は <var>3+10+5=18</var> です。</p>\n<p><var>S</var> として <var>\\lbrace 1 \\rbrace</var> を選んだ場合、マシーン <var>1</var> が起動され、</p>\n<ul>\n<li>カード <var>X_1 = 1</var> が裏返された場合、「すべての操作が終了した後に各カードが向いている面に書かれた整数の合計」は <var>10+10+5=25</var></li>\n<li>カード <var>Y_1 = 2</var> が裏返された場合、「すべての操作が終了した後に各カードが向いている面に書かれた整数の合計」は <var>3+6+5=14</var></li>\n</ul>\n<p>なので、その期待値は <var>\\frac{25+14}{2} = 19.5</var> です。</p>\n<p>よって、「すべての操作が終了した後に各カードが向いている面に書かれた整数の合計」の期待値の最大値は <var>19.5</var> です。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>1 3\n5 100\n1 1\n1 1\n1 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>100.000000\n</pre>\n<p>同じ <var>(X_j,Y_j)</var> を持つマシーンが複数存在することもあります。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>8 10\n6918 9211\n16 1868\n3857 8537\n3340 8506\n6263 7940\n1449 4593\n5902 1932\n310 6991\n4 4\n8 6\n3 5\n1 1\n4 2\n5 6\n7 5\n3 3\n1 5\n3 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>45945.000000\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>625</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There are <var>N</var> cards numbered <var>1</var> through <var>N</var>.\nEach face of a card has an integer written on it; card <var>i</var> has <var>A_i</var> on its front and <var>B_i</var> on its back.\nInitially, all cards are face up.</p>\n<p>There are <var>M</var> machines numbered <var>1</var> through <var>M</var>.\nMachine <var>j</var> has two (not necessarily distinct) integers <var>X_j</var> and <var>Y_j</var> between <var>1</var> and <var>N</var>.  If you power up machine <var>j</var>,\nit flips card <var>X_j</var> with the probability of <var>\\frac{1}{2}</var>, and flips card <var>Y_j</var> with the remaining probability of <var>\\frac{1}{2}</var>.\nThis probability is independent for each power-up.</p>\n<p>Snuke will perform the following procedure.</p>\n<ol>\n<li>Choose a set <var>S</var> consisting of integers from <var>1</var> through <var>M</var>.</li>\n<li>For each element in <var>S</var> in ascending order, power up the machine with that number.</li>\n</ol>\n<p>Among Snuke's possible choices of <var>S</var>, find the maximum expected value of the sum of the integers written on the face-up sides of the cards after the procedure.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>1\\leq N \\leq 40</var></li>\n<li><var>1\\leq M \\leq 10^5</var></li>\n<li><var>1\\leq A_i,B_i \\leq 10^4</var></li>\n<li><var>1\\leq X_j,Y_j \\leq N</var></li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>M</var>\n<var>A_1</var> <var>B_1</var>\n<var>\\vdots</var>\n<var>A_N</var> <var>B_N</var>\n<var>X_1</var> <var>Y_1</var>\n<var>\\vdots</var>\n<var>X_M</var> <var>Y_M</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer.\nYour output is considered correct if the absolute or relative difference from the true value is at most <var>10^{-6}</var>.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>3 1\n3 10\n10 6\n5 2\n1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>19.500000\n</pre>\n<p>If <var>S</var> is chosen to be an empty set, no machine is powered up, so the expected sum of the integers written on the face-up sides of the cards after the procedure is <var>3+10+5=18</var>.</p>\n<p>If <var>S</var> is chosen to be <var>\\lbrace 1 \\rbrace</var>, machine <var>1</var> is powered up.</p>\n<ul>\n<li>If card <var>X_1 = 1</var> is flipped, the expected sum of the integers written on the face-up sides of the cards after the procedure is <var>10+10+5=25</var>.</li>\n<li>If card <var>Y_1 = 2</var> is flipped, the expected sum of the integers written on the face-up sides of the cards after the procedure is <var>3+6+5=14</var>.</li>\n</ul>\n<p>Thus, the expected value is <var>\\frac{25+14}{2} = 19.5</var>.</p>\n<p>Therefore, the maximum expected value of the sum of the integers written on the face-up sides of the cards after the procedure is <var>19.5</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>1 3\n5 100\n1 1\n1 1\n1 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>100.000000\n</pre>\n<p>Different machines may have the same <var>(X_j,Y_j)</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>8 10\n6918 9211\n16 1868\n3857 8537\n3340 8506\n6263 7940\n1449 4593\n5902 1932\n310 6991\n4 4\n8 6\n3 5\n1 1\n4 2\n5 6\n7 5\n3 3\n1 5\n3 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>45945.000000\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc313/tasks/abc313_f"}