{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>500</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>長さ <var>N</var> の整数列 <var>S</var> があります。はじめ、<var>S</var> の要素はすべて <var>0</var> です。</p>\n<p>また、長さ <var>Q</var> の整数列 <var>P=(P_1,P_2,\\dots,P_Q)</var> と <var>V=(V_1,V_2,\\dots,V_Q)</var> が与えられます。</p>\n<p>すぬけ君は、数列 <var>S</var> に <var>Q</var> 回の操作を順に行いたいです。<var>i</var> 回目の操作は以下です。</p>\n<ul>\n<li>以下のどちらかの操作を行う。<ul>\n<li><var>S_1,S_2,\\dots,S_{P_i}</var> をすべて <var>V_i</var> に置き換える。ただし、この操作の前に <var>S_1,S_2,\\dots,S_{P_i}</var> の中に <var>V_i</var> より真に大きい要素がある場合、すぬけ君は泣き出す。</li>\n<li><var>S_{P_i},S_{P_i+1},\\dots,S_N</var> をすべて <var>V_i</var> に置き換える。ただし、この操作の前に <var>S_{P_i},S_{P_i+1},\\dots,S_N</var> の中に <var>V_i</var> より真に大きい要素がある場合、すぬけ君は泣き出す。</li>\n</ul>\n</li>\n</ul>\n<p>すぬけ君が泣き出さないように <var>Q</var> 回の操作をすべて行うことのできるような操作列の個数を <var>998244353</var> で割った余りを求めてください。</p>\n<p>ただし、<var>2</var> つの操作列が異なるとは、ある <var>1\\leq i\\leq Q</var> が存在して、<var>i</var> 番目の操作でどちらの操作を選択したかが異なることを指します。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>2 \\leq N \\leq 5000</var></li>\n<li><var>1 \\leq Q \\leq 5000</var></li>\n<li><var>1 \\leq P_i \\leq N</var></li>\n<li><var>1 \\leq V_i \\leq 10^9</var></li>\n<li>入力はすべて整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var> <var>Q</var>\n<var>P_1</var> <var>V_1</var>\n<var>P_2</var> <var>V_2</var>\n<var>\\vdots</var>\n<var>P_Q</var> <var>V_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを整数として出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>8 3\n1 8\n8 1\n2 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>1\n</pre>\n<p>以下のようにするとすぬけ君が泣き出さないように <var>3</var> 回の操作を行うことができます。</p>\n<ul>\n<li><var>S_1</var> を <var>8</var> に置き換える。</li>\n<li><var>S_8</var> を <var>1</var> に置き換える。</li>\n<li><var>S_2,S_3,\\dots,S_8</var> を <var>1</var> に置き換える。</li>\n</ul>\n<p>これ以外に条件を満たす操作列はないので、<var>1</var> が答えです。例えば、<var>1</var> 回目の操作で <var>S_1,S_2,\\dots,S_8</var> を <var>8</var> に置き換えると、<var>2</var> 回目の操作でどちらを選んでもすぬけ君が泣き出してしまいます。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>8 3\n8 1\n1 8\n1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>0\n</pre>\n<p><var>2</var> 回目までの操作をどのように行っても <var>3</var> 回目の操作ですぬけ君が泣き出してしまいます。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>241 82\n190 3207371\n229 3639088\n61 4428925\n84 17258698\n34 42692503\n207 59753183\n180 67198566\n78 99285033\n60 102449991\n234 122146510\n111 126959145\n141 152331579\n78 159855439\n11 169658471\n22 189991287\n37 204602946\n73 209329065\n72 215363269\n152 236450854\n175 237822921\n22 261431608\n144 252550201\n54 268889550\n238 276997357\n69 313065279\n226 330144323\n6 335788783\n126 345410019\n220 348318997\n166 365778763\n142 382251905\n200 406191336\n234 392702679\n83 409660987\n183 410908761\n142 445707116\n205 470279207\n230 486436406\n156 494269002\n113 495687706\n200 500005738\n162 505246499\n201 548652987\n86 449551554\n62 459527873\n32 574001635\n230 601073337\n175 610244315\n174 613857555\n181 637452273\n158 637866397\n148 648101378\n172 646898076\n144 682578257\n239 703460335\n192 713255331\n28 727075136\n196 730768166\n111 751850547\n90 762445737\n204 762552166\n72 773170159\n240 803415865\n32 798873367\n195 814999380\n72 842641864\n125 851815348\n116 858041919\n200 869948671\n195 873324903\n5 877767414\n105 877710280\n150 877719360\n9 884707717\n230 880263190\n88 967344715\n49 977643789\n167 979463984\n70 981400941\n114 991068035\n94 991951735\n141 995762200\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>682155965\n</pre>\n<p><var>998244353</var> で割った余りを求めることを忘れないでください。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>500</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is an integer sequence <var>S</var> of length <var>N</var>. Initially, all elements of <var>S</var> are <var>0</var>.</p>\n<p>You are also given two integer sequences of length <var>Q</var>: <var>P=(P_1,P_2,\\dots,P_Q)</var> and <var>V=(V_1,V_2,\\dots,V_Q)</var>.</p>\n<p>Snuke wants to perform <var>Q</var> operations on the sequence <var>S</var> in order. The <var>i</var>-th operation is as follows:</p>\n<ul>\n<li>Perform one of the following:<ul>\n<li>Replace each of the elements <var>S_1, S_2, \\dots, S_{P_i}</var> with <var>V_i</var>. However, before this operation, if there is an element among <var>S_1, S_2, \\dots, S_{P_i}</var> that is strictly greater than <var>V_i</var>, Snuke will start crying.</li>\n<li>Replace each of the elements <var>S_{P_i}, S_{P_i+1}, \\dots, S_N</var> with <var>V_i</var>. However, before this operation, if there is an element among <var>S_{P_i}, S_{P_i+1}, \\dots, S_N</var> that is strictly greater than <var>V_i</var>, Snuke will start crying.</li>\n</ul>\n</li>\n</ul>\n<p>Find the number of sequences of <var>Q</var> operations where Snuke can perform all operations without crying, modulo <var>998244353</var>.</p>\n<p>Two sequences of operations are distinguished if and only if there is <var>1 \\leq i \\leq Q</var> such that the choice for the <var>i</var>-th operation is different.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>2 \\leq N \\leq 5000</var></li>\n<li><var>1 \\leq Q \\leq 5000</var></li>\n<li><var>1 \\leq P_i \\leq N</var></li>\n<li><var>1 \\leq V_i \\leq 10^9</var></li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>Q</var>\n<var>P_1</var> <var>V_1</var>\n<var>P_2</var> <var>V_2</var>\n<var>\\vdots</var>\n<var>P_Q</var> <var>V_Q</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer as an integer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>8 3\n1 8\n8 1\n2 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>1\n</pre>\n<p>Snuke can perform the three operations without crying as follows:</p>\n<ul>\n<li>Replace <var>S_1</var> with <var>8</var>.</li>\n<li>Replace <var>S_8</var> with <var>1</var>.</li>\n<li>Replace <var>S_2, S_3, \\dots, S_8</var> with <var>1</var>.</li>\n</ul>\n<p>No other sequences of operations satisfy the conditions, so the answer is <var>1</var>. For example, if he replaces <var>S_1, S_2, \\dots, S_8</var> with <var>8</var> in the first operation, he will cry in the second operation regardless of the choice.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>8 3\n8 1\n1 8\n1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>0\n</pre>\n<p>No matter how he performs the first two operations, he will cry in the third operation.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>241 82\n190 3207371\n229 3639088\n61 4428925\n84 17258698\n34 42692503\n207 59753183\n180 67198566\n78 99285033\n60 102449991\n234 122146510\n111 126959145\n141 152331579\n78 159855439\n11 169658471\n22 189991287\n37 204602946\n73 209329065\n72 215363269\n152 236450854\n175 237822921\n22 261431608\n144 252550201\n54 268889550\n238 276997357\n69 313065279\n226 330144323\n6 335788783\n126 345410019\n220 348318997\n166 365778763\n142 382251905\n200 406191336\n234 392702679\n83 409660987\n183 410908761\n142 445707116\n205 470279207\n230 486436406\n156 494269002\n113 495687706\n200 500005738\n162 505246499\n201 548652987\n86 449551554\n62 459527873\n32 574001635\n230 601073337\n175 610244315\n174 613857555\n181 637452273\n158 637866397\n148 648101378\n172 646898076\n144 682578257\n239 703460335\n192 713255331\n28 727075136\n196 730768166\n111 751850547\n90 762445737\n204 762552166\n72 773170159\n240 803415865\n32 798873367\n195 814999380\n72 842641864\n125 851815348\n116 858041919\n200 869948671\n195 873324903\n5 877767414\n105 877710280\n150 877719360\n9 884707717\n230 880263190\n88 967344715\n49 977643789\n167 979463984\n70 981400941\n114 991068035\n94 991951735\n141 995762200\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>682155965\n</pre>\n<p>Remember to take the count modulo <var>998244353</var>.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/arc182/tasks/arc182_a"}