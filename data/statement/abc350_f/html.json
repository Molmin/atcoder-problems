{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>550</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>英大小文字と <code>(</code> 、 <code>)</code> からなる文字列 <var>S=S_1 S_2 S_3 \\dots S_{|S|}</var> が与えられます。<br>\n文字列 <var>S</var> 中の括弧は、対応が取れています。</p>\n<p>次の操作を、操作ができなくなるまで繰り返します。</p>\n<ul>\n<li>まず、以下の条件を全て満たす整数組 <var>(l,r)</var> をひとつ選択する。<ul>\n<li><var>l &lt; r</var></li>\n<li><var>S_l =</var> <code>(</code></li>\n<li><var>S_r =</var> <code>)</code></li>\n<li><var>S_{l+1},S_{l+2},\\dots,S_{r-1}</var> は全て英大文字または英小文字である</li>\n</ul>\n</li>\n<li><var>T=\\overline{S_{r-1}S_{r-2} \\dots S_{l+1}}</var> とする。<ul>\n<li>但し、 <var>\\overline{x}</var> は <var>x</var> の大文字と小文字を反転させた文字列を指す。</li>\n</ul>\n</li>\n<li>その後、 <var>S</var> の <var>l</var> 文字目から <var>r</var> 文字目までを削除し、削除した位置に <var>T</var> を挿入する。</li>\n</ul>\n<p>詳細は入出力例を参照してください。</p>\n<p>上記の操作を使って全ての <code>(</code> と <code>)</code> を除去することができ、最終的な文字列は操作の方法や順序によらないことが証明できます。<br>\nこのとき、最終的な文字列を求めてください。</p>\n<details>\n<summary>「 <var>S</var> 中の括弧の対応が取れている」とは?</summary>\nまず、正しい括弧列を次の通り定義します。\n\n<ul>\n<li>正しい括弧列とは、以下のいずれかの条件を満たす文字列です。</li>\n<ul>\n<li>空文字列</li>\n<li>ある正しい括弧列 <var>A</var> が存在して、 <code>(</code>, <var>A</var>, <code>)</code> をこの順に連結した文字列</li>\n<li>ある空でない正しい括弧列 <var>A,B</var> が存在して、 <var>A,B</var> をこの順に連結した文字列</li>\n</ul>\n</ul>\n\n<var>S</var> 中の括弧の対応が取れているとは、 <var>S</var> 中の <code>(</code> と <code>)</code> を順序を保って抜き出した時、それが正しい括弧列となることを指す。\n</details>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>1 \\le |S| \\le 5 \\times 10^5</var></li>\n<li><var>S</var> は英大小文字と <code>(</code> 、 <code>)</code> からなる</li>\n<li><var>S</var> 中の括弧は対応が取れている</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>S</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>((A)y)x\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>YAx\n</pre>\n<p><var>S=</var> <code>((A)y)x</code> に対して操作を行います。</p>\n<ul>\n<li><var>l=2,r=4</var> を選択します。このとき削除される文字列は <code>(A)</code> で、代わりに <code>a</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>(ay)x</code> となります。</li>\n</ul>\n</li>\n<li><var>l=1,r=4</var> を選択します。このとき削除される文字列は <code>(ay)</code> で、代わりに <code>YA</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>YAx</code> となります。</li>\n</ul>\n</li>\n</ul>\n<p>括弧を除去した結果、文字列は <code>YAx</code> となったので、これを出力してください。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>((XYZ)n(X(y)Z))\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>XYZNXYZ\n</pre>\n<p><var>S=</var> <code>((XYZ)n(X(y)Z))</code> に対して操作を行います。</p>\n<ul>\n<li><var>l=10,r=12</var> を選択します。このとき削除される文字列は <code>(y)</code> で、代わりに <code>Y</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>((XYZ)n(XYZ))</code> となります。</li>\n</ul>\n</li>\n<li><var>l=2,r=6</var> を選択します。このとき削除される文字列は <code>(XYZ)</code> で、代わりに <code>zyx</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>(zyxn(XYZ))</code> となります。</li>\n</ul>\n</li>\n<li><var>l=6,r=10</var> を選択します。このとき削除される文字列は <code>(XYZ)</code> で、代わりに <code>zyx</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>(zyxnzyx)</code> となります。</li>\n</ul>\n</li>\n<li><var>l=1,r=9</var> を選択します。このとき削除される文字列は <code>(zyxnzyx)</code> で、代わりに <code>XYZNXYZ</code> が挿入されます。<ul>\n<li>この操作の結果、 <var>S=</var> <code>XYZNXYZ</code> となります。</li>\n</ul>\n</li>\n</ul>\n<p>括弧を除去した結果、文字列は <code>XYZNXYZ</code> となったので、これを出力してください。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>(((()))(()))(())\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre></pre>\n<p>操作結果が空文字列になる場合もあります。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 4</h3><pre>dF(qT(plC())NnnfR(GsdccC))PO()KjsiI((ysA)eWW)ve\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 4</h3><pre>dFGsdccCrFNNnplCtQPOKjsiIwwEysAve\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score: <var>550</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>You are given a string <var>S = S_1 S_2 S_3 \\dots S_{|S|}</var> consisting of uppercase and lowercase English letters, <code>(</code>, and <code>)</code>.<br>\nThe parentheses in the string <var>S</var> are properly matched.</p>\n<p>Repeat the following operation until no more operations can be performed:</p>\n<ul>\n<li>First, select one pair of integers <var>(l, r)</var> that satisfies all of the following conditions:<ul>\n<li><var>l &lt; r</var></li>\n<li><var>S_l =</var> <code>(</code></li>\n<li><var>S_r =</var> <code>)</code></li>\n<li>Each of the characters <var>S_{l+1}, S_{l+2}, \\dots, S_{r-1}</var> is an uppercase or lowercase English letter.</li>\n</ul>\n</li>\n<li>Let <var>T = \\overline{S_{r-1} S_{r-2} \\dots S_{l+1}}</var>.<ul>\n<li>Here, <var>\\overline{x}</var> denotes the string obtained by toggling the case of each character in <var>x</var> (uppercase to lowercase and vice versa).</li>\n</ul>\n</li>\n<li>Then, delete the <var>l</var>-th through <var>r</var>-th characters of <var>S</var> and insert <var>T</var> at the position where the deletion occurred.</li>\n</ul>\n<p>Refer to the sample inputs and outputs for clarification.</p>\n<p>It can be proved that it is possible to remove all <code>(</code>s and <code>)</code>s from the string using the above operations, and the final string is independent of how and in what order the operations are performed.<br>\nDetermine the final string.</p>\n<details>\n<summary>What does it mean that the parentheses in <var>S</var> are properly matched?</summary>\nFirst, a correct parenthesis sequence is defined as follows:\n\n<ul>\n<li>A correct parenthesis sequence is a string that satisfies one of the following conditions:</li>\n<ul>\n<li>It is an empty string.</li>\n<li>There exists a correct parenthesis sequence <var>A</var>, and the string is formed by concatenating <code>(</code>, <var>A</var>, <code>)</code> in this order.</li>\n<li>There exist non-empty correct parenthesis sequences <var>A</var> and <var>B</var>, and the string is formed by concatenating <var>A</var> and <var>B</var> in this order.</li>\n</ul>\n</ul>\n\nThe parentheses in <var>S</var> are properly matched if and only if the <code>(</code>s and <code>)</code>s extracted from <var>S</var> without changing the order form a correct parenthesis sequence.\n</details>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>1 \\le |S| \\le 5 \\times 10^5</var></li>\n<li><var>S</var> consists of uppercase and lowercase English letters, <code>(</code>, and <code>)</code>.</li>\n<li>The parentheses in <var>S</var> are properly matched.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>S</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the final string.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>((A)y)x\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>YAx\n</pre>\n<p>Let us perform the operations for <var>S =</var> <code>((A)y)x</code>.</p>\n<ul>\n<li>Choose <var>l=2</var> and <var>r=4</var>. The substring <code>(A)</code> is removed and replaced with <code>a</code>.<ul>\n<li>After this operation, <var>S =</var> <code>(ay)x</code>.</li>\n</ul>\n</li>\n<li>Choose <var>l=1</var> and <var>r=4</var>. The substring <code>(ay)</code> is removed and replaced with <code>YA</code>.<ul>\n<li>After this operation, <var>S =</var> <code>YAx</code>.</li>\n</ul>\n</li>\n</ul>\n<p>After removing the parentheses, the string becomes <code>YAx</code>, which should be printed.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>((XYZ)n(X(y)Z))\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>XYZNXYZ\n</pre>\n<p>Let us perform the operations for <var>S =</var> <code>((XYZ)n(X(y)Z))</code>.</p>\n<ul>\n<li>Choose <var>l=10</var> and <var>r=12</var>. The substring <code>(y)</code> is removed and replaced with <code>Y</code>.<ul>\n<li>After this operation, <var>S =</var> <code>((XYZ)n(XYZ))</code>.</li>\n</ul>\n</li>\n<li>Choose <var>l=2</var> and <var>r=6</var>. The substring <code>(XYZ)</code> is removed and replaced with <code>zyx</code>.<ul>\n<li>After this operation, <var>S =</var> <code>(zyxn(XYZ))</code>.</li>\n</ul>\n</li>\n<li>Choose <var>l=6</var> and <var>r=10</var>. The substring <code>(XYZ)</code> is removed and replaced with <code>zyx</code>.<ul>\n<li>After this operation, <var>S =</var> <code>(zyxnzyx)</code>.</li>\n</ul>\n</li>\n<li>Choose <var>l=1</var> and <var>r=9</var>. The substring <code>(zyxnzyx)</code> is removed and replaced with <code>XYZNXYZ</code>.<ul>\n<li>After this operation, <var>S =</var> <code>XYZNXYZ</code>.</li>\n</ul>\n</li>\n</ul>\n<p>After removing the parentheses, the string becomes <code>XYZNXYZ</code>, which should be printed.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>(((()))(()))(())\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre></pre>\n<p>The final outcome may be an empty string.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 4</h3><pre>dF(qT(plC())NnnfR(GsdccC))PO()KjsiI((ysA)eWW)ve\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 4</h3><pre>dFGsdccCrFNNnplCtQPOKjsiIwwEysAve\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc350/tasks/abc350_f"}