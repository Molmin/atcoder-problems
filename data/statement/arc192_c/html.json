{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>600</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><strong>この問題はインタラクティブな問題です。</strong></p>\n<p>正整数 <var>N</var> が与えられます。</p>\n<p>すぬけくんは、<var>(1,2,\\dots,N)</var> を並び替えた正整数列 <var>P=(P_1,P_2,\\dots,P_N)</var> と、長さ <var>N</var> の正整数列 <var>A=(A_1,A_2,\\dots,A_N)</var> を隠し持っています。<strong>ここで、<var>P_1&lt;P_2</var> が保証されます。</strong></p>\n<p>あなたは、すぬけくんに <var>2N</var> 回までクエリを送ることができます。クエリは以下のようなものです。</p>\n<ul>\n<li><var>1\\leq s,t\\leq N</var> なる<strong>相異なる</strong>正整数 <var>s,t</var> を指定し、<var>\\displaystyle \\sum_{i=\\min(P_s,P_t)}^{\\max(P_s,P_t)}A_i</var> の値を教えてもらう。</li>\n</ul>\n<p><var>P,A</var> を特定してください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>3\\leq N\\leq 5000</var></li>\n<li><var>1\\leq P_i\\leq N</var> <var>(1\\leq i\\leq N)</var></li>\n<li><var>P_i\\ne P_j</var> <var>(i\\ne j)</var></li>\n<li><var>P_1&lt;P_2</var></li>\n<li><var>1\\leq A_i\\leq 10^9</var> <var>(1\\leq i\\leq N)</var></li>\n<li><var>N,P_i,A_i</var> は整数</li>\n<li><var>P,A</var> はジャッジとの対話前に決定される</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入出力</h3><p>この問題はインタラクティブな問題です。</p>\n<p>最初に、<var>N</var> が標準入力から与えられます。</p>\n<pre><var>N</var>\n</pre>\n\n<p>次に、あなたはすぬけくんに <var>2N</var> 回以下クエリを送ることができます。<strong>相異なる</strong>正整数 <var>s,t</var> を指定してクエリを送るとき、以下のように出力してください。末尾に改行を入れることを忘れないでください。</p>\n<pre>? <var>s</var> <var>t</var>\n</pre>\n\n<p>クエリを送ると、すぬけくんからの返答が以下の形式で標準入力から与えられます。</p>\n<pre><var>X</var>\n</pre>\n\n<p>ここで、<var>X</var> は整数で、</p>\n<ul>\n<li><var>X\\ne -1</var> のとき <var>\\displaystyle \\sum_{i=\\min(P_s,P_t)}^{\\max(P_s,P_t)}A_i</var> の値が <var>X</var> であることを表します。</li>\n<li><var>X=-1</var> のとき、<var>s,t</var> が制約を満たしていないか、クエリを送った回数が <var>2N</var> 回を超えたことをします。<ul>\n<li>このとき、プログラムはすでに不正解とみなされています。ただちにプログラムを終了してください。</li>\n</ul>\n</li>\n</ul>\n<p><var>P</var> と <var>A</var> を特定することができたら、答えを以下の形式で出力してください。これはクエリの回数には計上されません。</p>\n<pre>! <var>P_1</var> <var>P_2</var> <var>\\dots</var> <var>P_N</var> <var>A_1</var> <var>A_2</var> <var>\\dots</var> <var>A_N</var>\n</pre>\n\n<p><strong>特に <var>P_1&lt;P_2</var> であることに注意してください。</strong> この出力の後、ただちにプログラムを終了してください。</p>\n<p>上記のいずれの形式にも当てはまらない出力をした場合は、<code>-1</code> が標準入力から与えられます。</p>\n<pre>-1\n</pre>\n\n<p>このときも、プログラムはすでに不正解とみなされています。ただちにプログラムを終了してください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>注意点</h3><ul>\n<li><font color=\"red\"><strong>出力を行うたびに、末尾に改行を入れて標準出力をflushしてください。そうしなかった場合、ジャッジ結果が <span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"実行時間制限超過\">TLE</span> となる可能性があります。</strong></font></li>\n<li>解答を出力したとき、または <code>-1</code> を標準入力から受け取ったとき、ただちにプログラムを終了してください。そうしなかった場合の判定結果は不定です。</li>\n<li>余計な改行は不正なフォーマットの出力とみなされることに注意してください。</li>\n<li><strong>この問題のジャッジシステムは適応的ではありません。</strong> つまり、<var>P</var> と <var>A</var> はジャッジとの対話前に決定され、いかなるタイミングでも変更されることはありません。</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>入出力例</h3><p><var>N=6,P=(2,4,6,5,3,1),A=(1,9,2,25,2,9)</var> のときの対話の一例を示します。</p>\n<table class=\"table table-bordered\">\n<thead>\n<tr>\n<th align=\"left\">入力</th>\n<th align=\"left\">出力</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code>6</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">まず整数 <var>N</var> が標準入力から与えられます。</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>? 1 2</code></td>\n<td align=\"left\"><var>s=1,t=2</var> としてすぬけくんにクエリを送ります。</td>\n</tr>\n<tr>\n<td align=\"left\"><code>36</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">出力は制約を満たしているので、<var>\\displaystyle \\sum_{i=\\min(P_1,P_2)}^{\\max(P_1,P_2)}A_i</var> の値である <var>36</var> が与えられます。</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>? 2 5</code></td>\n<td align=\"left\"><var>s=2,t=5</var> としてすぬけくんにクエリを送ります。</td>\n</tr>\n<tr>\n<td align=\"left\"><code>27</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">出力は制約を満たしているので、<var>\\displaystyle \\sum_{i=\\min(P_2,P_5)}^{\\max(P_2,P_5)}A_i</var> の値である <var>27</var> が与えられます。</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>! 2 4 6 5 3 1 1 9 2 25 2 9</code></td>\n<td align=\"left\"><var>P</var> と <var>A</var> が特定できたことを報告します。この出力の後、ただちにプログラムを終了することで正解と判定されます。</td>\n</tr>\n</tbody>\n</table>\n<p>これは対話の一例であることに注意してください。特に、ここまでのクエリとその返答で <var>P</var> と <var>A</var> を確実に特定できるとは限りません。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>600</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p><strong>This problem is interactive.</strong></p>\n<p>You are given a positive integer <var>N</var>.</p>\n<p>Snuke secretly holds a permutation <var>P=(P_1,P_2,\\dots,P_N)</var> of <var>(1,2,\\dots,N)</var> and a sequence <var>A=(A_1,A_2,\\dots,A_N)</var> of positive integers of length <var>N</var>. <strong>It is guaranteed that <var>P_1&lt;P_2</var>.</strong></p>\n<p>You may send up to <var>2N</var> queries to Snuke. A query is of the following form:</p>\n<ul>\n<li>Specify two <strong>distinct</strong> positive integers <var>s</var> and <var>t</var> with <var>1\\leq s,t\\leq N</var>, and you will be given the value of <var>\\displaystyle \\sum_{i=\\min(P_s,P_t)}^{\\max(P_s,P_t)}A_i</var>.</li>\n</ul>\n<p>Determine <var>P</var> and <var>A</var>.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>3\\leq N\\leq 5000</var></li>\n<li><var>1\\leq P_i\\leq N</var> <var>(1\\leq i\\leq N)</var></li>\n<li><var>P_i\\ne P_j</var> for <var>i\\ne j</var>.</li>\n<li><var>P_1&lt;P_2</var></li>\n<li><var>1\\leq A_i\\leq 10^9</var> <var>(1\\leq i\\leq N)</var></li>\n<li><var>N</var>, <var>P_i</var>, and <var>A_i</var> are integers.</li>\n<li><var>P</var> and <var>A</var> are fixed before the interaction with the judge.</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Input/Output</h3><p>This problem is interactive.</p>\n<p>First, <var>N</var> is given from Standard Input:</p>\n<pre><var>N</var>\n</pre>\n\n<p>Next, you may send at most <var>2N</var> queries to Snuke. When sending a query by specifying two <strong>distinct</strong> positive integers <var>s,t</var>, output in the following format. Do not forget to include a newline at the end.</p>\n<pre>? <var>s</var> <var>t</var>\n</pre>\n\n<p>After sending a query, you will receive a response from Snuke in the following format:</p>\n<pre><var>X</var>\n</pre>\n\n<p>Here, <var>X</var> is an integer:</p>\n<ul>\n<li>If <var>X\\ne -1</var>, then <var>X</var> is the value of <var>\\displaystyle \\sum_{i=\\min(P_s,P_t)}^{\\max(P_s,P_t)}A_i</var>.</li>\n<li>If <var>X=-1</var>, then either <var>s,t</var> do not satisfy the constraints or you have sent more than <var>2N</var> queries.<ul>\n<li>In this case, your program is judged as incorrect and must terminate immediately.</li>\n</ul>\n</li>\n</ul>\n<p>Once you have determined <var>P</var> and <var>A</var>, output your answer in the following format. This output does not count as a query.</p>\n<pre>! <var>P_1</var> <var>P_2</var> <var>\\dots</var> <var>P_N</var> <var>A_1</var> <var>A_2</var> <var>\\dots</var> <var>A_N</var>\n</pre>\n\n<p><strong>Note that <var>P_1&lt;P_2</var>.</strong> After this output, terminate your program immediately.</p>\n<p>If you output anything that does not follow the above formats, <code>-1</code> will be given as input.</p>\n<pre>-1\n</pre>\n\n<p>In that case, your program is judged as incorrect and must terminate immediately.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Notes</h3><ul>\n<li><font color=\"red\"><strong>After every output, be sure to end with a newline and flush the standard output. Failure to do so may result in a <span class=\"label label-warning\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Time Limit Exceeded\">TLE</span>.</strong></font></li>\n<li>When you output your answer, or receive <code>-1</code> from standard input, terminate your program immediately. Otherwise, the outcome is indeterminate.</li>\n<li>Note that extra newlines may be considered as an output format error.</li>\n<li><strong>The judge system for this problem is not adaptive.</strong> That is, <var>P</var> and <var>A</var> are determined before the interaction with the judge and will not be changed at any point.</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Interaction</h3><p>For <var>N=6</var>, <var>P=(2,4,6,5,3,1)</var>, and <var>A=(1,9,2,25,2,9)</var>, here is an example of an interaction.</p>\n<table class=\"table table-bordered\">\n<thead>\n<tr>\n<th align=\"left\">Input</th>\n<th align=\"left\">Output</th>\n<th align=\"left\">Explanation</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code>6</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">First, the integer <var>N</var> is given from standard input.</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>? 1 2</code></td>\n<td align=\"left\">A query is sent to Snuke with <var>s=1</var>, <var>t=2</var>.</td>\n</tr>\n<tr>\n<td align=\"left\"><code>36</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">Since the query satisfies the constraints, the value <var>36</var>, which is equal to <var>\\displaystyle \\sum_{i=\\min(P_1,P_2)}^{\\max(P_1,P_2)}A_i</var>, is returned.</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>? 2 5</code></td>\n<td align=\"left\">A query is sent to Snuke with <var>s=2</var>, <var>t=5</var>.</td>\n</tr>\n<tr>\n<td align=\"left\"><code>27</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">Since the query satisfies the constraints, the value <var>27</var>, which is equal to <var>\\displaystyle \\sum_{i=\\min(P_2,P_5)}^{\\max(P_2,P_5)}A_i</var>, is returned.</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"left\"><code>! 2 4 6 5 3 1 1 9 2 25 2 9</code></td>\n<td align=\"left\">You report that <var>P</var> and <var>A</var> have been determined. After this output, the program should terminate immediately, and it will be judged as correct.</td>\n</tr>\n</tbody>\n</table>\n<p>Note that this is just one example of an interaction. In particular, it is not guaranteed that <var>P</var> and <var>A</var> can be uniquely determined from the queries and responses shown above.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/arc192/tasks/arc192_c"}