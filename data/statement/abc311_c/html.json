{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>350</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>N</var> 頂点 <var>N</var> 辺の有向グラフがあります。<br>\n<var>i</var> 番目の辺は頂点 <var>i</var> から 頂点 <var>A_i</var> に伸びます。 ( <var>i \\neq A_i</var> であることは制約より保証されます )<br>\n同一頂点を複数回含まない有向閉路をひとつ求めてください。<br>\nなお、この問題の制約下で答えが存在することが示せます。  </p>\n<h4>注釈</h4>\n<p>この問題では、有向閉路とは以下の条件を全て満たす頂点の列 <var>B=(B_1,B_2,\\dots,B_M)</var> であるとします。</p>\n<ul>\n<li><var>M \\ge 2</var></li>\n<li><var>B_i</var> から <var>B_{i+1}</var> に辺が伸びている。 ( <var>1 \\le i \\le M-1</var> )</li>\n<li><var>B_M</var> から <var>B_1</var> に辺が伸びている。</li>\n<li><var>i \\neq j</var> ならば <var>B_i \\neq B_j</var></li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li>入力は全て整数</li>\n<li><var>2 \\le N \\le 2 \\times 10^5</var></li>\n<li><var>1 \\le A_i \\le N</var></li>\n<li><var>A_i \\neq i</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var>\n<var>A_1</var> <var>A_2</var> <var>\\dots</var> <var>A_N</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>以下の形式で出力せよ。</p>\n<pre><var>M</var>\n<var>B_1</var> <var>B_2</var> <var>\\dots</var> <var>B_M</var>\n</pre>\n\n<p><var>M</var> は出力する有向閉路の頂点数であり、 <var>B_i</var> は有向閉路の <var>i</var> 番目の頂点である。<br>\n出力は以下の条件を満たす必要がある。</p>\n<ul>\n<li><var>2 \\le M</var></li>\n<li><var>B_{i+1} = A_{B_i}</var> ( <var>1 \\le i \\le M-1</var> )</li>\n<li><var>B_{1} = A_{B_M}</var></li>\n<li><var>B_i \\neq B_j</var> ( <var>i \\neq j</var> )</li>\n</ul>\n<p>答えとして考えられるものが複数ある場合、どれを出力しても正解となる。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>7\n6 7 2 1 3 4 5\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>4\n7 5 3 2\n</pre>\n\n<p><var>7 \\rightarrow 5 \\rightarrow 3 \\rightarrow 2 \\rightarrow 7</var> は確かに有向閉路になっています。</p>\n<p>この入力に対応するグラフは以下の通りです。</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/0ab396c54e276edb27de02ad3b20cf7f.png\"></p>\n<p>他の正解となる出力の例は以下の通りです。</p>\n<pre>4\n2 7 5 3\n</pre>\n\n<pre>3\n4 1 6\n</pre>\n\n<p>グラフが連結であるとは限らないことに注意してください。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>2\n2 1\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>2\n1 2\n</pre>\n\n<p><var>1 \\rightarrow 2</var> と <var>2 \\rightarrow 1</var> の辺が双方存在するケースです。<br>\nこの場合、 <var>1 \\rightarrow 2 \\rightarrow 1</var> は確かに有向閉路になっています。</p>\n<p>この入力に対応するグラフは以下の通りです。<br>\n図中 <var>1 \\leftrightarrow 2</var> で <var>1 \\rightarrow 2</var> と <var>2 \\rightarrow 1</var> の辺が双方あることを表現しています。</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/97e8121c1e36bbcefae0b68e1b8fbfd2.png\"></p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>8\n3 7 4 7 3 3 8 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>3\n2 7 8\n</pre>\n\n<p>この入力に対応するグラフは以下の通りです。</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/c31a7153e0ca36e8c0e1dd4c7bfe5329.png\"></p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>350</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There is a directed graph with <var>N</var> vertices and <var>N</var> edges.<br>\nThe <var>i</var>-th edge goes from vertex <var>i</var> to vertex <var>A_i</var>. (The constraints guarantee that <var>i \\neq A_i</var>.)<br>\nFind a directed cycle without the same vertex appearing multiple times.<br>\nIt can be shown that a solution exists under the constraints of this problem.</p>\n<h4>Notes</h4>\n<p>The sequence of vertices <var>B = (B_1, B_2, \\dots, B_M)</var> is called a directed cycle when all of the following conditions are satisfied:</p>\n<ul>\n<li><var>M \\geq 2</var></li>\n<li>The edge from vertex <var>B_i</var> to vertex <var>B_{i+1}</var> exists. <var>(1 \\leq i \\leq M-1)</var></li>\n<li>The edge from vertex <var>B_M</var> to vertex <var>B_1</var> exists.</li>\n<li>If <var>i \\neq j</var>, then <var>B_i \\neq B_j</var>.</li>\n</ul>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li>All input values are integers.</li>\n<li><var>2 \\le N \\le 2 \\times 10^5</var></li>\n<li><var>1 \\le A_i \\le N</var></li>\n<li><var>A_i \\neq i</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var>\n<var>A_1</var> <var>A_2</var> <var>\\dots</var> <var>A_N</var>\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print a solution in the following format:</p>\n<pre><var>M</var>\n<var>B_1</var> <var>B_2</var> <var>\\dots</var> <var>B_M</var>\n</pre>\n\n<p><var>M</var> is the number of vertices, and <var>B_i</var> is the <var>i</var>-th vertex in the directed cycle.<br>\nThe following conditions must be satisfied:</p>\n<ul>\n<li><var>2 \\le M</var></li>\n<li><var>B_{i+1} = A_{B_i}</var> ( <var>1 \\le i \\le M-1</var> )</li>\n<li><var>B_{1} = A_{B_M}</var></li>\n<li><var>B_i \\neq B_j</var> ( <var>i \\neq j</var> )</li>\n</ul>\n<p>If multiple solutions exist, any of them will be accepted.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>7\n6 7 2 1 3 4 5\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>4\n7 5 3 2\n</pre>\n\n<p><var>7 \\rightarrow 5 \\rightarrow 3 \\rightarrow 2 \\rightarrow 7</var> is indeed a directed cycle.</p>\n<p>Here is the graph corresponding to this input:</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/0ab396c54e276edb27de02ad3b20cf7f.png\"></p>\n<p>Here are other acceptable outputs:</p>\n<pre>4\n2 7 5 3\n</pre>\n\n<pre>3\n4 1 6\n</pre>\n\n<p>Note that the graph may not be connected.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>2\n2 1\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>2\n1 2\n</pre>\n\n<p>This case contains both of the edges <var>1 \\rightarrow 2</var> and <var>2 \\rightarrow 1</var>.<br>\nIn this case, <var>1 \\rightarrow 2 \\rightarrow 1</var> is indeed a directed cycle.</p>\n<p>Here is the graph corresponding to this input, where <var>1 \\leftrightarrow 2</var> represents the existence of both <var>1 \\rightarrow 2</var> and <var>2 \\rightarrow 1</var>:</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/97e8121c1e36bbcefae0b68e1b8fbfd2.png\"></p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>8\n3 7 4 7 3 3 8 2\n</pre>\n\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>3\n2 7 8\n</pre>\n\n<p>Here is the graph corresponding to this input:</p>\n<p><img alt=\"\" src=\"https://img.atcoder.jp/abc311/c31a7153e0ca36e8c0e1dd4c7bfe5329.png\"></p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc311/tasks/abc311_c"}