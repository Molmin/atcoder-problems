{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>2000</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p><var>1</var> 以上 <var>M</var> 以下の整数が書かれているカードからなる山札が <var>N</var> 個あります。 <var>i\\ (1\\leq i \\leq N)</var> 番目の山札は <var>K_i</var> 枚のカードからなり、上から <var>j</var> 枚目のカードに書かれている整数は <var>A_{i,j}\\ (1\\leq j \\leq K_i)</var> です。</p>\n<p>カードに書かれている整数ははじめ、以下の制約を満たします。</p>\n<ul>\n<li>各整数 <var>x\\ (1\\leq x \\leq M)</var> について、<var>x</var> が書かれているカードは <var>N</var> 個の山札のうちちょうど <var>2</var> つの山札に <var>1</var> 枚ずつ存在する</li>\n<li>各山札の一番上のカードに書かれている整数は互いに相異なる</li>\n</ul>\n<p><var>N</var> 個の山札に対し以下のような操作を考えます。</p>\n<ul>\n<li>カードが残っている山札を <var>1</var> つ選び、一番上のカードを捨てる。ただし、カードを捨てた後、カードが残っている各山札の一番上のカードに書かれている整数は互いに相異なっていなければならない</li>\n</ul>\n<p>最大で何回操作を行えるか求めてください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li><var>2 \\leq N \\leq M</var></li>\n<li><var>2 \\leq M \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq K_i \\leq M</var></li>\n<li><var>1 \\leq A_{i,j} \\leq M</var></li>\n<li>各整数 <var>x\\ (1\\leq x \\leq M)</var> に対し、<var>x=A_{i,j}</var> が成り立つ <var>i,j</var> の組はちょうど <var>2</var> つ存在し、<var>2</var> つの <var>i</var> は互いに相異なる</li>\n<li><var>A_{i,1}\\ (1\\leq i \\leq N)</var> は互いに相異なる</li>\n<li>入力される値はすべて整数</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられます。</p>\n<pre><var>N</var> <var>M</var>\n<var>K_1</var> <var>A_{1,1}</var> <var>A_{1,2}</var> <var>\\dots</var> <var>A_{1,K_1}</var>\n<var>K_2</var> <var>A_{2,1}</var> <var>A_{2,2}</var> <var>\\dots</var> <var>A_{2,K_2}</var>\n<var>\\vdots</var>\n<var>K_N</var> <var>A_{N,1}</var> <var>A_{N,2}</var> <var>\\dots</var> <var>A_{N,K_N}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを出力してください。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>2 4\n4 1 2 3 4\n4 3 2 1 4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>1\n</pre>\n<p>はじめに <var>1</var> 番目の山札に対して操作すると、山札のカードに書かれている整数は上から順に <var>2,3,4</var> となります。この状態から <var>1</var> 番目の山札に対して操作すると、<var>1</var> 番目の山札も <var>2</var> 番目の山札も一番上のカードに書かれている整数が <var>3</var> になってしまうため、<var>1</var> 番目の山札に操作できません。同様に <var>2</var> 番目の山札に対しても操作できません。よってはじめに <var>1</var> 番目の山札に対して操作した場合、操作できるのは <var>1</var> 回だけです。</p>\n<p>はじめに <var>2</var> 番目の山札に対して操作した場合も操作できるのは <var>1</var> 回だけなので、答えは <var>1</var> です。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>4 6\n2 6 4\n3 2 5 3\n4 3 1 5 6\n3 4 1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>12\n</pre>\n<p>適切に操作をすることで全てのカードを捨てることができます。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>3 3\n2 1 2\n2 2 3\n2 3 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>0\n</pre>\n<p><var>1</var> 回も操作できないこともあります。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 4</h3><pre>12 40\n4 35 39 11 21\n7 31 29 16 15 30 32 34\n4 21 27 38 40\n11 17 28 26 23 33 22 3 36 8 1 20\n1 30\n4 40 38 24 6\n8 8 36 9 10 5 7 20 4\n10 5 10 9 3 22 33 23 26 28 17\n4 15 16 29 31\n11 19 13 12 18 25 2 39 35 7 14 37\n3 4 1 14\n13 24 27 11 2 25 18 12 13 19 32 37 6 34\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 4</h3><pre>53\n</pre></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>2000</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>There are <var>N</var> decks of cards, each card in which has an integer between <var>1</var> and <var>M</var>, inclusive, written on it. The <var>i</var>-th deck <var>(1\\leq i \\leq N)</var> contains <var>K_i</var> cards, and the number written on the <var>j</var>-th card from the top is <var>A_{i,j}\\ (1\\leq j \\leq K_i)</var>.</p>\n<p>Initially, the integers written on the cards satisfy the following conditions:</p>\n<ul>\n<li>For each integer <var>x\\ (1\\leq x \\leq M)</var>, there are exactly two cards with <var>x</var> written on them, each in a different deck.</li>\n<li>The integers written on the top cards of all the decks are pairwise different.</li>\n</ul>\n<p>We can perform the following operation on the <var>N</var> decks:</p>\n<ul>\n<li>Choose a deck that still has cards and discard the top card. After discarding, the integers written on the top cards of the decks that still have cards must remain pairwise different.</li>\n</ul>\n<p>Determine the maximum number of times this operation can be performed.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li><var>2 \\leq N \\leq M</var></li>\n<li><var>2 \\leq M \\leq 2 \\times 10^5</var></li>\n<li><var>1 \\leq K_i \\leq M</var></li>\n<li><var>1 \\leq A_{i,j} \\leq M</var></li>\n<li>For each integer <var>x\\ (1\\leq x \\leq M)</var>, there are exactly two pairs <var>(i,j)</var> such that <var>x=A_{i,j}</var>, and the two values of <var>i</var> are different.</li>\n<li><var>A_{i,1}\\ (1\\leq i \\leq N)</var> are pairwise different.</li>\n<li>All input values are integers.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var> <var>M</var>\n<var>K_1</var> <var>A_{1,1}</var> <var>A_{1,2}</var> <var>\\dots</var> <var>A_{1,K_1}</var>\n<var>K_2</var> <var>A_{2,1}</var> <var>A_{2,2}</var> <var>\\dots</var> <var>A_{2,K_2}</var>\n<var>\\vdots</var>\n<var>K_N</var> <var>A_{N,1}</var> <var>A_{N,2}</var> <var>\\dots</var> <var>A_{N,K_N}</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>2 4\n4 1 2 3 4\n4 3 2 1 4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>1\n</pre>\n<p>If you initially perform the operation on the first deck, the numbers on the cards of this deck become <var>2, 3, 4</var> in order from the top. After this, you may not perform the operation again on the first deck because both the first and second decks would have <var>3</var> on their top cards. Similarly, you cannot perform the operation on the second deck either. Therefore, if you start by performing the operation on the first deck, you can only do it once.</p>\n<p>Even if you start by performing the operation on the second deck, you can only do it once. Therefore, the answer is <var>1</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>4 6\n2 6 4\n3 2 5 3\n4 3 1 5 6\n3 4 1 2\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>12\n</pre>\n<p>By operating properly, it is possible to discard all the cards.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>3 3\n2 1 2\n2 2 3\n2 3 1\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>0\n</pre>\n<p>There are cases when no operation can be performed.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 4</h3><pre>12 40\n4 35 39 11 21\n7 31 29 16 15 30 32 34\n4 21 27 38 40\n11 17 28 26 23 33 22 3 36 8 1 20\n1 30\n4 40 38 24 6\n8 8 36 9 10 5 7 20 4\n10 5 10 9 3 22 33 23 26 28 17\n4 15 16 29 31\n11 19 13 12 18 25 2 39 35 7 14 37\n3 4 1 14\n13 24 27 11 2 25 18 12 13 19 32 37 6 34\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 4</h3><pre>53\n</pre></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/agc062/tasks/agc062_f"}