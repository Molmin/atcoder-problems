{"html":{"ja":"<span class=\"lang-ja\">\n<p>配点 : <var>400</var> 点</p>\n\n<div class=\"part\">\n<section>\n<h3>問題文</h3><p>高橋くんはレストランで、 <var>N</var> 品からなる奇妙なフルコースを楽しむことにしました。<br>\nこのコースのうち <var>i</var> 番目の料理は以下の通りです。</p>\n<ul>\n<li><var>X_i=0</var> の場合、美味しさが <var>Y_i</var> の <strong>解毒剤入り</strong> の料理</li>\n<li><var>X_i=1</var> の場合、美味しさが <var>Y_i</var> の <strong>毒入り</strong> の料理</li>\n</ul>\n<p>高橋くんが料理を食べると、高橋くんの状態は以下のように変化します。  </p>\n<ul>\n<li>最初、高橋くんはお腹を壊していない。</li>\n<li>高橋くんが <strong>お腹を壊していない</strong> 時、<ul>\n<li><strong>解毒剤入り</strong> の料理を食べても、高橋くんは <strong>お腹を壊していないまま</strong> である。</li>\n<li><strong>毒入り</strong> の料理を食べると、高橋くんは <strong>お腹を壊す</strong> 。</li>\n</ul>\n</li>\n<li>高橋くんが <strong>お腹を壊している</strong> 時、<ul>\n<li><strong>解毒剤入り</strong> の料理を食べると、高橋くんは <strong>お腹を壊していない状態になる</strong> 。</li>\n<li><strong>毒入り</strong> の料理を食べると、高橋くんは <strong>死ぬ</strong> 。</li>\n</ul>\n</li>\n</ul>\n<p>コースは以下の流れで進行します。</p>\n<ul>\n<li><var>i = 1, \\ldots, N</var> についてこの順に、以下の処理を繰り返す。<ul>\n<li>まず、 <var>i</var> 番目の料理が高橋くんに提供される。</li>\n<li>次に、 高橋くんはこの料理に対し「食べる」か「下げてもらう」かを選択する。<ul>\n<li>「食べる」を選択した場合、高橋くんは <var>i</var> 番目の料理を食べる。食べた料理に応じて高橋くんの状態も変化する。</li>\n<li>「下げてもらう」を選択した場合、高橋くんは <var>i</var> 番目の料理を食べない。この料理を後で提供してもらったり何らかの手段で保存したりすることはできない。</li>\n</ul>\n</li>\n<li>最後に、 (状態が変化するなら変化後の時点で) 高橋くんが死んでいない場合、<ul>\n<li><var>i \\neq N</var> なら次の料理に進む。</li>\n<li><var>i = N</var> なら高橋くんは生きて退店する。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>高橋くんはこのあと重要な仕事があるため、高橋くんは生きて退店しなければなりません。<br>\nこの条件の下で高橋くんが各料理に対し「食べる」「下げてもらう」を選択したとき、高橋くんが <strong>食べた料理の美味しさの総和として考えられる最大値</strong> ( 但し、何も食べなかった場合は <var>0</var> ) を出力してください。</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>制約</h3><ul>\n<li>入力は全て整数</li>\n<li><var>1 \\le N \\le 3 \\times 10^5</var></li>\n<li><var>X_i \\in \\{0,1\\}</var><ul>\n<li>つまり、 <var>X_i</var> は <var>0,1</var> のどちらかである。</li>\n</ul>\n</li>\n<li><var>-10^9 \\le Y_i \\le 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。</p>\n<pre><var>N</var>\n<var>X_1</var> <var>Y_1</var>\n<var>X_2</var> <var>Y_2</var>\n<var>\\vdots</var>\n<var>X_N</var> <var>Y_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力</h3><p>答えを整数として出力せよ。</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 1</h3><pre>5\n1 100\n1 300\n0 -200\n1 500\n1 300\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 1</h3><pre>600\n</pre>\n<p>以下のように選択することで食べた料理の美味しさの総和を <var>600</var> にでき、これが考えられる最大値です。</p>\n<ul>\n<li><var>1</var> 番目の料理を下げてもらう。高橋くんはお腹を壊していません。</li>\n<li><var>2</var> 番目の料理を食べる。高橋くんはお腹を壊し、食べた料理の美味しさの総和は <var>300</var> となります。</li>\n<li><var>3</var> 番目の料理を食べる。高橋くんはお腹を壊していない状態に戻り、食べた料理の美味しさの総和は <var>100</var> となります。</li>\n<li><var>4</var> 番目の料理を食べる。高橋くんはお腹を壊し、食べた料理の美味しさの総和は <var>600</var> となります。</li>\n<li><var>5</var> 番目の料理を下げてもらう。高橋くんはお腹を壊しています。</li>\n<li>最終的に高橋くんは死んでいないので、高橋くんは生きて退店する。</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 2</h3><pre>4\n0 -1\n1 -2\n0 -3\n1 -4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 2</h3><pre>0\n</pre>\n<p>この入力の場合何も食べないことが最善ですが、この場合答えは <var>0</var> となります。</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>入力例 3</h3><pre>15\n1 900000000\n0 600000000\n1 -300000000\n0 -700000000\n1 200000000\n1 300000000\n0 -600000000\n1 -900000000\n1 600000000\n1 -100000000\n1 -400000000\n0 900000000\n0 200000000\n1 -500000000\n1 900000000\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>出力例 3</h3><pre>4100000000\n</pre>\n<p>答えが <var>32</var> bit 符号付き整数に収まらない可能性があります。</p></section>\n</div>\n</span>","en":"<span class=\"lang-en\">\n<p>Score : <var>400</var> points</p>\n\n<div class=\"part\">\n<section>\n<h3>Problem Statement</h3><p>Takahashi has decided to enjoy a wired full-course meal consisting of <var>N</var> courses in a restaurant.<br>\nThe <var>i</var>-th course is:</p>\n<ul>\n<li>if <var>X_i=0</var>, an <strong>antidotal</strong> course with a tastiness of <var>Y_i</var>;</li>\n<li>if <var>X_i=1</var>, a <strong>poisonous</strong> course with a tastiness of <var>Y_i</var>.</li>\n</ul>\n<p>When Takahashi eats a course, his state changes as follows:  </p>\n<ul>\n<li>Initially, Takahashi has a healthy stomach.</li>\n<li>When he has a <strong>healthy stomach</strong>,<ul>\n<li>if he eats an <strong>antidotal</strong> course, his stomach <strong>remains healthy</strong>;</li>\n<li>if he eats a <strong>poisonous</strong> course, he <strong>gets an upset stomach</strong>.</li>\n</ul>\n</li>\n<li>When he has an <strong>upset stomach</strong>,<ul>\n<li>if he eats an <strong>antidotal</strong> course, his stomach <strong>becomes healthy</strong>;</li>\n<li>if he eats a <strong>poisonous</strong> course, he <strong>dies</strong>.</li>\n</ul>\n</li>\n</ul>\n<p>The meal progresses as follows.</p>\n<ul>\n<li>Repeat the following process for <var>i = 1, \\ldots, N</var> in this order.<ul>\n<li>First, the <var>i</var>-th course is served to Takahashi.</li>\n<li>Next, he chooses whether to \"eat\" or \"skip\" the course.<ul>\n<li>If he chooses to \"eat\" it, he eats the <var>i</var>-th course.  His state also changes depending on the course he eats.</li>\n<li>If he chooses to \"skip\" it, he does not eat the <var>i</var>-th course.  This course cannot be served later or kept somehow.</li>\n</ul>\n</li>\n<li>Finally, (if his state changes, after the change) if he is not dead,<ul>\n<li>if <var>i \\neq N</var>, he proceeds to the next course.</li>\n<li>if <var>i = N</var>, he makes it out of the restaurant alive.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>An important meeting awaits him, so he must make it out of there alive.<br>\nFind the <strong>maximum possible sum of tastiness of the courses that he eats</strong> (or <var>0</var> if he eats nothing) when he decides whether to \"eat\" or \"skip\" the courses under that condition.</p>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Constraints</h3><ul>\n<li>All input values are integers.</li>\n<li><var>1 \\le N \\le 3 \\times 10^5</var></li>\n<li><var>X_i \\in \\{0,1\\}</var><ul>\n<li>In other words, <var>X_i</var> is either <var>0</var> or <var>1</var>.</li>\n</ul>\n</li>\n<li><var>-10^9 \\le Y_i \\le 10^9</var></li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"io-style\">\n<div class=\"part\">\n<section>\n<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>\n<pre><var>N</var>\n<var>X_1</var> <var>Y_1</var>\n<var>X_2</var> <var>Y_2</var>\n<var>\\vdots</var>\n<var>X_N</var> <var>Y_N</var>\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Output</h3><p>Print the answer as an integer.</p>\n</section>\n</div>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 1</h3><pre>5\n1 100\n1 300\n0 -200\n1 500\n1 300\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 1</h3><pre>600\n</pre>\n<p>The following choices result in a total tastiness of the courses that he eats amounting to <var>600</var>, which is the maximum possible.</p>\n<ul>\n<li>He skips the <var>1</var>-st course.  He now has a healthy stomach.</li>\n<li>He eats the <var>2</var>-nd course.  He now has an upset stomach, and the total tastiness of the courses that he eats amounts to <var>300</var>.</li>\n<li>He eats the <var>3</var>-rd course.  He now has a healthy stomach again, and the total tastiness of the courses that he eats amounts to <var>100</var>.</li>\n<li>He eats the <var>4</var>-th course.  He now has an upset stomach, and the total tastiness of the courses that he eats amounts to <var>600</var>.</li>\n<li>He skips the <var>5</var>-th course.  He now has an upset stomach.</li>\n<li>In the end, he is not dead, so he makes it out of the restaurant alive.</li>\n</ul>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 2</h3><pre>4\n0 -1\n1 -2\n0 -3\n1 -4\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 2</h3><pre>0\n</pre>\n<p>For this input, it is optimal to eat nothing, in which case the answer is <var>0</var>.</p>\n</section>\n</div>\n\n<hr>\n<div class=\"part\">\n<section>\n<h3>Sample Input 3</h3><pre>15\n1 900000000\n0 600000000\n1 -300000000\n0 -700000000\n1 200000000\n1 300000000\n0 -600000000\n1 -900000000\n1 600000000\n1 -100000000\n1 -400000000\n0 900000000\n0 200000000\n1 -500000000\n1 900000000\n</pre>\n</section>\n</div>\n\n<div class=\"part\">\n<section>\n<h3>Sample Output 3</h3><pre>4100000000\n</pre>\n<p>The answer may not fit into a <var>32</var>-bit integer type.</p></section>\n</div>\n</span>"},"endpoint":"https://atcoder.jp/contests/abc306/tasks/abc306_d"}